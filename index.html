<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Eric&apos;s Knowledge Base">
<meta property="og:type" content="website">
<meta property="og:title" content="Space">
<meta property="og:url" content="http://yoursite.com/index.html">
<meta property="og:site_name" content="Space">
<meta property="og:description" content="Eric&apos;s Knowledge Base">
<meta property="og:locale" content="zh-Hans">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Space">
<meta name="twitter:description" content="Eric&apos;s Knowledge Base">





  
  
  <link rel="canonical" href="http://yoursite.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Space</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Space</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Navigationsleiste an/ausschalten">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>Startseite</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archiv</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/16/Web核心知识点总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric">
      <meta itemprop="description" content="Eric's Knowledge Base">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Space">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/16/Web核心知识点总结/" class="post-title-link" itemprop="url">web核心</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-06-16 09:56:17 / Geändert am: 09:56:55" itemprop="dateCreated datePublished" datetime="2019-06-16T09:56:17+08:00">2019-06-16</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Web核心知识点总结"><a href="#Web核心知识点总结" class="headerlink" title="Web核心知识点总结"></a>Web核心知识点总结</h1><h3 id="1-XML概述"><a href="#1-XML概述" class="headerlink" title="1. XML概述"></a>1. XML概述</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Extensible Markup Language 可扩展标记语言，自定义标签，使用标记语言的特性描述数据结构，主要作为配置文件用于数据的存储以及传输。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>语法特点：</strong></p>
<ol>
<li>文档后缀名：xml</li>
<li>第一行必须定义为文档声明</li>
<li>文档中有且仅有一个根标签，所有标签必须闭合，区分大小写</li>
<li>属性值必须加引号</li>
</ol>
<p><strong>文档声明：</strong></p>
<ol>
<li>格式：<code>&lt;?xml version=&quot;1.0&quot; encoding = &quot;UTF-8&quot; standalone = &quot;yes&quot;?&gt;</code></li>
<li>version 版本号是必须的属性；</li>
<li>encoding 告知解析引擎当前文档使用的字符集，默认值：ISO-8859-1 不支持汉</li>
<li>standalone 是否独立，取值yes为不依赖其他文件，取值no为依赖其他文件</li>
</ol>
<p><strong>指令：</strong></p>
<ol>
<li>结合CSS指令：<code>&lt; ?xml-stylesheet type=&quot;text/css&quot; href=&quot;a.css&quot; ?&gt;</code></li>
<li>CDATA区（数据原样展示，不被解析）：<code>&lt;![CDATA[ 数据 ]]&gt;</code></li>
</ol>
</blockquote>
<h3 id="2-XML约束"><a href="#2-XML约束" class="headerlink" title="2. XML约束"></a>2. XML约束</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">规定xml文档的书写规则，不影响解析，主要有两种技术：</span><br><span class="line">DTD:一种简单的约束技术，约束的内容较为简单；Schema:一种复杂的约束技术，约束的内容较为详细</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>DTD引入：</strong></p>
<ul>
<li><p>内部dtd：将约束规则定义在xml文档中</p>
</li>
<li><p>外部dtd：将约束的规则定义在外部的dtd文件中</p>
<p>本地：<code>&lt; !DOCTYPE 根标签名 SYSTEM &quot;dtd文件的位置&quot;&gt;</code></p>
<p>网络：<code>&lt; !DOCTYPE 根标签名 PUBLIC &quot;dtd文件名字&quot; &quot;dtd文件的位置URL&quot;&gt;</code></p>
</li>
</ul>
<p><strong>Schema引入：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt; 1. 填写xml文档的根元素:</span><br><span class="line">&gt; 	&lt;beans</span><br><span class="line">&gt; 2. 引入xsd约束的标准，并声明前缀xsi：</span><br><span class="line">&gt; 	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance</span><br><span class="line">&gt; 3. 给xsi的location参数赋值，说明引入的xsd文件路径，路径前是xsd文件的命名空间：</span><br><span class="line">&gt; 	xsi:schemaLocation=&quot;</span><br><span class="line">&gt;         http://www.springframework.org/schema/beans（命名空间） 		</span><br><span class="line">&gt;         http://www.springframework.org/schema/beans/spring-beans.xsd（文件路径）</span><br><span class="line">&gt;         http://www.springframework.org/schema/context （命名空间）</span><br><span class="line">&gt;         http://www.springframework.org/schema/context/spring-context.xsd（文件路径）</span><br><span class="line">&gt;         http://www.springframework.org/schema/mvc（命名空间）</span><br><span class="line">&gt;         http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;（文件路径）</span><br><span class="line">&gt; 4. 为每一个xsd约束声明一个前缀，作为标识：</span><br><span class="line">&gt; 	xmlns=&quot;http://www.springframework.org/schema/beans&quot;（无前缀为默认）</span><br><span class="line">&gt; 	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;（前缀context）</span><br><span class="line">&gt; 	xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;（前缀mvc）&gt;	</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="3-XML解析"><a href="#3-XML解析" class="headerlink" title="3. XML解析"></a>3. XML解析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">操作xml文档，将文档中的数据读取到内存中</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>解析的方式：</strong></p>
<ol>
<li><p>DOM：将标记语言文档一次性加载进内存，在内存中形成一颗DOM树</p>
<p>优点：操作方便，可以对文档进行CRUD操作；缺点：占内存</p>
</li>
<li><p>SAX：逐行读取，基于事件驱动</p>
<p>优点：不占内存；缺点：只能读取，不能增删改</p>
</li>
</ol>
<p><strong>常见解析器</strong>：</p>
<ol>
<li>JAXP：sun公司提供的解析器，支持dom和sax两种思想</li>
<li>DOM4J：一款非常优秀的解析器。应用广泛，对XPath支持度高</li>
<li>Jsoup：jsoup 是一款Java 的HTML解析器，可直接解析某个URL地址、HTML文本内容。它提供了一套非常省力的API，可通过DOM，CSS以及类似于jQuery的操作方法来取出和操作数据</li>
<li>PULL：Android操作系统内置的解析器，sax方式的</li>
</ol>
</blockquote>
<h4 id="Jsoup解析器"><a href="#Jsoup解析器" class="headerlink" title="Jsoup解析器"></a>Jsoup解析器</h4><blockquote>
<p>Jsoup方法：</p>
<ol>
<li><p>parse解析，返回Document：</p>
<ul>
<li>parse(File in, String charsetName)：解析xml或html文件的</li>
<li>parse(String html)：解析xml或html字符串</li>
<li>parse(URL url, int timeoutMillis)：通过网络路径获取指定的html或xml的文档对象</li>
</ul>
</li>
<li><p>通过Document的方法获取Elements对象：</p>
<ul>
<li>getElementById(String id)：根据id属性值获取唯一的element对象</li>
<li>getElementsByTag(String tagName)：根据标签名称获取元素对象集合</li>
<li>getElementsByAttribute(String key)：根据属性名称获取元素对象集合</li>
<li>getElementsByAttributeValue(String key, String value)：根据属性名和属性值获取元素对象集合</li>
</ul>
</li>
<li><p>通过Elements集合获取元素Element（Elements可当做ArrayList使用）：</p>
<ul>
<li>String attr(String key)：根据属性名称获取属性值</li>
<li>String text():获取文本内容</li>
<li>String html():获取标签体的所有内容(包括子标签及其字符串内容)</li>
</ul>
</li>
<li><p>selector选择器：</p>
<ul>
<li><p>document.select(String cssQuery)，返回Elements</p>
</li>
<li><p>cssQuery语法参考Selector类中定义的语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;       <span class="comment">//示例：获取student标签并且number属性值为heima_0001的age子标签</span></span><br><span class="line">&gt;      	document.select(<span class="string">"student[number=\"heima_0001\"] &gt; age"</span>);</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Jsoup使用步骤</span></span><br><span class="line"><span class="comment">//0.导入jar包：jsoup-1.11.2.jar</span></span><br><span class="line"><span class="comment">//1.获取要解析文件的路径</span></span><br><span class="line">String path = Demo01Jsoup.class.getClassLoader().getResource(<span class="string">"url"</span>).getPath();</span><br><span class="line"><span class="comment">//2.通过Jsoup的方法解析，加载文档进内存，获取Document对象</span></span><br><span class="line">Document document = Jsoup.parse(<span class="keyword">new</span> File(path), <span class="string">"utf-8"</span>);</span><br><span class="line"><span class="comment">//3.获取元素对象集合</span></span><br><span class="line">Elements elements = document.getElementsByTag(<span class="string">"name"</span>);</span><br><span class="line"><span class="comment">//4.获取单个元素对象</span></span><br><span class="line">Element element = elements.get(<span class="number">1</span>);</span><br><span class="line">System.out.println(element.html());	<span class="comment">//获取标签体的所有内容(包括子标签)</span></span><br><span class="line">System.out.println(element.text());	<span class="comment">//获取文本内容</span></span><br></pre></td></tr></table></figure>

<h4 id="Xpath路径语言"><a href="#Xpath路径语言" class="headerlink" title="Xpath路径语言"></a>Xpath路径语言</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">XPath即为XML路径语言，它是一种用来确定XML（标准通用标记语言的子集）文档中某部分位置的语言，使用Jsoup的Xpath需要额外导入jar包，Jsoup只支持XPath1.0。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//XPath使用演示：</span></span><br><span class="line"><span class="comment">//1.获取要解析文件的路径</span></span><br><span class="line">String path = Demo01Jsoup.class.getClassLoader().getResource(<span class="string">"url"</span>).getPath();</span><br><span class="line"><span class="comment">//2.通过Jsoup的方法解析，加载文档进内存，获取Document对象</span></span><br><span class="line">Document document = Jsoup.parse(<span class="keyword">new</span> File(path), <span class="string">"utf-8"</span>);</span><br><span class="line"><span class="comment">//3.根据document对象，创建JXDocument对象</span></span><br><span class="line">JXDocument jxDocument = <span class="keyword">new</span> JXDocument(document);</span><br><span class="line"><span class="comment">//4.结合xpath语法查询符合条件的结果并输出</span></span><br><span class="line">List&lt;JXNode&gt; jxNodes = jxDocument.selN(<span class="string">"条件"</span>);</span><br><span class="line"><span class="keyword">for</span> (JXNode jxNode : jxNodes) &#123;</span><br><span class="line">    System.out.println(jxNode);&#125;</span><br><span class="line"><span class="comment">//条件示范：</span></span><br><span class="line"><span class="comment">//查询所有student标签：</span></span><br><span class="line">jxDocument.selN(<span class="string">"//student"</span>); </span><br><span class="line"><span class="comment">//查询所有student标签下的name标签：</span></span><br><span class="line">jxDocument.selN(<span class="string">"//student/name"</span>); </span><br><span class="line"><span class="comment">//查询student标签下带有id属性的name标签：</span></span><br><span class="line">jxDocument.selN(<span class="string">"//student/name[@id]"</span>); </span><br><span class="line"><span class="comment">//查询student标签下带有id属性的name标签，并且id属性值为itcast：</span></span><br><span class="line">jxDocument.selN(<span class="string">"//student/name[@id='itcast']"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="4-web服务器软件"><a href="#4-web服务器软件" class="headerlink" title="4. web服务器软件"></a>4. web服务器软件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">web服务器软件搭载在服务器上，可以部署web项目，让用户通过浏览器来访问这些项目</span><br><span class="line">常见的java相关的web服务器软件：</span><br><span class="line">	webLogic：oracle公司，大型的JavaEE服务器，支持所有的JavaEE规范，收费。</span><br><span class="line">	webSphere：IBM公司，大型的JavaEE服务器，支持所有的JavaEE规范，收费。</span><br><span class="line">	JBOSS：JBOSS公司的，大型的JavaEE服务器，支持所有的JavaEE规范，收费。</span><br><span class="line">	Tomcat：Apache基金组织，中小型的JavaEE服务器，支持少量的JavaEE规范servlet/jsp，开源，免费。</span><br></pre></td></tr></table></figure>

<h4 id="Tomcat介绍"><a href="#Tomcat介绍" class="headerlink" title="Tomcat介绍"></a>Tomcat介绍</h4><blockquote>
<p>启动：打开bin/startup.bat</p>
<p>关闭：打开bin/shutdown.bat或在命令行ctrl+c</p>
<p>部署项目的三种方式：</p>
<ol>
<li><p>将项目打包成war(zip)包，放到<code>webapps</code>目录下即可</p>
<p>war包会自动解压缩，若需部署多个项目，可以放到虚拟目录中区分不同的项目。</p>
</li>
<li><p>配置<code>conf/server.xm</code>l文件</p>
<ul>
<li>docBase:项目存放的路径  </li>
<li>path：虚拟目录</li>
</ul>
</li>
<li><p>在<code>conf\Catalina\localhost</code>创建xml文件</p>
<p>xml文件名为虚拟目录名</p>
<p>xml文件中编写<context docbase="D:\hello"></context></p>
</li>
</ol>
</blockquote>
<h3 id="5-Servlet接口"><a href="#5-Servlet接口" class="headerlink" title="5. Servlet接口"></a>5. Servlet接口</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Servlet就是一个接口，定义了Java类被浏览器访问到(tomcat识别)的规则。</span><br><span class="line">Java类只要实现了这个接口，那么这个类就可以被浏览器访问到（让该类代码执行）。</span><br></pre></td></tr></table></figure>

<h4 id="访问原理"><a href="#访问原理" class="headerlink" title="访问原理"></a>访问原理</h4><blockquote>
<pre><code>1. 当服务器接受到客户端浏览器的请求后，会解析请求URL路径，获取访问的Servlet的资源路径</code></pre><ol start="2">
<li>查找web.xml文件，是否有对应的<url-pattern>标签体内容。</url-pattern></li>
<li>如果有，则在找到对应的<servlet-class>全类名</servlet-class></li>
<li>tomcat会将字节码文件加载进内存，并且通过反射机制创建其对象</li>
<li>调用其方法</li>
</ol>
</blockquote>
<h4 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h4><blockquote>
<ol>
<li><p>创建JavaEE项目</p>
</li>
<li><p>定义一个类，实现Servlet接口<code>public class ServletDemo1 implements Servlet</code></p>
</li>
<li><p>实现接口中的抽象方法</p>
</li>
<li><p><strong>配置Servlet</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;    <span class="comment">//方法一： </span></span><br><span class="line">&gt;    在web.xml中配置：</span><br><span class="line">&gt;    	&lt;!--配置Servlet --&gt;</span><br><span class="line">&gt;    	&lt;servlet&gt;</span><br><span class="line">&gt;    	        &lt;servlet-name&gt;demo1&lt;/servlet-name&gt;</span><br><span class="line">&gt;    	        &lt;servlet-<span class="class"><span class="keyword">class</span>&gt;<span class="title">cn</span>.<span class="title">itcast</span>.<span class="title">web</span>.<span class="title">servlet</span>.<span class="title">ServletDemo1</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    	&lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    	</span></span><br><span class="line"><span class="class">&gt;    	&lt;<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    		&lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">demo1</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    		&lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/<span class="title">demo1</span>&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    	&lt;/<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    	/*在&lt;<span class="title">servlet</span>&gt;标签下配置 &lt;<span class="title">load</span>-<span class="title">on</span>-<span class="title">startup</span>&gt;，赋值：</span></span><br><span class="line"><span class="class">&gt;    		值为负数：第一次被访问时创建</span></span><br><span class="line"><span class="class">&gt;    	    值为非负数：在服务器启动时创建*/    </span></span><br><span class="line"><span class="class">&gt;    //方法二：</span></span><br><span class="line">&gt;    在类上使用@WebServlet("/资源路径")注解，进行配置 (Servlet3.0版本以上)</span><br><span class="line">&gt;    <span class="comment">//一个Servlet可以定义多个访问路径 ： @WebServlet(&#123;"/d4","/dd4","/ddd4"&#125;)</span></span><br><span class="line">&gt;    <span class="comment">//路径定义规则：</span></span><br><span class="line">&gt;       <span class="number">1</span>. /xxx/xxx:多层路径，目录结构</span><br><span class="line">&gt;       <span class="number">2</span>. *.<span class="keyword">do</span>：扩展名匹配(任何以.<span class="keyword">do</span>结尾都可以匹配到)                             </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<h4 id="内部方法"><a href="#内部方法" class="headerlink" title="内部方法"></a>内部方法</h4><blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">&gt; 	<span class="comment">//Servlet的init方法，只执行一次，说明一个Servlet在内存中只存在一个对象，Servlet是单例的</span></span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">&gt;     <span class="comment">//每次访问Servlet时，Service方法都会被调用一次。</span></span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt; 	<span class="comment">//destroy方法在Servlet服务器正常关闭之前才会执行，一般用于释放资源。</span></span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;   <span class="comment">//不常用</span></span><br><span class="line">&gt;     <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;   <span class="comment">//不常用</span></span><br><span class="line">&gt;     <span class="keyword">return</span> <span class="keyword">null</span>;  </span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">op1=&gt;operation: Servlet -- 接口</span><br><span class="line">op2=&gt;operation: GenericServlet -- 抽象类</span><br><span class="line">op3=&gt;operation: HttpServlet  -- 抽象类</span><br><span class="line">op1-&gt;op2-&gt;op3</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>GenericServlet：将Servlet接口中其他的方法做了默认空实现，只将service()方法作为抽象。继承后实现service()方法即可。</li>
<li>HttpServlet：对http协议的一种封装，简化操作。复写doGet/doPost方法。</li>
</ul>
</blockquote>
<h3 id="6-HTTP协议"><a href="#6-HTTP协议" class="headerlink" title="6. HTTP协议"></a>6. HTTP协议</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hyper Text Transfer Protocol 超文本传输协议：定义了客户端和服务器端通信时，发送数据的格式</span><br><span class="line">客户端和服务器必须同时遵守HTTP协议，才能通信</span><br></pre></td></tr></table></figure>

<blockquote>
<p>特点：</p>
<ol>
<li>基于TCP/IP的高级协议</li>
<li>默认端口号：80</li>
<li>基于请求/响应模型的：一次请求对应一次响应</li>
<li>无状态的：每次请求之间相互独立，不能交互数据</li>
</ol>
</blockquote>
<blockquote>
<p>版本：</p>
<ul>
<li>1.0：每一次请求响应都会建立新的连接Connection，较耗费资源</li>
<li>1.1：复用连接，Connection复用，省略了重复创建连接所耗费的资源</li>
<li>2.0：1.X版本都是使用文本传输数据，2.0开始使用字节传输，多路复用，速率提升</li>
</ul>
</blockquote>
<h3 id="7-请求消息数据格式"><a href="#7-请求消息数据格式" class="headerlink" title="7. 请求消息数据格式"></a>7. 请求消息数据格式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">POST /login.html	HTTP/1.1  <span class="comment">&lt;!--1.请求行：请求方式+请求url+请求协议/版本--&gt;</span></span><br><span class="line">Host: localhost     <span class="comment">&lt;!--2.请求头：IP地址+User-Agent浏览器信息+Referer来源+...--&gt;</span></span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:60.0) Gecko/20100101 Firefox/60.0</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,;q=0.8</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Referer: http://localhost/login.html<span class="comment">&lt;!--告诉服务器请求的来源--&gt;</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line">Upgrade-Insecure-Requests: 1	<span class="comment">&lt;!--2.请求头--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--3.请求空行：分割请求头和请求体--&gt;</span></span><br><span class="line">username=zhangsan	<span class="comment">&lt;!--4.请求体(正文)：封装POST请求消息的请求参数--&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>常见的请求头：</p>
<ol>
<li>User-Agent：浏览器告诉服务器，我访问你使用的浏览器版本信息。服务器端可以获取该信息，针对不同浏览器设置参数，解决浏览器的兼容性问题。</li>
<li>Referer：<a href="http://localhost/login.html：告诉服务器当前请求的来源。作用：防盗链，统计工作。" target="_blank" rel="noopener">http://localhost/login.html：告诉服务器当前请求的来源。作用：防盗链，统计工作。</a></li>
</ol>
</blockquote>
<h3 id="8-Request对象"><a href="#8-Request对象" class="headerlink" title="8. Request对象"></a>8. Request对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request对象用来获取请求消息，response对象用来设置响应消息，request和response对象都是由服务器创建的。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>request对象继承体系结构：</strong></p>
<p>​                        ServletRequest 接口<br>​                                     |    继承<br>​                 HttpServletRequest 接口<br>​                                     |    实现<br>org.apache.catalina.connector.RequestFacade 类(tomcat)<br>在用户发出请求的时候 会自动的创建RequestFacade对象</p>
</blockquote>
<h4 id="获取请求消息数据的方法"><a href="#获取请求消息数据的方法" class="headerlink" title="获取请求消息数据的方法"></a>获取请求消息数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取请求方式 </span></span><br><span class="line">String method = request.getMethod();	<span class="comment">// GET</span></span><br><span class="line"><span class="comment">//获取虚拟目录 </span></span><br><span class="line">String contextPath = request.getContextPath();	<span class="comment">// day03</span></span><br><span class="line"><span class="comment">//获取Servlet路径 </span></span><br><span class="line">String servletPath = request.getServletPath();	<span class="comment">// /Demo01Servlet</span></span><br><span class="line"><span class="comment">//获取get方式请求参数 </span></span><br><span class="line">String queryString = request.getQueryString();	<span class="comment">// username=zhangsan</span></span><br><span class="line"><span class="comment">//获取请求URI、URL</span></span><br><span class="line">String requestURI = request.getRequestURI();	<span class="comment">// /day03/Demo01Servlet</span></span><br><span class="line">StringBuffer requestURL = request.getRequestURL();</span><br><span class="line"><span class="comment">//http://localhost:8080/day03/Demo01Servlet</span></span><br><span class="line"><span class="comment">//获取协议及版本 </span></span><br><span class="line">String protocol = request.getProtocol();	<span class="comment">// HTTP/1.1</span></span><br><span class="line"><span class="comment">//获取客户机的IP地址 </span></span><br><span class="line">String remoteAddr = request.getRemoteAddr();	<span class="comment">// 0:0:0:0:0:0:0:1</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>URL：统一资源定位符：<a href="http://localhost/day14/demo1" target="_blank" rel="noopener">http://localhost/day14/demo1</a>    （中华人民共和国）</li>
<li>URI：统一资源标识符：/day14/demo1        （共和国）</li>
</ul>
</blockquote>
<h4 id="获取请求头数据的方法"><a href="#获取请求头数据的方法" class="headerlink" title="获取请求头数据的方法"></a>获取请求头数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getHeader</span><span class="params">(String name)</span>:通过请求头的名称获取请求头的值</span></span><br><span class="line"><span class="function">Enumeration&lt;String&gt; <span class="title">getHeaderNames</span><span class="params">()</span>:获取所有的请求头名称，封装为键值对</span></span><br><span class="line"><span class="function">    <span class="comment">//使用示范：</span></span></span><br><span class="line"><span class="function">    Enumeration&lt;String&gt; headerNames </span>= request.getHeaderNames();</span><br><span class="line">        <span class="keyword">while</span> (headerNames.hasMoreElements()) &#123;</span><br><span class="line">            String name = headerNames.nextElement();</span><br><span class="line">            String value = request.getHeader(name);</span><br><span class="line">            System.out.println(name + <span class="string">"------"</span> + value);&#125;</span><br><span class="line">    <span class="comment">/*输出结果：</span></span><br><span class="line"><span class="comment">    host------localhost:8080</span></span><br><span class="line"><span class="comment">    connection------keep-alive</span></span><br><span class="line"><span class="comment">    cache-control------max-age=0</span></span><br><span class="line"><span class="comment">    upgrade-insecure-requests------1</span></span><br><span class="line"><span class="comment">    user-agent------Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,     like Gecko) Chrome/74.0.3729.108 Safari/537.36</span></span><br><span class="line"><span class="comment">    accept-----text/html,application/xhtml+xml,application/xml;</span></span><br><span class="line"><span class="comment">    accept-encoding------gzip, deflate, br</span></span><br><span class="line"><span class="comment">    accept-language------zh-CN,zh;q=0.9</span></span><br><span class="line"><span class="comment">    cookie------_xsrf=2|50c9000a|7b65bf12b3842e1198f0522667c61f08|1554439214; */</span></span><br></pre></td></tr></table></figure>

<h4 id="获取请求体数据的方法"><a href="#获取请求体数据的方法" class="headerlink" title="获取请求体数据的方法"></a>获取请求体数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请求体：只有POST请求方式，才有请求体，在请求体中封装了POST请求的请求参数</span></span><br><span class="line"><span class="comment">//步骤：1. 获取流对象</span></span><br><span class="line">	<span class="function">BufferedReader <span class="title">getReader</span><span class="params">()</span>：获取字符输入流，只能操作字符数据</span></span><br><span class="line"><span class="function">	ServletInputStream <span class="title">getInputStream</span><span class="params">()</span>：获取字节输入流，可以操作所有类型数据</span></span><br><span class="line"><span class="function">	<span class="comment">//2. 再从流对象中拿数据</span></span></span><br></pre></td></tr></table></figure>

<h4 id="获取请求参数通用方式"><a href="#获取请求参数通用方式" class="headerlink" title="获取请求参数通用方式"></a>获取请求参数通用方式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. <span class="function">String <span class="title">getParameter</span><span class="params">(String name)</span>:根据参数名称获取参数值 </span></span><br><span class="line"><span class="function">2. String[] <span class="title">getParameterValues</span><span class="params">(String name)</span>:根据参数名称获取参数值的数组  </span></span><br><span class="line"><span class="function">3. Enumeration&lt;String&gt; <span class="title">getParameterNames</span><span class="params">()</span>:获取所有请求的参数名称</span></span><br><span class="line"><span class="function">4. Map&lt;String,String[]&gt; <span class="title">getParameterMap</span><span class="params">()</span>:获取所有参数的map集合</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>中文乱码问题：post方式会乱码，我们在获取前端传递的参数之前，都进行设置编码</p>
<p><code>request.setCharacterEncoding(&quot;utf-8&quot;);</code></p>
</blockquote>
<h4 id="请求转发的方法"><a href="#请求转发的方法" class="headerlink" title="请求转发的方法"></a>请求转发的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getRequestDispatcher(<span class="string">"String path"</span>).forward(request,response);</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>浏览器地址栏路径不发生变化</li>
<li>只能转发到当前服务器内部资源中</li>
<li>转发是一次请求，多个资源用的是同一个请求</li>
</ol>
</blockquote>
<h4 id="共享数据的方法"><a href="#共享数据的方法" class="headerlink" title="共享数据的方法"></a>共享数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. <span class="function"><span class="keyword">void</span> <span class="title">setAttribute</span><span class="params">(String name,Object obj)</span>:存储数据</span></span><br><span class="line"><span class="function">2. Object <span class="title">getAttitude</span><span class="params">(String name)</span>:通过键获取值</span></span><br><span class="line"><span class="function">3. <span class="keyword">void</span> <span class="title">removeAttribute</span><span class="params">(String name)</span>:通过键移除键值对</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>域对象：一个有作用范围的对象，可以在范围内共享数据</li>
<li>request域：代表一次请求的范围，一般用于请求转发的多个资源中共享数据</li>
</ul>
</blockquote>
<h3 id="9-BeanUtils工具类"><a href="#9-BeanUtils工具类" class="headerlink" title="9. BeanUtils工具类"></a>9. BeanUtils工具类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用于封装标准JavaBean的工具类，按照属性进行映射。</span><br><span class="line">属性：setter和getter方法截取后的产物，例如：getUsername() --&gt; Username--&gt; username</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方法：</p>
<ol>
<li>setProperty()</li>
<li>getProperty()</li>
<li>populate(Object obj , Map map)：将map集合的键值对信息，封装到对应的JavaBean对象中</li>
</ol>
</blockquote>
<h3 id="10-响应消息数据格式"><a href="#10-响应消息数据格式" class="headerlink" title="10. 响应消息数据格式"></a>10. 响应消息数据格式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK  	<span class="comment">&lt;!--1.响应行：协议/版本+响应状态码+状态码描述--&gt;</span></span><br><span class="line">Content-Type: text/html;charset=UTF-8<span class="comment">&lt;!--2.响应头--&gt;</span></span><br><span class="line">Content-Length: 101</span><br><span class="line">Date: Wed, 06 Jun 2018 07:08:42 GMT</span><br><span class="line">	<span class="comment">&lt;!--3.响应空行--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span>			<span class="comment">&lt;!--4.响应体:传输的数据--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>$Title$<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		hello , response</span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span>			<span class="comment">&lt;!--4.响应体:传输的数据--&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>响应状态码：服务器告诉客户端浏览器本次请求和响应的一个状态，状态码都是3位数字。<ul>
<li>1xx：服务器接收客户端消息，但没有接受完成，等待一段时间后，发送1xx多状态码</li>
<li>2xx：成功。代表：200</li>
<li>3xx：重定向。代表：302(重定向)，304(访问缓存)</li>
<li>4xx：客户端错误。代表：404(请求路径没有对应的资源)，405：(请求方式没有对应的doXxx方法)</li>
<li>5xx：服务器端错误。代表：500(服务器内部出现异常，写的代码有bug)</li>
</ul>
</li>
<li>常见的响应头：<ul>
<li>Content-Type：服务器告诉客户端本次响应体数据格式以及编码格式</li>
<li>Content-disposition：服务器告诉客户端以什么格式打开响应体数据<ul>
<li>in-line：默认值，在当前页面内打开</li>
<li>attachment；filename=xxx：以附件形式打开响应体：文件下载</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="11-Response对象"><a href="#11-Response对象" class="headerlink" title="11. Response对象"></a>11. Response对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request对象和response对象由tomcat创建，每次请求相互独立</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Response方法</strong>：</p>
<ul>
<li><p>设置状态码：<code>setStatus(int sc)</code></p>
</li>
<li><p>设置响应头：<code>setHeader(String name, String value)</code></p>
</li>
<li><p>设置响应体：</p>
<ul>
<li>字符输出流：<code>PrintWriter getWriter()</code></li>
<li>字节输出流：<code>ServletOutputStream getOutputStream()</code></li>
</ul>
</li>
<li><p>设置输出流的编码：<code>response.setContentType(&quot;text/html;charset=utf-8&quot;);</code></p>
<p>setContentType方法同时起到两个作用：1. 设置该流的默认编码    2. 告诉浏览器响应体使用的编码</p>
</li>
</ul>
</blockquote>
<h3 id="12-重定向"><a href="#12-重定向" class="headerlink" title="12. 重定向"></a>12. 重定向</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">重定向：资源跳转的方式</span><br><span class="line"><span class="comment">//基本的重定向方法：1. 设置状态码为302；2.设置响应头location</span></span><br><span class="line">response.setStatus(<span class="number">302</span>);</span><br><span class="line">response.setHeader(<span class="string">"location"</span>,<span class="string">"/responseDemo2"</span>);</span><br><span class="line"><span class="comment">//简化的重定向方法：</span></span><br><span class="line">response.sendRedirect(<span class="string">"/responseDemo2"</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>转发(forward)和重定向(redirect)的特点：</strong> </p>
<ul>
<li><p>转发的特点：</p>
<ol>
<li>转发地址栏路径不变</li>
<li>转发只能访问当前服务器下的资源</li>
<li>转发是一次请求，可以使用request对象来共享数据</li>
<li>跳转路径<strong>不需要加虚拟目录</strong></li>
</ol>
</li>
<li><p>重定向的特点</p>
<ol>
<li>重定向地址栏路径变化</li>
<li>重定向可以访问其他站点(服务器)的资源</li>
<li>重定向是两次独立的请求，不能使用request对象来共享数据</li>
<li>跳转路径<strong>需要加虚拟目录</strong></li>
</ol>
</li>
</ul>
</blockquote>
<h3 id="13-ServletContext对象"><a href="#13-ServletContext对象" class="headerlink" title="13. ServletContext对象"></a>13. ServletContext对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">代表整个web应用，可以和程序的容器(服务器)来通信</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>ServletContext方法</strong>：</p>
<ul>
<li><p>获取ServletContext：</p>
<ol>
<li>通过request对象获取：<code>equest.getServletContext();</code></li>
<li>通过HttpServlet获取：<code>this.getServletContext();</code></li>
</ol>
</li>
<li><p>获取MIME类型：</p>
<ol>
<li>MIME类型:在互联网通信过程中定义的一种文件数据类型（大类型/小类型：image/jpeg）</li>
<li><code>String getMimeType(String file)</code></li>
</ol>
</li>
<li><p>域对象：共享数据（对象范围：所有用户所有请求的数据）</p>
<ol>
<li><p><code>setAttribute(String name,Object value)</code></p>
</li>
<li><p><code>getAttribute(String name)</code></p>
</li>
<li><p><code>removeAttribute(String name)</code></p>
</li>
</ol>
<p>（由于ServletContext域对象范围太大，一般不用）</p>
</li>
<li><p>获取文件的真实(<strong>服务器</strong>)路径：<code>String getRealPath(String path)</code></p>
<ol>
<li>获取web目录下资源：<code>getRealPath(&quot;/a.txt&quot;);</code></li>
<li>获取WEB-INF目录下资源：<code>getRealPath(&quot;/WEB-INF/a.txt&quot;);</code></li>
<li>获取src目录下资源：<code>getRealPath(&quot;/WEB-INF/classes/a.txt&quot;);</code></li>
</ol>
</li>
</ul>
</blockquote>
<h3 id="14-案例：文件下载"><a href="#14-案例：文件下载" class="headerlink" title="14. 案例：文件下载"></a>14. 案例：文件下载</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取请求参数中的文件名称，找到该文件的真实路径，关联给字节输入流</span></span><br><span class="line">String filename = request.getParameter(<span class="string">"filename"</span>);	</span><br><span class="line">   ServletContext servletContext = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">   String realPath = servletContext.getRealPath(<span class="string">"/img/"</span> + filename);</span><br><span class="line">   FileInputStream fis = <span class="keyword">new</span> FileInputStream(realPath);	</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置response响应头的"content-type"参数为图片的Mime格式</span></span><br><span class="line">   String mimeType = servletContext.getMimeType(filename);	</span><br><span class="line">   response.setHeader(<span class="string">"content-type"</span>, mimeType);</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过工具将filename改造成对应浏览器能够解读的格式</span></span><br><span class="line">   String userAgent = request.getHeader(<span class="string">"user-agent"</span>);	</span><br><span class="line">   filename = DownLoadUtils.getFileName(userAgent, filename);</span><br><span class="line"><span class="comment">//设置response响应头的"content-disposition"参数为附件形式</span></span><br><span class="line">   response.setHeader(<span class="string">"content-disposition"</span>,<span class="string">"attachment;filename="</span> + filename);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//将输入流的数据写出到输出流中</span></span><br><span class="line">   ServletOutputStream sos = response.getOutputStream();</span><br><span class="line">   <span class="keyword">byte</span>[] buff = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span> * <span class="number">8</span>];</span><br><span class="line">   <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">while</span> ((len = fis.read(buff)) != -<span class="number">1</span>) &#123;</span><br><span class="line">       sos.write(buff, <span class="number">0</span>, len);</span><br><span class="line">   &#125;</span><br><span class="line">   fis.close();</span><br></pre></td></tr></table></figure>

<h3 id="15-Cookie"><a href="#15-Cookie" class="headerlink" title="15. Cookie"></a>15. Cookie</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">概念：客户端会话技术，将数据保存到客户端。基于响应头set-cookie和请求头cookie实现</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>方法：</strong></p>
<ol>
<li>创建Cookie对象，绑定数据：<code>new Cookie(String name, String value)</code></li>
<li>发送Cookie对象：<code>response.addCookie(Cookie cookie)</code></li>
<li>获取Cookie对象，拿到数据：<code>request.getCookies()</code>，返回Cookie[] 数组</li>
<li>持久化存储Cookie对象：<code>setMaxAge(int seconds)</code>(Cookie数据默认在览器关闭后被销毁)<ul>
<li>正数：将Cookie数据写到硬盘的文件中，持久化存储，并指定cookie存活时间。</li>
<li>负数：默认值</li>
<li>零：删除cookie信息</li>
</ul>
</li>
</ol>
<p><strong>共享：</strong></p>
<ol>
<li>同一服务器的Cookie共享：一个服务器中多个web项目默认无法共享Cookie对象，可以设置Cookie的获取范围：<code>setPath(String path)</code>。方法默认为当前虚拟目录，设置为”/“让一个服务器下所有项目共享</li>
<li>不同服务器的Cookie共享：<code>setDomain(String path)</code>:如果设置一级域名相同，那么多个服务器之间cookie可以共享。(如setDomain(“.baidu.com”),那么tieba.baidu和news.baidu中cookie可以共享)</li>
</ol>
<p><strong>特点：</strong></p>
<ol>
<li>在tomcat 8 之前，cookie中不能直接存储中文数据。在tomcat 8 之后，cookie支持中文数据。特殊字符还是不支持，建议使用URL编码存储，URL解码解析。<ul>
<li>URL编码：<code>URLEncoder.encode(string, &quot;utf-8&quot;);</code> </li>
<li>URL解码：<code>URLDecoder.decode(string, &quot;utf-8&quot;);</code></li>
</ul>
</li>
<li>cookie数据存储在客户端浏览器，一般情况下浏览器对单个cookie 的大小限制4kb，对同一个域名下的总cookie数量限制20个。</li>
<li>cookie一般用于存储少量的不太敏感的数据，用于不登录的情况下，完成服务器对客户端的身份识别。</li>
</ol>
</blockquote>
<h3 id="16-Session"><a href="#16-Session" class="headerlink" title="16. Session"></a>16. Session</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务器端会话技术，在一次会话的多次请求间共享数据，将数据保存在服务器端的对象中,依赖于Cookie实现。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>方法：</strong></p>
<ol>
<li>获取HttpSession对象：<code>request.getSession();</code></li>
<li>使用HttpSession对象：<ul>
<li><code>Object getAttribute(String name)</code></li>
<li><code>void setAttribute(String name, Object value)</code></li>
<li><code>void removeAttribute(String name)</code></li>
</ul>
</li>
</ol>
<p><strong>存活</strong>：</p>
<ol>
<li><p>客户端关闭后，服务器不关闭：</p>
<p>默认情况下两次获取session不是同一个。如果需要相同，则可以创建Cookie，键的名称一定为JSESSIONID，设置最大存活时间，让cookie持久化保存。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;    Cookie c = <span class="keyword">new</span> Cookie(<span class="string">"JSESSIONID"</span>,session.getId());</span><br><span class="line">&gt;    c.setMaxAge(<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line">&gt;    response.addCookie(c);</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><p>客户端不关闭，服务器关闭后：</p>
<p>两次获取的session不是同一个，但是要确保数据不丢失，tomcat自动完成以下工作：</p>
<ul>
<li>session的钝化：关闭服务器的时候，生成保存sessuib数据的文件.ser</li>
<li>session的活化：再度开启服务器的时候，读取保存的.ser文件，并销毁文件</li>
</ul>
</li>
</ol>
<p><strong>销毁：</strong></p>
<ol>
<li>服务器关闭时销毁</li>
<li>session对象调用invalidate() 方法时销毁</li>
<li>session默认失效时间 30分钟</li>
</ol>
</blockquote>
<blockquote>
<p><strong>session与Cookie的区别：</strong><br>             1. session存储数据在服务器端，Cookie在客户端<br>             2. session没有数据大小限制，Cookie有<br>             3. session数据安全，Cookie相对于不安全</p>
</blockquote>
<h3 id="17-JSP"><a href="#17-JSP" class="headerlink" title="17. JSP"></a>17. JSP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Java Server Pages：java服务器端页面，既可以定义html标签，又可以使用java代码。</span><br><span class="line">JSP本质上是一个Servlet，IDEA编译：jsp页面-&gt;Servlet.java文件-&gt;.class文件</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>脚本</strong>：</p>
<ul>
<li><strong>&lt;%  代码 %&gt;</strong>：定义的java代码，在service方法中。每一次访问该jsp都会执行此脚本中的代码</li>
<li><strong>&lt;%! 代码 %&gt;</strong>：定义的java代码，在jsp转换后的java类的成员变量位置。</li>
<li><strong>&lt;%= 代码 %&gt;</strong>：定义的java代码，会输出到页面上。（out.print方法的简写）</li>
</ul>
<p><strong>指令</strong>：用于配置JSP页面，导入资源文件，格式：<code>&lt;%@ 指令名称 属性名1=属性值1 属性名2=属性值2 ... %&gt;</code></p>
<ul>
<li><p>page：</p>
<ul>
<li><p>contentType：设置响应体的mime类型以及字符集，在高级IDE中可设置当前jsp页面的编码</p>
</li>
<li><p>import：导包</p>
</li>
<li><p>errorPage：当前页面发生异常后，会自动跳转到指定的错误页面</p>
</li>
<li><p>isErrorPage：标识当前页面是否是错误页面。(值为true，页面可使用内置对象exception)</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;     &lt;%--代码演示--%&gt; </span><br><span class="line">&gt;     &lt;%@ page contentType=<span class="string">"text/html;charset=gbk"</span> errorPage=<span class="string">"500.jsp"</span>   pageEncoding=<span class="string">"GBK"</span> language=<span class="string">"java"</span> buffer=<span class="string">"16kb"</span> %&gt;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     &lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> isErrorPage=<span class="string">"true"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     &lt;%@ page <span class="keyword">import</span>=<span class="string">"java.util.ArrayList"</span> %&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>include：导入其他页面的资源文件  <code>&lt;%@include file=&quot;top.jsp&quot;%&gt;</code></p>
</li>
<li><p>taglib：导入资源  <code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</code></p>
</li>
</ul>
<p><strong>注释</strong>：</p>
<ul>
<li><!-- -->  html注释：会显示到网页源码中，只能注释html代码片段</li>
<li>&lt;%–   –%&gt;  jsp注释：不会显示到网页源码中，可以注释所有代码，推荐使用</li>
</ul>
<p><strong>内置对象</strong>：</p>
<table>
<thead>
<tr>
<th align="left">变量名</th>
<th>真实类型</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pageContext</td>
<td>PageContext</td>
<td align="left">共享<strong>当前页面</strong>数据，还可以获取其他八个内置对象</td>
</tr>
<tr>
<td align="left">request</td>
<td>HttpServletRequest</td>
<td align="left">共享<strong>一次请求</strong>访问的多个资源数据(转发)</td>
</tr>
<tr>
<td align="left">session</td>
<td>HttpSession</td>
<td align="left">共享<strong>一次会话</strong>的多个请求间数据</td>
</tr>
<tr>
<td align="left">application</td>
<td>ServletContext</td>
<td align="left"><strong>整个web项目</strong>，所有用户间共享数据</td>
</tr>
<tr>
<td align="left">response</td>
<td>HttpServletResponse</td>
<td align="left">响应对象</td>
</tr>
<tr>
<td align="left">page</td>
<td>Object</td>
<td align="left">当前页面(Servlet)的对象  this</td>
</tr>
<tr>
<td align="left">out</td>
<td>JspWriter</td>
<td align="left">输出对象，数据输出到页面上</td>
</tr>
<tr>
<td align="left">config</td>
<td>ServletConfig</td>
<td align="left">Servlet的配置对象</td>
</tr>
<tr>
<td align="left">exception</td>
<td>Throwable</td>
<td align="left">异常对象</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; tomcat服务器，会先找response缓冲区数据，再找out缓冲区数据,所以response.getWriter()数据输出永远在out.write()之前，推荐使用：out.write()。</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="18-MVC开发模式"><a href="#18-MVC开发模式" class="headerlink" title="18. MVC开发模式"></a>18. MVC开发模式</h3><blockquote>
<ul>
<li>M：Model，模型。JavaBean 定义的标准的java描述类，用于完成具体的业务操作。</li>
<li>V：View，视图。JSP页面，用于展示数据。</li>
<li>C：Controller，控制器。Servlet：获取用户输入的数据；调用模型处理数据；将数据交给视图展示</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>优点：耦合性低，方便维护，可以利于分工协作，重用性高</p>
</li>
<li><p>缺点：使得项目架构变得复杂，对开发人员要求高</p>
</li>
</ul>
</blockquote>
<h3 id="19-EL表达式"><a href="#19-EL表达式" class="headerlink" title="19. EL表达式"></a>19. EL表达式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Expression Language 表达式语言，用于替换和简化jsp页面中java代码的编写</span><br><span class="line">jsp默认支持EL表达式的，语法：$&#123;表达式&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方法：</p>
<ul>
<li><code>${empty list}</code>：判断字符串、集合、数组对象是否为null或者长度为0</li>
<li><code>${not empty str}</code>：表示判断字符串、集合、数组对象是否不为null，并且长度&gt;0</li>
<li><code>${域名称.键名}</code>：从指定域中获取指定键的值，域名称有：<ol>
<li>pageScope        –&gt; pageContext    //当前页面</li>
<li>requestScope     –&gt; request         //当前次请求</li>
<li>sessionScope     –&gt; session        //当前次会话</li>
<li>applicationScope –&gt; application（ServletContext）     //整个web项目</li>
</ol>
</li>
<li><code>${域名称.键名.属性名}</code>：获取对象的属性值，不等于成员变量，本质上是调用对象的getter方法</li>
<li><code>${域名称.键名[索引]}</code>：获取List集合的元素</li>
<li><code>${域名称.键名.key名称}</code> <code>${域名称.键名[&quot;key名称&quot;]}</code>：获取Map集合的值</li>
<li><code>\${表达式}</code>或设置JSP的page指令中<code>isELIgnored=&quot;true&quot;</code>：忽略当前JSP页面中所有的EL表达式</li>
</ul>
<p>隐式对象：</p>
<p>​    EL表达式中有11个隐式对象，我们需要使用pageContext获取其他对象</p>
<ul>
<li>动态获取虚拟目录：<code>${pageContext.request.contextPath}</code></li>
</ul>
</blockquote>
<h3 id="20-JSTL"><a href="#20-JSTL" class="headerlink" title="20. JSTL"></a>20. JSTL</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JavaServer Pages Tag Library：JSP标准标签库，由Apache组织提供的开源的免费的jsp标签</span><br><span class="line">用于简化和替换jsp页面上的java代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用步骤：</p>
<ol>
<li>导入jstl相关jar包</li>
<li>引入标签库taglib指令：<code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</code></li>
<li>使用标签</li>
</ol>
<p>常用标签：</p>
<ul>
<li><p>if：test为必须属性，接受boolean表达式，表达式为true时展示标签内容，false则不展示</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;c:<span class="keyword">if</span> test=<span class="string">"true"</span>&gt;</span><br><span class="line">&gt;       &lt;h2&gt;I am true!&lt;/h2&gt;</span><br><span class="line">&gt;   &lt;/c:if&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>choose：相当于java代码的switch语句</p>
</li>
<li><p>foreach：相当于java代码的for语句</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;c:forEach items=<span class="string">"$&#123;list&#125;"</span> <span class="keyword">var</span>=<span class="string">"str"</span> varStatus=<span class="string">"s"</span>&gt;</span><br><span class="line">&gt;       $&#123;s.index&#125;	&lt;%--索引--%&gt;</span><br><span class="line">&gt;       $&#123;s.count&#125;	&lt;%--循环次数--%&gt;</span><br><span class="line">&gt;       $&#123;str&#125;  	&lt;%--元素--%&gt;</span><br><span class="line">&gt;   &lt;/c:forEach&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h3 id="21-三层架构"><a href="#21-三层架构" class="headerlink" title="21. 三层架构"></a>21. 三层架构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 界面层(web层)：用户看的得界面，用户可以通过界面上的组件和服务器进行交互。</span><br><span class="line">2. 业务逻辑层（service层）：处理业务逻辑的。</span><br><span class="line">3. 数据访问层(dao层)：操作数据存储文件。</span><br></pre></td></tr></table></figure>

<h3 id="22-Filter-过滤器"><a href="#22-Filter-过滤器" class="headerlink" title="22. Filter 过滤器"></a>22. Filter 过滤器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当客户端访问服务器的资源时，过滤器可以将请求拦截下来，完成一些特殊的功能</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>实现步骤：</strong></p>
<ol>
<li><p>定义一个类，实现接口Filter（<code>import javax.servlet.annotation.WebFilter;</code>）</p>
</li>
<li><p>复写方法</p>
<ol start="3">
<li>配置拦截路径</li>
</ol>
</li>
</ol>
<p><strong>配置拦截路径：</strong></p>
<ul>
<li><p>方式一：web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;      <span class="comment">&lt;!-- &lt;filter&gt;</span></span><br><span class="line"><span class="comment">&gt;           &lt;filter-name&gt;demo1&lt;/filter-name&gt;</span></span><br><span class="line"><span class="comment">&gt;           &lt;filter-class&gt;cn.itcast.web.filter.FilterDemo1&lt;/filter-class&gt;</span></span><br><span class="line"><span class="comment">&gt;       &lt;/filter&gt;</span></span><br><span class="line"><span class="comment">&gt;       &lt;filter-mapping&gt;</span></span><br><span class="line"><span class="comment">&gt;           &lt;filter-name&gt;demo1&lt;/filter-name&gt;</span></span><br><span class="line"><span class="comment">&gt;           &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment">&gt;       &lt;/filter-mapping&gt;--&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>方式二：注解：<code>@WebFilter(&quot;/*&quot;)</code></p>
</li>
<li><p>路径详解：</p>
<ol>
<li>拦截具体文件：<code>/index.jsp</code></li>
<li>拦截目录：<code>/user/*</code></li>
<li>拦截后缀名：<code>*.jsp</code></li>
<li>拦截所有资源：<code>/*</code></li>
</ol>
</li>
</ul>
<p><strong>配置拦截方法：</strong></p>
<ul>
<li>注解配置：设置dispatcherTypes属性<ol>
<li>REQUEST：默认值。浏览器直接请求资源</li>
<li>FORWARD：转发访问资源</li>
<li>INCLUDE：包含访问资源</li>
<li>ERROR：错误跳转资源</li>
<li>ASYNC：异步访问资源</li>
</ol>
</li>
<li>web.xml配置：设置<code>&lt;dispatcher&gt; &lt;/dispatcher&gt;</code>标签即可</li>
<li>只有同时满足拦截路径&amp;拦截方式的资源，才会被过滤器拦截</li>
</ul>
<p><strong>方法：</strong></p>
<ul>
<li><code>init()</code>：在服务器启动后，会创建Filter对象，然后调用init方法，只执行一次，用于加载资源。</li>
<li><code>doFilter()</code>：每一次请求被拦截资源时会执行，执行多次。</li>
<li><code>destroy()</code>：服务器正常关闭后，Filter对象被销毁，执行destroy方法，只执行一次，用于释放资源。</li>
<li><code>filterChain.doFilter(servletRequest,servletResponse)</code>：过滤放行</li>
</ul>
<p><strong>执行顺序：</strong></p>
<ul>
<li><p>注解配置执行顺序：过滤器1–&gt;过滤器2–&gt;资源执行–&gt;过滤器2–&gt; 过滤器1 </p>
<p>按照类名的字符串比较规则比较，值小的先执行</p>
</li>
<li><p>web.xml配置执行顺序：<code>&lt;filter-mapping&gt;</code>谁定义在上边，谁先执行</p>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//过滤未登录用户代码展示</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//0.强制转换</span></span><br><span class="line">    HttpServletRequest request = (HttpServletRequest) req;</span><br><span class="line">    <span class="comment">//1.获取资源请求路径</span></span><br><span class="line">    String uri = request.getRequestURI();</span><br><span class="line">    <span class="comment">//2.排除和登录以及页面布局式样相关的路径</span></span><br><span class="line">    <span class="keyword">if</span> (uri.contains(<span class="string">"/loginServlet"</span>) || uri.contains(<span class="string">"/login.jsp"</span>) || 		</span><br><span class="line">        uri.contains(<span class="string">"/checkCodeServlet"</span>) ||uri.contains(<span class="string">"/css/"</span>) || </span><br><span class="line">        uri.contains(<span class="string">"/fonts/"</span>) || uri.contains(<span class="string">"/js/"</span>)) &#123;</span><br><span class="line">        chain.doFilter(req, resp);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//3.从request中获取用户登录后封装的user对象</span></span><br><span class="line">        Object user = request.getSession().getAttribute(<span class="string">"user"</span>);</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            chain.doFilter(req, resp);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            request.setAttribute(<span class="string">"login_msg"</span>,<span class="string">"您尚未登录，请您先登录"</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">"/login.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="23-代理模式"><a href="#23-代理模式" class="headerlink" title="23. 代理模式"></a>23. 代理模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">代理对象通过代理真实对象，达到增强真实对象功能的目的，代理对象有两种实现方式：</span><br><span class="line">1. 静态代理：有一个类文件描述代理模式</span><br><span class="line">2. 动态代理：在内存中形成代理类，通过Proxy.newProxyInstance()方法生成代理对象</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过代理模式实现敏感词过滤代码展示</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建代理对象，三个参数：1.真实对象的类加载器；2.真实对象实现的接口； 3.实现动态代理的接口</span></span><br><span class="line">HttpServletRequest request = (HttpServletRequest) Proxy.newProxyInstance</span><br><span class="line">(req.getClass().getClassLoader(),req.getClass().getInterfaces(),<span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">	<span class="comment">/*invoke方法的三个参数：</span></span><br><span class="line"><span class="comment">		* 1. proxy：真实的代理对象</span></span><br><span class="line"><span class="comment">		* 2. method：代理对象调用的方法，被封装为的对象</span></span><br><span class="line"><span class="comment">		* 3. args:代理对象调用的方法时，传递的实际参数</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//获取方法的名称</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="string">"getParameter"</span>.equals(method.getName())) &#123;</span><br><span class="line">			String value = (String) method.invoke(req,args);</span><br><span class="line">			<span class="comment">//检测是否含敏感词</span></span><br><span class="line">			<span class="keyword">if</span>(value.contains(<span class="string">"CNM"</span>))&#123;</span><br><span class="line">				value = value.replaceAll(<span class="string">"CNM"</span>,<span class="string">"***"</span>);</span><br><span class="line">			&#125;			</span><br><span class="line">		<span class="comment">//返回代理修改后的value</span></span><br><span class="line">		<span class="keyword">return</span> value;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="comment">//若不是"getParameter"方法，则直接返回，不修改</span></span><br><span class="line">	<span class="keyword">return</span> method.invoke(req,args);</span><br><span class="line">&#125;&#125;);</span><br><span class="line">chain.doFilter(request, resp);&#125;	<span class="comment">//放行时参数要用代理对象的request，来替换原req</span></span><br></pre></td></tr></table></figure>

<h3 id="24-Listener-监听器"><a href="#24-Listener-监听器" class="headerlink" title="24. Listener 监听器"></a>24. Listener 监听器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web三大组件之一，当事件源上发生某个事件后，执行监听器代码。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ServletContextListener：监听ServletContext对象的创建和销毁</span><br><span class="line"><span class="meta">@WebListener</span> <span class="comment">//注解</span></span><br><span class="line"><span class="comment">//1. 定义一个类，实现ServletContextListener接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextLoaderListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line">	<span class="comment">//2. 对象创建后会调用该方法</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent sce)</span>：ServletContext</span></span><br><span class="line"><span class="function">	<span class="comment">//3. 对象被销毁之前会调用该方法</span></span></span><br><span class="line"><span class="function">	<span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span>：ServletContext</span></span><br></pre></td></tr></table></figure>

<h3 id="25-Maven"><a href="#25-Maven" class="headerlink" title="25. Maven"></a>25. Maven</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Maven是一个项目管理工具，它包含了：一个项目对象模型 (POM：Project Object Model)，一组标准集合，一个项目生命周期(Project Lifecycle)，一个依赖管理系统(Dependency Management System)，和用来运行定义在生命周期阶段(phase)中插件(plugin)目标(goal)的逻辑。</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><p>环境变量及相关配置</p>
<ul>
<li>M2_HOME：C:\Java\maven\apache-maven-3.5.2</li>
<li>MAVEN_HOME：C:\Java\maven\apache-maven-3.5.2</li>
<li>/conf/settings.xml文件中<code>&lt;localRepository&gt;</code>标签中配置本地仓库位置</li>
<li>idea的maven配置：<ul>
<li>Maven home directory：指定本地maven安装目录</li>
<li>User settings file：指定setting配置文件路径</li>
<li>Local respository：本地仓库的位置</li>
<li>创建maven的web工程时，选用archetype：<code>maven-archetype-webapp</code></li>
</ul>
</li>
</ul>
</li>
<li><p>仓库的分类</p>
<ul>
<li>本地仓库：通过maven下载的jar包会储存在本地仓库，项目会优先从本地仓库查找jar包</li>
<li>远程仓库：远程仓库可以在互联网内也可以在局域网内</li>
<li>中央仓库：maven中内置一个远程仓库：<a href="http://repo1.maven.org/maven2，服务于整个互联网，由Maven团队自己维护，里面存储了非常全的jar包，包含了世界上大部分的流行开源项目的构件。" target="_blank" rel="noopener">http://repo1.maven.org/maven2，服务于整个互联网，由Maven团队自己维护，里面存储了非常全的jar包，包含了世界上大部分的流行开源项目的构件。</a></li>
</ul>
</li>
<li><p>maven插件</p>
<ul>
<li>compile：maven工程的编译命令，将src/main/java的文件编译为class文件输出到target目录下。</li>
<li>test：maven工程的测试命令，会执行src/test/java下的单元测试类。</li>
<li>clean：maven工程的清理命令，执行 clean会删除target目录及内容。</li>
<li>package：maven工程的打包命令，对java工程执行package打成jar包，对web工程打成war包。</li>
<li>install：maven工程的安装命令，执行install将maven打成jar包或war包发布到本地仓库。</li>
<li>按上述插件排列顺序，当后面的命令执行时，前面的操作过程也都会自动执行。</li>
</ul>
</li>
<li><p>Maven指令的生命周期</p>
<ul>
<li>Clean Lifecycle：在进行真正的构建之前进行一些清理工作。</li>
<li>Default Lifecycle：构建的核心部分，编译，测试，打包，部署等等。</li>
<li>Site Lifecycle：生成项目报告，站点，发布站点。</li>
<li>上述三套生命周期相互独立</li>
</ul>
</li>
<li><p>依赖范围</p>
<table>
<thead>
<tr>
<th align="center">依赖范围</th>
<th align="center">编译时有效</th>
<th align="center">测试时有效</th>
<th align="center">运行时有效</th>
<th align="center">例子</th>
</tr>
</thead>
<tbody><tr>
<td align="center">compile(默认)</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">spring-core</td>
</tr>
<tr>
<td align="center">test</td>
<td align="center">-</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">Junit</td>
</tr>
<tr>
<td align="center">provided</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">servlet-api</td>
</tr>
<tr>
<td align="center">runtime</td>
<td align="center">-</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">JDBC驱动</td>
</tr>
<tr>
<td align="center">system</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">不推荐使用</td>
</tr>
</tbody></table>
<blockquote>
<p>因为tomcat自带servlet和jsp的jar包，所以这两类api设定运行时无效，防止冲突</p>
</blockquote>
</li>
<li><p>坐标定义</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">&gt;      <span class="comment">&lt;!--项目名称，定义为组织名+项目名，类似包名--&gt;</span></span><br><span class="line">&gt;      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">&gt;      <span class="comment">&lt;!-- 模块名称 --&gt;</span></span><br><span class="line">&gt;      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">&gt;      <span class="comment">&lt;!-- 当前项目版本号 --&gt;</span></span><br><span class="line">&gt;      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">&gt;      <span class="comment">&lt;!-- 依赖范围 --&gt;</span></span><br><span class="line">&gt;      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">&gt;   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>pom基本配置：Maven项目的核心配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="tag">&lt;<span class="name">project</span>&gt;</span>：文件的根节点 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">modelversion</span>&gt;</span>：pom.xml使用的对象模型版本 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>：项目名称，一般写项目的域名 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>：模块名称，子项目名或模块名称 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">version</span>&gt;</span>：产品的版本号 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>：打包类型，一般有jar、war、pom 等 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">name</span>&gt;</span>：项目的显示名，常用于 Maven 生成的文档</span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">description</span>&gt;</span>：项目描述，常用于 Maven 生成的文档</span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>：项目依赖构件配置，配置项目依赖构件的坐标</span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">build</span>&gt;</span>：项目构建配置，配置编译、运行插件等</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
</blockquote>
<h3 id="26-综合案例"><a href="#26-综合案例" class="headerlink" title="26. 综合案例"></a>26. 综合案例</h3><h4 id="BaseServlet"><a href="#BaseServlet" class="headerlink" title="BaseServlet"></a>BaseServlet</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//让项目中所有的Servlet删除service方法，并继承BaseServlet，当浏览器访问时会调用父类的service方法</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span>  </span>&#123;</span><br><span class="line">    <span class="comment">//获取请求路径</span></span><br><span class="line">    String uri = req.getRequestURI();</span><br><span class="line">    <span class="comment">//获取方法名称</span></span><br><span class="line">    String methodName = uri.substring(uri.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//通过反射，调用子类的方法</span></span><br><span class="line">    Method method = <span class="keyword">this</span>.getClass().getMethod(methodName, 		                                       HttpServletRequest.class,HttpServletResponse.class);    </span><br><span class="line">    method.invoke(<span class="keyword">this</span>, req, resp);&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Jquery的serialize方法"><a href="#Jquery的serialize方法" class="headerlink" title="Jquery的serialize方法"></a>Jquery的serialize方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.get(<span class="string">"user/regist"</span>, $(<span class="keyword">this</span>).serialize(), function (data) &#123;...&#125;);</span><br><span class="line"><span class="comment">//.serialize()可以将表单数据序列化为键值对的形式:username=eric&amp;password=123...</span></span><br><span class="line"><span class="comment">//通常用于接收（登录、注册）用户提交的表单数据的序列化，便于getParameterMap()方法获取参数</span></span><br></pre></td></tr></table></figure>

<h4 id="Redis与数据库交互"><a href="#Redis与数据库交互" class="headerlink" title="Redis与数据库交互"></a>Redis与数据库交互</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Category&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Category&gt; cs = <span class="keyword">null</span>;</span><br><span class="line">    Jedis jedis = JedisUtil.getJedis();</span><br><span class="line">    <span class="comment">//zrangeWithScores方法可以获取值和对应的score，存入Tuple对象中。</span></span><br><span class="line">    <span class="comment">//Tuple对象含一个Double score和一个byte[] element 成员变量</span></span><br><span class="line">    Set&lt;Tuple&gt; categorys = jedis.zrangeWithScores(<span class="string">"category"</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (categorys == <span class="keyword">null</span> || categorys.size() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//redis缓存中没有数据，从数据库中读取</span></span><br><span class="line">        cs = categoryDao.findAll();</span><br><span class="line">        <span class="comment">//将数据缓存到jedis内存中</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cs.size(); i++) &#123;</span><br><span class="line">            jedis.zadd(<span class="string">"category"</span>, cs.get(i).getCid(), cs.get(i).getCname());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//redis缓存中有数据，将数据格式统一转换为List格式返回</span></span><br><span class="line">        cs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Tuple tuple : categorys) &#123;</span><br><span class="line">            Category category = <span class="keyword">new</span> Category();</span><br><span class="line">            category.setCname(tuple.getElement());</span><br><span class="line">            category.setCid((<span class="keyword">int</span>) tuple.getScore());</span><br><span class="line">            cs.add(category);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="根据参数name获取对应的值"><a href="#根据参数name获取对应的值" class="headerlink" title="根据参数name获取对应的值"></a>根据参数name获取对应的值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getParameter</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + name + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>,<span class="string">"i"</span>);</span><br><span class="line">    <span class="keyword">var</span> r = location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">    <span class="keyword">if</span> (r!=<span class="literal">null</span>) <span class="keyword">return</span> (r[<span class="number">2</span>]); </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="SQL语句的拼接"><a href="#SQL语句的拼接" class="headerlink" title="SQL语句的拼接"></a>SQL语句的拼接</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findTotalCount</span><span class="params">(<span class="keyword">int</span> cid, String rname)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//定义模板代码</span></span><br><span class="line">    String sql = <span class="string">"select count(*) from tab_route where TRUE "</span>;</span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder(sql);<span class="comment">//用于拼接不同条件</span></span><br><span class="line">    ArrayList params = <span class="keyword">new</span> ArrayList();<span class="comment">//用于存放参数</span></span><br><span class="line">    <span class="keyword">if</span> (cid != <span class="number">0</span>) &#123;</span><br><span class="line">        sb.append(<span class="string">" and cid = ? "</span>);</span><br><span class="line">        params.add(cid);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (rname != <span class="keyword">null</span> &amp;&amp; rname.length() != <span class="number">0</span> &amp;&amp; !rname.equals(<span class="string">"null"</span>)) &#123;</span><br><span class="line">        sb.append(<span class="string">" and rname like ? "</span>);</span><br><span class="line">        params.add(<span class="string">"%"</span> + rname + <span class="string">"%"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    sql = sb.toString();</span><br><span class="line">    <span class="keyword">int</span> count = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        count = template.queryForObject(sql, Integer.class, params.toArray());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="解决中文乱码的两种方式"><a href="#解决中文乱码的两种方式" class="headerlink" title="解决中文乱码的两种方式"></a>解决中文乱码的两种方式</h4><p>第一种：在pom.xml下配置<code>uriEncoding</code>标签为utf-8</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 通过maven tomcat7:run运行项目时，访问项目的端口号 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 项目访问路径  本例：localhost:9090,  如果配置的aa， 则访问路径为localhost:9090/aa--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span>&gt;</span>/travel<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二种：post提交方式下，request.setCharacterEncoding(“utf-8”);</p>
<h4 id="三种前端往后端传参的方式"><a href="#三种前端往后端传参的方式" class="headerlink" title="三种前端往后端传参的方式"></a>三种前端往后端传参的方式</h4><ol>
<li>异步请求</li>
<li>表单提交</li>
<li>a标签</li>
</ol>
<h3 id="27-Linux"><a href="#27-Linux" class="headerlink" title="27. Linux"></a>27. Linux</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Linux是基于Unix的一种自由和开放源码的操作系统，存在着许多不同的Linux版本，但它们都使用了Linux内核。Linux的版本分为两种：内核版本和发行版本；内核版本是指在Linus领导下的内核小组开发维护的系统内核的版本号。</span><br></pre></td></tr></table></figure>

<h4 id="Linux常用命令"><a href="#Linux常用命令" class="headerlink" title="Linux常用命令"></a>Linux常用命令</h4><table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><strong>【cd】</strong></td>
<td></td>
</tr>
<tr>
<td>cd app</td>
<td>切换到app目录（tab键可补全文件路径）</td>
</tr>
<tr>
<td>cd ..</td>
<td>切换到上一层目录</td>
</tr>
<tr>
<td>cd /</td>
<td>切换到系统根目录</td>
</tr>
<tr>
<td>cd ~</td>
<td>切换到用户主目录</td>
</tr>
<tr>
<td>cd -</td>
<td>切换到上一个所在目录</td>
</tr>
<tr>
<td><strong>【ls】</strong></td>
<td></td>
</tr>
<tr>
<td>ls</td>
<td>显示当前目录下的内容（在linux中以 . 开头的文件都是隐藏的文件）</td>
</tr>
<tr>
<td>ls -a</td>
<td>显示所有文件或目录（包含隐藏的文件）</td>
</tr>
<tr>
<td>ls -l (缩写ll)</td>
<td>显示当前目录下文件的详情信息</td>
</tr>
<tr>
<td><strong>【dir】</strong></td>
<td></td>
</tr>
<tr>
<td>mkdir app</td>
<td>在当前目录下创建app子目录</td>
</tr>
<tr>
<td>rmdir app</td>
<td>app</td>
</tr>
<tr>
<td>mkdir –p aaa/bbb</td>
<td>在当前目录下级联创建aaa/bbb子目录</td>
</tr>
<tr>
<td><strong>【content】</strong></td>
<td></td>
</tr>
<tr>
<td>cat</td>
<td>用于显示文件的内容</td>
</tr>
<tr>
<td>more</td>
<td>显示文件部分的内容，按空格显示下一页，回车显示下一行，q退出查看</td>
</tr>
<tr>
<td>less</td>
<td>用法和more类似，不同的是less可以通过PgUp、PgDn键来控制</td>
</tr>
<tr>
<td>tail -N</td>
<td>用于显示文件后N行的内容</td>
</tr>
<tr>
<td>tail -f</td>
<td>动态查看文件日志</td>
</tr>
<tr>
<td><strong>【rm】</strong></td>
<td></td>
</tr>
<tr>
<td>rm a.txt</td>
<td>删除文件（询问用户）</td>
</tr>
<tr>
<td>rm -f a.txt</td>
<td>直接删除（不询问用户）</td>
</tr>
<tr>
<td>rm -r a</td>
<td>询问递归删除</td>
</tr>
<tr>
<td>rm -rf  a</td>
<td>不询问递归删除</td>
</tr>
<tr>
<td>rm -rf *</td>
<td>删除当前目录下所有文件</td>
</tr>
<tr>
<td>rm -rf /*</td>
<td>自杀式删除</td>
</tr>
<tr>
<td><strong>【cp，mv】</strong></td>
<td></td>
</tr>
<tr>
<td>cp a.txt b.txt</td>
<td>将a.txt复制成名为b.txt的文件</td>
</tr>
<tr>
<td>cp a.txt  ../</td>
<td>将a.txt文件复制到上一层目录中</td>
</tr>
<tr>
<td>mv a.txt b.txt</td>
<td>将a.txt文件重命名为b.txt</td>
</tr>
<tr>
<td>mv a.txt ../</td>
<td>将a.txt文件移动到上一层目录中</td>
</tr>
<tr>
<td><strong>【tar】</strong></td>
<td></td>
</tr>
<tr>
<td>-c</td>
<td>创建一个新tar文件</td>
</tr>
<tr>
<td>-v</td>
<td>显示运行过程的信息</td>
</tr>
<tr>
<td>-f</td>
<td>指定文件名</td>
</tr>
<tr>
<td>-z</td>
<td>调用gzip压缩命令进行压缩</td>
</tr>
<tr>
<td>-t</td>
<td>查看压缩文件的内容</td>
</tr>
<tr>
<td>-x</td>
<td>解开tar文件</td>
</tr>
<tr>
<td>tar –cvf  xxx.tar 打包文件</td>
<td>打包</td>
</tr>
<tr>
<td>tar –zcvf xxx.tar.gz 打包文件</td>
<td>打包并且压缩</td>
</tr>
<tr>
<td>tar –xvf xxx.tar</td>
<td>拆包</td>
</tr>
<tr>
<td>tar -zxvf xxx.tar.gz -C 目标路径</td>
<td>解压</td>
</tr>
<tr>
<td><strong>【find】</strong></td>
<td></td>
</tr>
<tr>
<td>find / -name  “ins*”</td>
<td>查找文件名称是以ins开头的文件</td>
</tr>
<tr>
<td>find / –user itcast –ls</td>
<td>查找用户itcast的文件</td>
</tr>
<tr>
<td>find / –user itcast –type d –ls</td>
<td>查找用户itcast的目录</td>
</tr>
<tr>
<td>find /-perm -777 –type d-ls</td>
<td>查找权限是777的文件</td>
</tr>
<tr>
<td><strong>【grep】</strong></td>
<td></td>
</tr>
<tr>
<td>grep lang 文件名</td>
<td>在文件中查找lang</td>
</tr>
<tr>
<td>grep lang 文件名 –color</td>
<td>高亮显示</td>
</tr>
<tr>
<td><strong>【other】</strong></td>
<td></td>
</tr>
<tr>
<td>pwd</td>
<td>显示当前所在目录</td>
</tr>
<tr>
<td>touch a.txt</td>
<td>创建一个空文件</td>
</tr>
<tr>
<td>clear/ crtl + L</td>
<td>清屏</td>
</tr>
<tr>
<td>crtl + C</td>
<td>退出</td>
</tr>
<tr>
<td>ifconfig</td>
<td>查询IP地址</td>
</tr>
</tbody></table>
<h4 id="Vim编辑器"><a href="#Vim编辑器" class="headerlink" title="Vim编辑器"></a>Vim编辑器</h4><blockquote>
<p>在Linux下一般使用vi编辑器来编辑文件，vi既可以查看文件也可以编辑文件。</p>
<p>vi有三种模式：命令行、插入、底行模式。</p>
<p>通过 <code>vim 文件名</code> 命令进入Vim编辑器，此时默认为命令行模式。</p>
<p>命令行模式—-按 i 、o、a键—-&gt;插入模式—-按Esc键—-&gt;命令行模式</p>
<p>命令行模式—-按 :（冒号）—-&gt;底行模式：退出：<code>q</code>；保存并退出：<code>wq</code>；不保存退出：<code>q!</code></p>
</blockquote>
<h5 id="重定向输出"><a href="#重定向输出" class="headerlink" title="重定向输出"></a>重定向输出</h5><blockquote>
<p><code>&gt;</code> 重定向输出，覆盖原有内容；<code>&gt;&gt;</code> 重定向输出，追加在原内容后；</p>
<p>示例：</p>
<p><code>cat /b.txt &gt; a.txt</code>  将b.txt文件中内容输出定向到a.txt中</p>
<p><code>ifconfig &gt; ifconfig.txt</code> 将网络配置信息输出定向到ifconfig.txt中</p>
</blockquote>
<h5 id="系统管理命令"><a href="#系统管理命令" class="headerlink" title="系统管理命令"></a>系统管理命令</h5><blockquote>
<ul>
<li><p><code>ps</code> 正在运行的某个进程的状态</p>
</li>
<li><p><code>ps –ef</code>  查看所有进程</p>
</li>
<li><p><code>ps –ef | grep ssh</code> 查找某一进程</p>
</li>
<li><p><code>kill 2868</code>  杀掉2868编号的进程</p>
</li>
<li><p><code>kill -9 2868</code>  强制杀死进程</p>
</li>
</ul>
</blockquote>
<h5 id="管道"><a href="#管道" class="headerlink" title="管道 |"></a>管道 |</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">管道是Linux命令中重要的一个概念，其作用是将一个命令的输出用作另一个命令的输入。示例：</span><br><span class="line">ls --help | more  分页查询帮助信息</span><br><span class="line">ps –ef | grep java  查询名称中包含java的进程</span><br></pre></td></tr></table></figure>

<h4 id="Linux权限命令"><a href="#Linux权限命令" class="headerlink" title="Linux权限命令"></a>Linux权限命令</h4><h5 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h5><table>
<thead>
<tr>
<th align="center">文件类型</th>
<th align="center">user</th>
<th align="center">user</th>
<th align="center">user</th>
<th align="center">group</th>
<th align="center">group</th>
<th align="center">group</th>
<th align="center">other</th>
<th align="center">other</th>
<th align="center">other</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-</td>
<td align="center">r</td>
<td align="center">w</td>
<td align="center">x</td>
<td align="center">r</td>
<td align="center">w</td>
<td align="center">x</td>
<td align="center">r</td>
<td align="center">w</td>
<td align="center">x</td>
</tr>
<tr>
<td align="center">score</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">1</td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li>user：属主权限</li>
<li>group：属组权限</li>
<li>other：其他用户权限</li>
<li>r：对文件是指可读取内容 对目录是可以ls</li>
<li>w：对文件是指可修改文件内容，对目录是指可以在其中创建或删除子节点(目录或文件)</li>
<li>x：对文件是指是否可以运行这个文件，对目录是指是否可以cd进入这个目录</li>
<li>chmod 变更文件或目录的权限：<code>chmod 755 a.txt</code>  <code>chmod u=rwx,g=rx,o=rx a.txt</code></li>
</ul>
</blockquote>
<h5 id="Linux三种文件类型"><a href="#Linux三种文件类型" class="headerlink" title="Linux三种文件类型"></a>Linux三种文件类型</h5><blockquote>
<ul>
<li><p>普通文件： 包括文本文件、数据文件、可执行的二进制程序文件等。 </p>
</li>
<li><p>目录文件： Linux系统把目录看成是一种特殊的文件，利用它构成文件系统的树型结构。  </p>
</li>
<li><p>设备文件： Linux系统把每一个设备都看成是一个文件</p>
</li>
</ul>
</blockquote>
<h5 id="文件类型标识"><a href="#文件类型标识" class="headerlink" title="文件类型标识"></a>文件类型标识</h5><blockquote>
<p>进入etc可以查看：普通文件（-）、目录（d）、符号链接（l）、字符设备文件（c）、块设备文件（s）、套接字（s）命名管道（p）</p>
</blockquote>
<h4 id="Linux网络操作"><a href="#Linux网络操作" class="headerlink" title="Linux网络操作"></a>Linux网络操作</h4><blockquote>
<ul>
<li><p><code>hostname</code> 查看主机名</p>
</li>
<li><p><code>hostname xxx</code> 修改主机名 重启后无效（如果想要永久生效，可以修改/etc/sysconfig/network文件）</p>
</li>
<li><p><code>vim /etc/sysconfig/network-scripts/ifcfg-eth0</code> 持久化修改ip地址</p>
</li>
<li><p><code>service iptables stop</code> 关闭防火墙</p>
</li>
<li><p><code>service network status</code> 查看指定服务的状态</p>
</li>
<li><p><code>service network stop</code> 停止指定服务</p>
</li>
<li><p><code>service network start</code> 启动指定服务</p>
</li>
<li><p><code>service network restart</code> 重启指定服务</p>
</li>
</ul>
</blockquote>
<h4 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h4><blockquote>
<ul>
<li><p>安装方式：</p>
<ol>
<li><p><strong>二进制发布包</strong>：</p>
<p>软件已经针对具体平台编译打包发布，只要解压，修改配置即可。</p>
</li>
<li><p><strong>RPM包</strong>：</p>
<p>软件已经按照redhat的包管理工具规范RPM进行打包发布，需要获取到相应的软件RPM发布包，然后用RPM命令进行安装。</p>
</li>
<li><p><strong>Yum在线安装</strong>：</p>
<p>软件已经以RPM规范打包，但发布在了网络上的一些服务器上，可用yum在线安装服务器上的rpm软件，并且会自动解决软件安装过程中的库依赖问题。</p>
</li>
<li><p><strong>源码编译安装</strong>：</p>
<p>软件以源码工程的形式发布，需要获取到源码工程后用相应开发工具进行编译打包部署。</p>
</li>
</ol>
</li>
<li><p>上传与下载：</p>
<ol>
<li><strong>FileZilla</strong>：文件交互图形化软件，解压后可直接使用，通过拖动文件完成本地与虚拟机的文件交互</li>
<li><strong>lrzsz</strong>：使用yum方式安装：<code>yum install lrzsz</code>，可以在crt中设置上传与下载目录：选项→会话选项→X/Y/Zmodem，设置上传和下载目录。在CRT界面输入<code>rz</code>获取上传目录，输入<code>sz</code>获取下载目录</li>
<li><strong>sftp</strong>：使用alt + p 组合键打开sftp窗口，使用put 命令上传，使用get命令下载，默认下载位置在当前计算的的文档位置</li>
</ol>
</li>
</ul>
</blockquote>
<h5 id="在Linux上安装JDK"><a href="#在Linux上安装JDK" class="headerlink" title="在Linux上安装JDK"></a>在Linux上安装JDK</h5><blockquote>
<ol>
<li><p>卸载系统自带jdk：</p>
<p><code>rpm -e --nodeps java-1.6.0-openjdk-1.6.0.35-1.13.7.1.el6_6.i686</code></p>
<p><code>rpm -e --nodeps java-1.7.0-openjdk-1.7.0.79-2.5.5.4.el6.i686</code></p>
</li>
<li><p>在Linux服务器上安装JDK：</p>
<p>直接解压就可以：<code>tar –zxvf  jdk.tar.gz  -C 目标路径</code></p>
</li>
<li><p>配置JDK的环境变量：</p>
<ol>
<li><p><code>vi /etc/profile</code></p>
</li>
<li><p>在末尾行添加下列文本后，保存退出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;       #set java environment</span><br><span class="line">&gt;       JAVA_HOME=/usr/local/jdk/jdk1.7.0_71</span><br><span class="line">&gt;       CLASSPATH=.:$JAVA_HOME/lib.tools.jar</span><br><span class="line">&gt;       PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line">&gt;       export JAVA_HOME CLASSPATH PATH</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li><code>source /etc/profile</code>  使更改的配置立即生效</li>
</ol>
</blockquote>
<h5 id="在Linux上安装Mysql"><a href="#在Linux上安装Mysql" class="headerlink" title="在Linux上安装Mysql"></a>在Linux上安装Mysql</h5><blockquote>
<ol>
<li><p>卸载系统自带mysql：</p>
<p><code>rpm -e --nodeps mysql-libs-5.1.73-5.el6_6.i686</code></p>
</li>
<li><p>安装MYSQL服务端：</p>
<p><code>rpm -ivh MySQL-server-5.6.22-1.el6.i686.rpm</code></p>
</li>
<li><p>查看系统随机生成的root初始密码：</p>
<p><code>cat /root/.mysql_secret</code></p>
</li>
<li><p>开启mysql服务：</p>
<p><code>service mysql start</code></p>
</li>
<li><p>登录mysql：</p>
<p><code>mysql -u root -p随机初始密码</code></p>
</li>
<li><p>第一次操作mysql前修改root用户密码：</p>
<p><code>set password=password(&#39;root&#39;)</code></p>
</li>
<li><p>设置mysql远程访问：</p>
<p><code>grant all privileges on *.* to &#39;root&#39; @&#39;%&#39; identified by &#39;root&#39;;</code></p>
<p><code>flush privileges;</code></p>
</li>
<li><p>关闭防火墙：</p>
<p><code>service iptables stop;</code></p>
</li>
</ol>
</blockquote>
<h5 id="在Linux上安装tomcat"><a href="#在Linux上安装tomcat" class="headerlink" title="在Linux上安装tomcat"></a>在Linux上安装tomcat</h5><blockquote>
<ol>
<li><p>在Linux服务器上安装tomcat：</p>
<p>直接解压就可以：<code>tar –zxvf  apache-tomcat-7.0.57  -C 目标路径</code></p>
</li>
<li><p>启动tomcat：</p>
<p>在tomcat/bin目录下执行 startup.sh（注意防火墙）</p>
</li>
<li><p>查看目标：</p>
<p>tomcat/logs/catalina.out</p>
</li>
</ol>
</blockquote>
<h5 id="在Linux上安装redis"><a href="#在Linux上安装redis" class="headerlink" title="在Linux上安装redis"></a>在Linux上安装redis</h5><blockquote>
<ol>
<li>安装gcc-c++：<code>yum install gcc-c++</code></li>
<li>下载redis：<code>wget http://download.redis.io/releases/redis-3.0.4.tar.gz</code></li>
<li>解压：<code>tar -xzvf redis-3.0.4.tar.gz</code></li>
<li>切换至程序目录，执行make命令进行编译：<code>make</code></li>
<li>执行安装命令：<code>make PREFIX=/usr/local/redis install</code></li>
<li>复制配置文件到redis/bin目录下：<code>cd redis-3.0.4</code> <code>cp redis.conf/usr/local/redis/bin</code></li>
<li>bin目录下启动redis服务端：<code>./redis-server redis.conf</code></li>
<li>克隆新窗口，启动redis客户端：<code>./redis-cli</code></li>
</ol>
</blockquote>
<h3 id="28-Nginx"><a href="#28-Nginx" class="headerlink" title="28. Nginx"></a>28. Nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Nginx 是一款高性能的 http 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，由俄罗斯的程序设计师伊戈尔·西索夫（Igor Sysoev）所开发，官方测试 nginx 能够支支撑5万并发链接，cpu、内存等资源消耗却非常低，运行非常稳定。</span><br></pre></td></tr></table></figure>

<p><strong>Nginx 应用场景</strong></p>
<blockquote>
<ul>
<li>Nginx 可以做网页静态服务器，独立提供 http 服务。</li>
<li>可以实现在一台服务器虚拟出多个网站。</li>
<li>反向代理，负载均衡。高并发需要用多台服务器集群时可以使用 nginx 做反向代理，并且可以设定每台服务器分担负载的概率，不会出现某台服务器负载高宕机而某台服务器闲置的情况。</li>
</ul>
</blockquote>
<p><strong>Nginx启动与访问</strong></p>
<blockquote>
<ol>
<li>创建临时目录：<code>mkdir /var/temp/nginx/client -p</code></li>
<li>进入到Nginx目录下的sbin目录：<code>cd /usr/local/ngiux/sbin</code></li>
<li>输入命令启动Nginx：<code>./nginx</code></li>
<li>启动后查看进程：<code>ps aux|grep nginx</code></li>
<li>关闭 nginx：<code>./nginx -s stop</code>   <code>./nginx -s quit</code></li>
<li>重启 nginx：<code>./nginx -s reload</code></li>
</ol>
</blockquote>
<h4 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>IP绑定域名：本地可以通过修改 hosts 文件（C:\Windows\System32\drivers\etc），配置域名和 ip 的映射关系，如果 hosts 文件中配置了域名和 ip 的对应关系，不需要走dns 服务器。</p>
<p>例如：192.168.177.129    <a href="http://www.hmtravel.com" target="_blank" rel="noopener">www.hmtravel.com</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; 配置反向代理：</span><br><span class="line">&gt; upstream tomcat-travel&#123;</span><br><span class="line">&gt; 	server 192.168.177.129:8080;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; server &#123;</span><br><span class="line">&gt; 	listen 80; # 监听的端口</span><br><span class="line">&gt; 	server_name  www.hmtravel.com; # 域名或ip</span><br><span class="line">&gt; 	location / &#123;	# 访问路径配置</span><br><span class="line">&gt; 	# root index;# 根目录</span><br><span class="line">&gt; 	proxy_pass http://tomcat-travel; # 通过此步设置代理的目录</span><br><span class="line">&gt; 	index  index.html index.htm; # 默认首页</span><br><span class="line">&gt; &#125;&#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">英文名称为Load Balance，其意思就是分摊到多个操作单元上进行执行，提供了一种廉价有效透明的方法扩展网络设备和服务器的带宽、增加吞吐量、加强网络数据处理能力、提高网络的灵活性和可用性。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">配置负载均衡:修改 Nginx配置文件</span><br><span class="line">	upstream tomcat-travel &#123;</span><br><span class="line">	   server 192.168.177.129:8080;</span><br><span class="line">	    server 192.168.177.129:8081 weight=2;</span><br><span class="line">	   server 192.168.177.129:8082;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80; # 监听的端口</span><br><span class="line">        server_name  www.hmtravel.com; # 域名或ip</span><br><span class="line">        location / &#123;	# 访问路径配置</span><br><span class="line">            # root   index;# 根目录</span><br><span class="line">	    proxy_pass http://tomcat-travel;</span><br><span class="line">            index  index.html index.htm; # 默认首页</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/16/Web前端知识点总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric">
      <meta itemprop="description" content="Eric's Knowledge Base">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Space">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/16/Web前端知识点总结/" class="post-title-link" itemprop="url">Web前端</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-06-16 09:56:10 / Geändert am: 09:56:40" itemprop="dateCreated datePublished" datetime="2019-06-16T09:56:10+08:00">2019-06-16</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Web前端知识点总结"><a href="#Web前端知识点总结" class="headerlink" title="Web前端知识点总结"></a>Web前端知识点总结</h1><h3 id="1-B-S架构资源"><a href="#1-B-S架构资源" class="headerlink" title="1. B/S架构资源"></a>1. B/S架构资源</h3><blockquote>
<p><strong>静态资源：</strong>使用静态网页开发技术发布的资源</p>
<ul>
<li>所有用户访问，得到的结果是一样的。</li>
<li>如：文本，图片，音频、视频, HTML,CSS,JavaScript。</li>
<li>如果用户请求的是静态资源，那么服务器会直接将静态资源发送给浏器。</li>
<li>用HTML搭建基础网页， 用CSS美化、布局页面，用JavaScript控制页面的元素，让页面有动态效果。</li>
</ul>
<p><strong>动态资源：</strong>使用动态网页及时发布的资源</p>
<ul>
<li>所有用户访问，得到的结果可能不一样。</li>
<li>如：jsp/servlet,php,asp…。</li>
<li>如果用户请求的是动态资源，那么服务器会执行动态资源，转换为静态资源，再发送给浏览器。</li>
</ul>
</blockquote>
<h3 id="2-HTML"><a href="#2-HTML" class="headerlink" title="2. HTML"></a>2. HTML</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Hyper Text Markup Language 超文本标记语言，是最基础的网页开发语言</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>超文本</strong>：用超链接的方法，将各种不同空间的文字信息组织在一起的网状文本</p>
<p><strong>标记语言</strong>：由标签&lt;标签名称&gt; 构成的语言，如html、xml，不属于编程语言。</p>
<p><strong>标签</strong>：标签可以嵌套，不区分大小写，建议用小写，分为两类：</p>
<ul>
<li>围堵标签：有开始标签和结束标签。如 <html> </html></li>
<li>自闭标签：开始标签和结束标签在一起。如 &lt; br/&gt;</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th align="left">标签</th>
<th>说明</th>
<th>属性</th>
</tr>
</thead>
<tbody><tr>
<td align="left">&lt; html&gt;</td>
<td>文档的根标签</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; head&gt;</td>
<td>头标签，用于指定html文档的一些属性，引入外部的资源</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; title&gt;</td>
<td>标题标签</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; body&gt;</td>
<td>体标签</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; !DOCTYPE html &gt;</td>
<td>html5中定义该文档是html文档</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; !– 注释内容 – &gt;</td>
<td>注释</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; h1&gt; to &lt; h6&gt;</td>
<td>标题标签，h1到h6字体大小逐渐递减</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; p&gt;</td>
<td>段落标签</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; br/&gt;</td>
<td>换行标签</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; hr&gt;</td>
<td>展示一条水平线</td>
<td>color/width/size/align</td>
</tr>
<tr>
<td align="left">&lt; b&gt;</td>
<td>字体加粗</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; i&gt;</td>
<td>字体斜体</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; font&gt;</td>
<td>字体标签</td>
<td>color/face/size</td>
</tr>
<tr>
<td align="left">&lt; center&gt;</td>
<td>文本居中</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; img src=” “ alt=” “&gt;</td>
<td>展示图片（src为图片URL，alt为图片替代文本）</td>
<td>align/height/width</td>
</tr>
<tr>
<td align="left">&lt; ol&gt; &lt; li&gt;&lt; /li&gt; &lt; /ol&gt;</td>
<td>有序列表</td>
<td>type</td>
</tr>
<tr>
<td align="left">&lt; ul&gt; &lt; li&gt;&lt; /li&gt; &lt; /ul&gt;</td>
<td>无序列表</td>
<td>type</td>
</tr>
<tr>
<td align="left">&lt; a href=””&gt;&lt; /a&gt;</td>
<td>超链接标签</td>
<td>target( _self/ _blank)</td>
</tr>
<tr>
<td align="left">&lt; div&gt;</td>
<td>块级标签</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; span&gt;</td>
<td>行内标签</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; header&gt;</td>
<td>页眉</td>
<td></td>
</tr>
<tr>
<td align="left">&lt; footer&gt;</td>
<td>页脚</td>
<td></td>
</tr>
</tbody></table>
<blockquote>
<p><strong>超链接的功能</strong>：1. 生成可以被点击的样式；    2. 点击后跳转到href指定的url</p>
<p>若需要保留1功能，去掉2功能，则：<code>href = &quot;javascript:void(0)&quot;</code></p>
</blockquote>
<h3 id="3-表格标签"><a href="#3-表格标签" class="headerlink" title="3. 表格标签"></a>3. 表格标签</h3><blockquote>
<p><strong>table</strong>：定义表格</p>
<ul>
<li>width：宽度</li>
<li>border：边框</li>
<li>cellpadding：定义内容和单元格的距离</li>
<li>cellspacing：定义单元格之间的距离。如果指定为0，则单元格的线会合为一条</li>
<li>bgcolor：背景色</li>
<li>align：对齐方式</li>
</ul>
<p><strong>tr</strong>：定义行</p>
<ul>
<li>bgcolor：背景色</li>
<li>align：对齐方式</li>
</ul>
<p><strong>td</strong>：定义单元格</p>
<ul>
<li>colspan：合并列</li>
<li>rowspan：合并行</li>
</ul>
<p><strong>th</strong>：定义表头单元格</p>
</blockquote>
<h3 id="4-表单标签"><a href="#4-表单标签" class="headerlink" title="4. 表单标签"></a>4. 表单标签</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">用于采集用户输入的数据，和服务器进行交互的标签。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>action</strong>：指定提交数据的URL，若是写一个#，那么就是提交到本页面</p>
<p><strong>method</strong>：指定提交方式，表单项中的数据要想被提交，必须指定其name属性</p>
<ul>
<li><p>get：请求参数会在地址栏中显示，参数大小不能超过255， 不太安全</p>
</li>
<li><p>post：请求参数不会在地址栏中显示，参数的大小没有限制，多用于提交视频和图片，比较安全</p>
<p><strong>input</strong>：可以通过type属性值，改变元素展示的样式</p>
</li>
<li><p>text：文本输入框，默认值（参数placeholder：指定输入框的提示信息）</p>
</li>
<li><p>password：密码输入框</p>
</li>
<li><p>radio：单选框，多个单选框的name属性值必须一样，在value属性中指定其被选中后提交的值</p>
</li>
<li><p>checkbox：在value属性中指定其被选中后提交的值</p>
</li>
<li><p>file：文件选择框</p>
</li>
<li><p>hidden：隐藏域，用于提交一些信息，不需要用户输入</p>
</li>
<li><p>submit：提交按钮，可以提交表单</p>
</li>
<li><p>image：图片提交按钮，src属性指定图片的路径    </p>
</li>
</ul>
<p><strong>label</strong>：label的for属性一般会和input的id属性值对应。点击label区域，会让对应的input输入框获取焦点</p>
<p><strong>select</strong>：下拉列表，子元素option为指定列表项</p>
<p><strong>textarea</strong>：文本域，cols：指定列数， rows：默认多少行</p>
</blockquote>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"en"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>FormTest<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span> <span class="attr">method</span>=<span class="string">"get"</span>&gt;</span></span><br><span class="line">    姓名：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">placeholder</span>=<span class="string">"请输入姓名"</span> <span class="attr">name</span> = <span class="string">"username"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    密码：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"请输入密码"</span> <span class="attr">name</span>=<span class="string">"password"</span>&gt;</span> <span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    性别：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span> = <span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"男"</span>&gt;</span> 男</span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"radio"</span> <span class="attr">name</span> = <span class="string">"gender"</span> <span class="attr">value</span>=<span class="string">"女"</span>&gt;</span> 女<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    爱好：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span> = <span class="string">"hobby"</span> <span class="attr">value</span> = <span class="string">1</span>&gt;</span> 小米</span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span> = <span class="string">"hobby"</span> <span class="attr">value</span> = <span class="string">2</span>&gt;</span> 华为</span><br><span class="line">          <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"checkbox"</span> <span class="attr">name</span> = <span class="string">"hobby"</span> <span class="attr">value</span> = <span class="string">3</span>&gt;</span> 锤子<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"file"</span>&gt;</span>文件<span class="tag">&lt;/<span class="name">label</span>&gt;</span>：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"file"</span> <span class="attr">id</span>=<span class="string">"file"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    隐藏：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    提交：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	图片提交：<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"image"</span> <span class="attr">src</span>=<span class="string">"baidu.png"</span>&gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    地区：<span class="tag">&lt;<span class="name">select</span> <span class="attr">name</span>=<span class="string">"place"</span> <span class="attr">id</span>=<span class="string">"place"</span> &gt;</span><span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span>&gt;</span>请选择地区<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span> =<span class="string">"北京"</span>&gt;</span>北京<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"深圳"</span>&gt;</span>深圳<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">option</span> <span class="attr">value</span>=<span class="string">"厦门"</span>&gt;</span>厦门<span class="tag">&lt;/<span class="name">option</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">select</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="5-CCS"><a href="#5-CCS" class="headerlink" title="5. CCS"></a>5. CCS</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Cascading Style Sheets 层叠样式表，多个样式可以作用在同一个html的元素上，用于页面美化和布局控制</span><br><span class="line">好处：功能强大，将内容展示和样式控制分离，易于分工合作，提高效率，同时可以使页面中的样式得以复用。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>CCS与Html的结合：</strong></p>
<ol>
<li><p>内联样式：在标签内使用style属性指定css代码：</p>
<p><code>&lt;div style=&quot;color:red;&quot;&gt;hello css&lt;/div&gt;</code></p>
</li>
<li><p>内部样式： 在head标签内，定义style标签，style标签的标签体内容就是css代码：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;    <span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">&gt;        <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">&gt;            div&#123;color:blue;&#125;</span><br><span class="line">&gt;        <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line">&gt;    <span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">&gt;    <span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">&gt;    	<span class="tag">&lt;<span class="name">div</span>&gt;</span>hello css<span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line">&gt;    <span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li><p>外部样式：先定义css资源文件，再在head标签内，定义link标签，引入外部的资源文件</p>
<p><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;css/a.css&quot;&gt;</code></p>
<p>（也可以写为：<code>&lt;style&gt;  @import &quot;a.css&quot;;  &lt;/style&gt;</code>）</p>
</li>
</ol>
</blockquote>
<h3 id="6-CCS选择器"><a href="#6-CCS选择器" class="headerlink" title="6. CCS选择器"></a>6. CCS选择器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">选择器：筛选具有相似特征的元素</span><br><span class="line">选择器 &#123;</span><br><span class="line">		属性名1:属性值1;</span><br><span class="line">		属性名2:属性值2;</span><br><span class="line">		...</span><br><span class="line">		&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>基础选择器：</strong></p>
<ol>
<li><strong>id选择器</strong>：选择具体的id属性值的元素，建议在一个html页面中id值唯一。语法：<code>#id属性值{}</code></li>
<li><strong>类选择器</strong>：选择具有相同的class属性值的元素。语法：<code>.class属性值{}</code></li>
<li><strong>元素选择器</strong>：选择具有相同标签名称的元素。语法：<code>标签名称{}</code></li>
</ol>
<p><strong>扩展选择器：</strong></p>
<ol>
<li>选择所有元素。语法：<code>*{}</code></li>
<li>并集选择器：同时筛选多个选择器。语法：<code>选择器1,选择器2{}</code></li>
<li>子选择器：筛选选择器1元素下的选择器2元素。 语法：<code>选择器1 选择器2{}</code></li>
<li>直系父选择器：筛选选择器2的父元素选择器1。语法：<code>选择器1 &gt; 选择器2{}</code></li>
<li>属性选择器：选择元素名称，属性名=属性值的元素。语法：<code>元素名称[属性名=&quot;属性值&quot;]{}</code></li>
<li>伪类选择器：选择一些元素具有的状态。语法：<code>元素：状态{}</code>  如：超链接标签 &lt; a&gt;：<ul>
<li><code>a:link{}</code>：初始化的状态</li>
<li><code>a:visited{}</code>：被访问过的状态</li>
<li><code>a:active{}</code>：正在访问状态</li>
<li><code>a:hover{}</code>：鼠标悬浮状态</li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="7-CCS属性"><a href="#7-CCS属性" class="headerlink" title="7. CCS属性"></a>7. CCS属性</h3><blockquote>
<ol>
<li>字体、文本：<ul>
<li><code>font-size</code>：字体大小</li>
<li><code>color</code>：文本颜色</li>
<li><code>text-align</code>：对齐方式</li>
<li><code>line-height</code>：行高 </li>
</ul>
</li>
<li>背景<code>background</code>：可以设置背景色或填充图片</li>
<li>边框<code>border</code>：设置边框，符合属性</li>
<li>尺寸<code>width</code>：宽度height：高度</li>
<li>盒子模型：控制布局<ul>
<li><code>margin</code>：外边距</li>
<li><code>padding</code>：内边距，默认情况下内边距会影响整个盒子的大小</li>
<li><code>box-sizing: border-box</code>;  设置盒子的属性，让width和height就是最终盒子的大小</li>
</ul>
</li>
<li>浮动：<code>float</code>，脱离文档流布局（靠左：left；靠右：right）</li>
</ol>
</blockquote>
<h3 id="8-JavaScript基本语法"><a href="#8-JavaScript基本语法" class="headerlink" title="8. JavaScript基本语法"></a>8. JavaScript基本语法</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">JavaScript是一门客户端脚本语言，运行在客户端的浏览器中，每一个浏览器都有JavaScript的解析引擎。</span><br><span class="line">JS可以来增强用户和html页面的交互过程，可以来控制html元素，让页面有一些动态的效果，增强用户的体验。</span><br><span class="line">脚本语言：不需要编译，可以直接被浏览器内核解析执行的语言。</span><br><span class="line">客户端脚本语言的标准：ECMAScript，统一了所有客户端脚本语言的编码方式。</span><br></pre></td></tr></table></figure>

<h4 id="结合html"><a href="#结合html" class="headerlink" title="结合html"></a>结合html</h4><ul>
<li>内部JS：定义&lt; script&gt;，标签体内容就是js代码</li>
<li>外部JS： 定义&lt; script&gt;，通过src属性引入外部的js文件</li>
</ul>
<blockquote>
<p>注意： &lt; script&gt;可以定义多个，可以定义在html页面的任何地方，但是定义的位置会影响执行顺序。</p>
<p>建议书写位置：1. head标题中   2. body最下方</p>
</blockquote>
<h4 id="数据类型"><a href="#数据类型" class="headerlink" title="数据类型"></a>数据类型</h4><blockquote>
<ul>
<li>原始数据类型：五种<ol>
<li>number：数字。包含整数、小数、NaN(Not a Number,代表不是数字的数字类型)</li>
<li>string：字符串。 “abc”、 “a”、 ‘abc’</li>
<li>boolean：true和false</li>
<li>null：一个对象为空的占位符(注意：null运算是其typeof类型为object，属设计错误)</li>
<li>undefined：未定义。一个没有初始化的变量，会被默认赋值为undefined</li>
</ol>
</li>
<li>引用数据类型：对象</li>
</ul>
</blockquote>
<h4 id="变量"><a href="#变量" class="headerlink" title="变量"></a>变量</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JavaScript是弱类型语言，定义变量的语法：var 变量名 = 初始化值</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>强类型：在开辟变量存储空间时，定义了空间将来存储数据的数据类型。只能存储固定类型的数据。</li>
<li>弱类型：在开辟变量存储空间时，不定义空间将来的存储数据类型，可以存放任意类型的数据。</li>
</ul>
</blockquote>
<h4 id="运算符"><a href="#运算符" class="headerlink" title="运算符"></a>运算符</h4><blockquote>
<ul>
<li><p>被正负号修饰的运算数（+(-)）会自动转换为number类型，如果字面值不是数字，则转为NaN，true转为1，false转为0。</p>
</li>
<li><p>==：直接比较字面值，类型不同时，先进行类型转换，再比较</p>
<p>===：全等于，在比较之前，先判断类型，如果类型不一样，则直接返回false</p>
</li>
<li><p>进行逻辑运算时：</p>
<ol>
<li>number：0或NaN为假，其他为真</li>
<li>string：除了空字符串(“”)，其他都是true</li>
<li>null&amp;undefined:都是false</li>
<li>对象：所有对象都为true</li>
</ol>
</li>
</ul>
</blockquote>
<h3 id="9-JavaScript基本对象"><a href="#9-JavaScript基本对象" class="headerlink" title="9. JavaScript基本对象"></a>9. JavaScript基本对象</h3><h4 id="Function-函数对象"><a href="#Function-函数对象" class="headerlink" title="Function:函数对象"></a>Function:函数对象</h4><blockquote>
<ul>
<li><p>创建：</p>
<ol>
<li>var fun = new Function(形式参数列表,方法体)；</li>
<li>function 方法名称(形式参数列表){<br>   方法体<br>}</li>
<li>var 方法名 = function(形式参数列表){<pre><code>方法体</code></pre>}</li>
</ol>
</li>
<li><p>方法：</p>
<p>​    length:代表形参的个数</p>
</li>
<li><p>特点：</p>
<ol>
<li>JS中不存在方法重载，方法的调用只与方法的名称有关，和参数列表无关</li>
<li>方法是一个对象，如果定义名称相同的方法，后执行的方法会覆盖之前的方法</li>
<li>第二种创建方法执行优先级较高，若定义名称相同，会被第三种创建方法覆盖</li>
<li>在方法声明中有一个隐藏的内置对象（数组）arguments，封装所有的实际参数</li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="Array-数组对象"><a href="#Array-数组对象" class="headerlink" title="Array:数组对象"></a>Array:数组对象</h4><blockquote>
<ul>
<li><p>创建：</p>
<ol>
<li>var arr = new Array(元素列表);</li>
<li>var arr = new Array(默认长度);</li>
<li>var arr = [元素列表]</li>
</ol>
</li>
<li><p>方法：</p>
<ol>
<li>join(参数)：将数组中的元素按照指定的分隔符拼接为字符串</li>
<li>push(参数)：向数组的末尾添加一个或更多元素，并返回新的数组长度</li>
</ol>
</li>
<li><p>特点：</p>
<p>JS中的数组长度可变，元素类型也可变。</p>
</li>
</ul>
</blockquote>
<h4 id="Date-日期对象"><a href="#Date-日期对象" class="headerlink" title="Date:日期对象"></a>Date:日期对象</h4><blockquote>
<ul>
<li>创建：var date = new Date();</li>
<li>方法：<br>toLocaleString()：返回当前date对象对应的时间本地字符串格式<br>getTime():获取毫秒值。返回当前如期对象描述的时间到1970年1月1日零点的毫秒值差</li>
</ul>
</blockquote>
<h4 id="RegExp-正则表达式对象"><a href="#RegExp-正则表达式对象" class="headerlink" title="RegExp:正则表达式对象"></a>RegExp:正则表达式对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">正则表达式也是一个字符串，是专门解决字符串规则匹配的工具，用来定义匹配规则</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>创建：<ol>
<li>var reg = new RegExp(“正则表达式”);</li>
<li>var reg = /正则表达式/; （表达式不需要双引号，不需要加转义字符）</li>
</ol>
</li>
<li>方法：<ol>
<li>test(参数)：验证指定的字符串是否符合正则定义的规范    </li>
<li>match(参数)：可以匹配正则，返回的是匹配正则的内容</li>
</ol>
</li>
</ul>
</blockquote>
<table>
<thead>
<tr>
<th align="center">表达式</th>
<th align="center">含义</th>
</tr>
</thead>
<tbody><tr>
<td align="center">x</td>
<td align="center">字符 x</td>
</tr>
<tr>
<td align="center">\\</td>
<td align="center">反斜线字符</td>
</tr>
<tr>
<td align="center">[abc]</td>
<td align="center">a、b 或 c（简单类）</td>
</tr>
<tr>
<td align="center">[^abc]</td>
<td align="center">任何字符，除了 a、b 或 c（否定）</td>
</tr>
<tr>
<td align="center">[a-zA-Z]</td>
<td align="center">a 到 z 或 A 到 Z，两头的字母包括在内（范围）</td>
</tr>
<tr>
<td align="center">\w</td>
<td align="center">单词字符：[a-zA-Z_0-9]</td>
</tr>
<tr>
<td align="center">X?</td>
<td align="center">X，一次或一次也没有</td>
</tr>
<tr>
<td align="center">X*</td>
<td align="center">X，零次或多次</td>
</tr>
<tr>
<td align="center">X+</td>
<td align="center">X，一次或多次</td>
</tr>
<tr>
<td align="center">X{n}</td>
<td align="center">X，恰好 n 次</td>
</tr>
<tr>
<td align="center">X{n,}</td>
<td align="center">X，至少 n 次</td>
</tr>
<tr>
<td align="center">X{n,m}</td>
<td align="center">X，至少 n 次，但是不超过 m 次</td>
</tr>
<tr>
<td align="center">^</td>
<td align="center">开始</td>
</tr>
<tr>
<td align="center">$</td>
<td align="center">结束</td>
</tr>
</tbody></table>
<h4 id="Global-全局对象"><a href="#Global-全局对象" class="headerlink" title="Global:全局对象"></a>Global:全局对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Global中封装的方法不需要对象就可以直接调用</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方法：</p>
<ol>
<li>encodeURI()：url编码</li>
<li>decodeURI()：url解码</li>
<li>encodeURIComponent()：url编码（编码的字符范围更大）</li>
<li>decodeURIComponent()：url解码</li>
<li>parseInt()：将字符串转为数字（逐一判断每一个字符是否是数字，直到不是数字为止，将前边数字部分转为number）</li>
<li>isNaN()：判断一个值是否是NaN（NaN六亲不认，连自己都不认。NaN参与的==比较全部问false）</li>
<li>eval()：将一个字符串转换为JS代码，并把它作为脚本代码来执行</li>
</ol>
</blockquote>
<h3 id="10-BOM"><a href="#10-BOM" class="headerlink" title="10. BOM"></a>10. BOM</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Browser Object Model 浏览器对象模型：将浏览器的各个组成部分封装成为对象</span><br></pre></td></tr></table></figure>

<h4 id="Window-窗口对象"><a href="#Window-窗口对象" class="headerlink" title="Window:窗口对象"></a>Window:窗口对象</h4><blockquote>
<ul>
<li><p>弹出框相关方法：</p>
<ol>
<li>alert()：显示带有一段消息和一个确认按钮的警告框</li>
<li>confirm()：显示带有一段消息以及确认按钮和取消按钮的对话框。<ul>
<li>如果用户点击确定按钮，则方法返回true</li>
<li>如果用户点击取消按钮，则方法返回false</li>
</ul>
</li>
<li>prompt()：显示可提示用户输入的对话框，返回用户输入的值。</li>
</ol>
</li>
<li><p>打开关闭窗口相关方法：</p>
<ol>
<li>close()：关闭调用此方法的浏览器窗口</li>
<li>open()：打开一个新的浏览器窗口，返回新的window对象</li>
</ol>
</li>
<li><p>定时器相关方法：</p>
<ol>
<li><p>setTimeout(js代码或者方法对象，毫秒值)：在指定的毫秒数后调用函数或计算表达式</p>
<p>   返回值：唯一标识，用于取消定时器</p>
</li>
<li><p>clearTimeout()：取消由 setTimeout() 方法设置的 timeout</p>
</li>
<li><p>setInterval()：按照指定的周期（以毫秒计）来调用函数或计算表达式</p>
</li>
<li><p>clearInterval()：取消由 setInterval() 设置的 timeout</p>
</li>
</ol>
</li>
</ul>
</blockquote>
<blockquote>
<p><strong>注意</strong>：Window可以获取其他BOM对象【history/location/navigator/screen】，DOM对象【document】。</p>
<p>Window对象不需要创建可以直接使用，window.方法名()，且window本身可省略</p>
</blockquote>
<h4 id="Location-地址栏对象"><a href="#Location-地址栏对象" class="headerlink" title="Location:地址栏对象"></a>Location:地址栏对象</h4><blockquote>
<ul>
<li>方法：reload()：重新加载当前文档，同刷新</li>
</ul>
</blockquote>
<h4 id="History-历史记录对象"><a href="#History-历史记录对象" class="headerlink" title="History:历史记录对象"></a>History:历史记录对象</h4><blockquote>
<ul>
<li>方法：<ol>
<li>back()：加载 history 列表中的前一个 URL</li>
<li>forward()：加载 history 列表中的下一个 URL</li>
<li>go(参数)：加载 history 列表中的某个具体页面（参数：前进(正数)或后退(负数)几个历史记录）</li>
<li>length：返回当前窗口历史列表中的 URL 数量。</li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="Navigator-浏览器对象"><a href="#Navigator-浏览器对象" class="headerlink" title="Navigator:浏览器对象"></a>Navigator:浏览器对象</h4><h4 id="Screen-显示器屏幕对象"><a href="#Screen-显示器屏幕对象" class="headerlink" title="Screen:显示器屏幕对象"></a>Screen:显示器屏幕对象</h4><h3 id="11-DOM"><a href="#11-DOM" class="headerlink" title="11. DOM"></a>11. DOM</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Document Object Model 文档对象模型：将标记语言文档的各个组成部分封装为对象。可以使用这些对象对标记语言文档进行CRUD的动态操作。</span><br><span class="line">W3C标准中，DOM被分为三个不同的部分：</span><br><span class="line">1. 核心DOM -针对任何结构化文档的标准模型</span><br><span class="line">2. XML DOM -针对XML文档的标准模型</span><br><span class="line">3. HTML DOM -针对HTML文档的标准模型</span><br></pre></td></tr></table></figure>

<h4 id="Document-文档对象"><a href="#Document-文档对象" class="headerlink" title="Document:文档对象"></a>Document:文档对象</h4><blockquote>
<ul>
<li>获取：在HTML DOM模型中可以通过window对象来获取</li>
<li>获取Element对象方法：<ol>
<li>getElementBy<strong>Id</strong>()：根据id属性值获取元素对象。</li>
<li>getElementsBy<strong>TagName</strong>()：根据标签名称获取元素对象们，返回值是一个数组</li>
<li>getElementsBy<strong>ClassName</strong>()：根据Class属性值获取元素对象们，返回值是一个数组</li>
<li>getElementsBy<strong>Name</strong>()：根据name属性值获取元素对象们，返回值是一个数组</li>
</ol>
</li>
<li>创建其他DOM对象方法：<ol>
<li>createAttribute(name)：创建Attribute属性对象</li>
<li>createComment()：创建Comment注释对象</li>
<li>createElement()：创建Element元素对象</li>
<li>createTextNode()：创建Text文本对象</li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="Element-元素对象"><a href="#Element-元素对象" class="headerlink" title="Element:元素对象"></a>Element:元素对象</h4><blockquote>
<ul>
<li>属性：<ol>
<li>previousSibling：获取该元素的前一个节点</li>
<li>nextSibling：获取该元素的后一个节点</li>
<li>innerHTML：可以获取标签内所有的内容，包括标签</li>
<li>innerText：可以获取标签内所有的文本内容，不包括标签</li>
</ol>
</li>
<li>方法：<ol>
<li>removeAttribute()：删除属性</li>
<li>setAttribute()：设置属性</li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="Node-节点对象"><a href="#Node-节点对象" class="headerlink" title="Node:节点对象"></a>Node:节点对象</h4><blockquote>
<ul>
<li>特点：所有dom对象都可以被认为是一个节点</li>
<li>属性：parentNode 返回节点的父节点</li>
<li>方法：<ol>
<li>appendChild()：向节点的子节点列表的结尾添加新的子节点。</li>
<li>removeChild()：删除（并返回）当前节点的指定子节点。</li>
<li>replaceChild()：用新节点替换一个子节点。</li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="Attribute-属性对象"><a href="#Attribute-属性对象" class="headerlink" title="Attribute:属性对象"></a>Attribute:属性对象</h4><h4 id="Text-文本对象"><a href="#Text-文本对象" class="headerlink" title="Text:文本对象"></a>Text:文本对象</h4><h4 id="Comment-注释对象"><a href="#Comment-注释对象" class="headerlink" title="Comment:注释对象"></a>Comment:注释对象</h4><h3 id="12-事件监听机制"><a href="#12-事件监听机制" class="headerlink" title="12. 事件监听机制"></a>12. 事件监听机制</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">概念：某些组件（按钮，文本输入框...）被执行了某些操作（单击，双击，键盘按下，鼠标移动...）后，触发某些代码的执行。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>常见的事件：</p>
<ol>
<li><p>点击事件：</p>
<ul>
<li>onclick：单击事件</li>
<li>ondblclick：双击事件</li>
</ul>
</li>
<li><p>焦点事件：（input框里面有光标的时候，叫获取焦点）</p>
<ul>
<li>onblur：失去焦点</li>
<li>onfocus：元素获得焦点</li>
</ul>
</li>
<li><p>加载事件：</p>
<ul>
<li><p>onload：在页面当中所有的内容加载完之后触发，常作为入口函数</p>
<p><code>window.onload = function(){}</code></p>
</li>
</ul>
</li>
<li><p>鼠标事件：</p>
<ul>
<li>onmousedown    鼠标按钮被按下</li>
<li>onmouseup         鼠标按键被松开</li>
<li>onmousemove    鼠标被移动</li>
<li>onmouseover      鼠标移到某元素之上</li>
<li>onmouseout        鼠标从某元素移开</li>
</ul>
</li>
<li><p>键盘事件：</p>
<ul>
<li>onkeydown    某个键盘按键被按下</li>
<li>onkeyup         某个键盘按键被松开</li>
<li>onkeypress    某个键盘按键被按下并松开</li>
</ul>
</li>
<li><p>选择和改变：</p>
<ul>
<li>onchange    域的内容被改变。失焦后触发</li>
<li>onselect       文本被选中</li>
</ul>
</li>
<li><p>表单事件：</p>
<ul>
<li>onsubmit    确认按钮被点击</li>
<li>onreset         重置按钮被点击</li>
</ul>
</li>
</ol>
</blockquote>
<h3 id="13-综合案例"><a href="#13-综合案例" class="headerlink" title="13. 综合案例"></a>13. 综合案例</h3><h4 id="动态表格"><a href="#动态表格" class="headerlink" title="动态表格"></a>动态表格</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>动态表格<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">style</span>&gt;</span></span><br><span class="line">        table&#123;</span><br><span class="line">            border: 1px solid;</span><br><span class="line">            margin: auto;</span><br><span class="line">            width: 500px;</span><br><span class="line">        &#125;</span><br><span class="line">        td,th&#123;</span><br><span class="line">            text-align: center;</span><br><span class="line">            border: 1px solid;</span><br><span class="line">        &#125;</span><br><span class="line">        div&#123;</span><br><span class="line">            text-align: center;</span><br><span class="line">            margin: 50px;</span><br><span class="line">        &#125;</span><br><span class="line">    <span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">div</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"id"</span> <span class="attr">placeholder</span>=<span class="string">"请输入编号"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"name"</span>  <span class="attr">placeholder</span>=<span class="string">"请输入姓名"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">id</span>=<span class="string">"gender"</span>  <span class="attr">placeholder</span>=<span class="string">"请输入性别"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"添加"</span> <span class="attr">id</span>=<span class="string">"btn_add"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">table</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">caption</span>&gt;</span>学生信息表<span class="tag">&lt;/<span class="name">caption</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">tr</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>编号<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>姓名<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>性别<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">th</span>&gt;</span>操作<span class="tag">&lt;/<span class="name">th</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">tr</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">table</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">//给添加按钮绑定单击事件</span><br><span class="line">document.getElementById("btn_add").onclick = function () &#123;</span><br><span class="line">	//获取文本框内容</span><br><span class="line">    var id = document.getElementById("id").value;</span><br><span class="line">    var name = document.getElementById("name").value;</span><br><span class="line">    var gender = document.getElementById("gender").value;</span><br><span class="line">    //将输入的内容添加到表格    </span><br><span class="line">	var table = document.getElementsByTagName("table")[0];</span><br><span class="line"><span class="xml">	table.innerHTML += '<span class="tag">&lt;<span class="name">tr</span>&gt;</span>\n' +'<span class="tag">&lt;<span class="name">td</span>&gt;</span>'+ id +'<span class="tag">&lt;/<span class="name">td</span>&gt;</span>\n' +</span></span><br><span class="line"><span class="xml">		'<span class="tag">&lt;<span class="name">td</span>&gt;</span>'+ name +'<span class="tag">&lt;/<span class="name">td</span>&gt;</span>\n' +'<span class="tag">&lt;<span class="name">td</span>&gt;</span>'+ gender +'<span class="tag">&lt;/<span class="name">td</span>&gt;</span>\n' +</span></span><br><span class="line"><span class="xml">		'<span class="tag">&lt;<span class="name">td</span>&gt;</span><span class="tag">&lt;<span class="name">a</span> <span class="attr">href</span>=<span class="string">"javascript:void(0)"</span> <span class="attr">onclick</span>=<span class="string">"delTr(this)"</span>&gt;</span>删除<span class="tag">&lt;/<span class="name">a</span>&gt;</span><span class="tag">&lt;/<span class="name">td</span>&gt;</span>\n' +'<span class="tag">&lt;/<span class="name">tr</span>&gt;</span>';</span></span><br><span class="line">&#125;</span><br><span class="line">//定义删除方法</span><br><span class="line">function delTr(obj) &#123;  //节点关系：a -&gt; td -&gt; tr -&gt; table</span><br><span class="line">	var table = obj.parentNode.parentNode.parentNode;</span><br><span class="line">	var tr = obj.parentNode.parentNode;</span><br><span class="line">	table.removeChild(tr);</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="表单校验"><a href="#表单校验" class="headerlink" title="表单校验"></a>表单校验</h4><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line">// 校验name的方法</span><br><span class="line">function checkName() &#123;</span><br><span class="line">	var name = document.getElementById("name").value;</span><br><span class="line">	var flag = /^[a-zA-Z]&#123;1,12&#125;$/.test(name);</span><br><span class="line">	var name_add = document.getElementById("span_name");</span><br><span class="line">	if(flag) &#123;</span><br><span class="line"><span class="xml">		name_add.innerHTML = "<span class="tag">&lt;<span class="name">img</span> <span class="attr">height</span> = <span class="string">'25'</span> <span class="attr">width</span> = <span class="string">'35'</span> " +"<span class="attr">src</span> = <span class="string">'img/gou.png'</span>&gt;</span>"</span></span><br><span class="line">	&#125;else&#123;</span><br><span class="line">		name_add.innerHTML = "姓名格式有误";</span><br><span class="line">	&#125;</span><br><span class="line">	return flag;</span><br><span class="line">&#125;</span><br><span class="line"><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!--表单校验的第一种方式--&gt;</span></span><br><span class="line">var form = document.getElementById("form");</span><br><span class="line">form.onsubmit = checkName;</span><br><span class="line"><span class="comment">&lt;!--表单校验的第二种方式--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"#"</span> <span class="attr">id</span>=<span class="string">"form"</span> <span class="attr">onsubmit</span>=<span class="string">"return checkName()"</span>&gt;</span></span><br><span class="line">    ...</span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h3 id="14-Bootstrap"><a href="#14-Bootstrap" class="headerlink" title="14. Bootstrap"></a>14. Bootstrap</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一个前端开发的响应式布局框架，基于HTML、CSS、JavaScript开发，简洁灵活，使得 Web 开发更加快捷。</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--快速入门：导入Bootstrap文件和jQuery包，创建html页面，引入必要的资源文件： --&gt;</span></span><br><span class="line"><span class="meta">&lt;!DOCTYPE html&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">"zh-CN"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"utf-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">"X-UA-Compatible"</span> <span class="attr">content</span>=<span class="string">"IE=edge"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">"viewport"</span> <span class="attr">content</span>=<span class="string">"width=device-width, initial-scale=1"</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 上述3个meta标签*必须*放在最前面，任何其他内容都必须跟随其后！ --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>Index<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- Bootstrap --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">link</span> <span class="attr">href</span>=<span class="string">"css/bootstrap.min.css"</span> <span class="attr">rel</span>=<span class="string">"stylesheet"</span>&gt;</span></span><br><span class="line"></span><br><span class="line">    <span class="comment">&lt;!-- jQuery (necessary for Bootstrap's JavaScript plugins) --&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Bootstrap中js插件都是依赖于jquery的，要第一步引入--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/jquery-3.2.1.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- Include all compiled plugins (below), or include individual files as needed --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span>=<span class="string">"js/bootstrap.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">h1</span>&gt;</span>Hello World！<span class="tag">&lt;/<span class="name">h1</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h4 id="响应式布局"><a href="#响应式布局" class="headerlink" title="响应式布局"></a>响应式布局</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">响应式布局可以使同一套页面兼容不同分辨率的设备。</span><br><span class="line">实现方式依赖于栅格系统：将一行平均分成12个格子，可以指定元素占几个格子。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>实现步骤：</p>
<ol>
<li><p>定义容器：作用相当于&lt; table&gt;，样式：&lt; div&gt;</p>
<p>容器分类：1. container：两边留白；     2. container-fluid：每一种设备都是100%宽度</p>
</li>
<li><p>定义行：作用相当于&lt; tr&gt;，样式：&lt; row&gt;</p>
</li>
<li><p>定义元素：指定元素使用的设备和格子数目，样式：col-设备代号-格子数目</p>
<p>设备代号：</p>
<ul>
<li>xs：超小屏幕 手机 (&lt;768px)</li>
<li>sm：小屏幕 平板 (≥768px)</li>
<li>md：中等屏幕 桌面显示器 (≥992px)</li>
<li>lg：大屏幕 大桌面显示器 (≥1200px)</li>
</ul>
</li>
</ol>
<p>注意：</p>
<ol>
<li>一行中如果格子数目超过12，则超出部分自动换行</li>
<li>栅格类属性可以向上兼容，小尺寸设备代号兼容大尺寸设备显示</li>
<li>如果设备真实宽度小于栅格指定的设备代码的临界值，会一个元素占满一整行</li>
</ol>
</blockquote>
<h3 id="15-JQuery"><a href="#15-JQuery" class="headerlink" title="15. JQuery"></a>15. JQuery</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jQuery是一个快速、简洁的JavaScript框架，封装JavaScript常用的功能代码，提供一种简便的JavaScript设计模式，优化HTML文档操作、事件处理、动画设计和Ajax交互，本质上就是一些js文件。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>JQuery对象和JS对象方法不通用，需要转换：</p>
<ul>
<li>jq – &gt; js：jq对象[索引] 或者 jq对象.get(索引)</li>
<li>js – &gt; jq：$(js对象)</li>
</ul>
<p><strong>入口函数：</strong><code>$(function(){});</code> 与window.onload不同，可以定义多次</p>
<p><strong>样式控制：</strong><code>$(&quot;#div1&quot;).css(&quot;backgroundColor&quot;,&quot;pink&quot;);</code></p>
</blockquote>
<h4 id="选择器操作"><a href="#选择器操作" class="headerlink" title="选择器操作"></a>选择器操作</h4><blockquote>
<ul>
<li>基本选择器<ol>
<li>标签选择器(元素选择器)：<code>$(&quot;html标签名&quot;)</code>获得所有匹配标签名称的元素</li>
<li>id选择器：<code>$(&quot;#id的属性值&quot;)</code>获得与指定id属性值匹配的元素</li>
<li>类选择器：<code>$(&quot;.class的属性值&quot;)</code> 获得与指定的class属性值匹配的元素</li>
<li>并集选择器：<code>$(&quot;选择器1,选择器2....&quot;)</code>获取多个选择器选中的所有元素</li>
</ol>
</li>
<li>层级选择器<ol>
<li>后代选择器：<code>$(&quot;A B&quot;)</code> 选择A元素内部的所有B元素        </li>
<li>子选择器：<code>$(&quot;A &gt; B&quot;)</code> 选择A元素内部的所有B子元素</li>
</ol>
</li>
<li>属性选择器<ol>
<li>属性名称选择器：<code>$(&quot;A[属性名]&quot;)</code> 包含指定属性的选择器</li>
<li>属性选择器：<code>$(&quot;A[属性名=&#39;值&#39;]&quot;)</code> 包含指定属性等于指定值的选择器</li>
<li>复合属性选择器：<code>$(&quot;A[属性名=&#39;值&#39;][]...&quot;)</code>包含多个属性条件的选择器</li>
</ol>
</li>
<li>过滤选择器<ol>
<li>首元素选择器：<code>first</code> 获得选择的元素中的第一个元素</li>
<li>尾元素选择器：<code>last</code> 获得选择的元素中的最后一个元素</li>
<li>非元素选择器：<code>not(selector)</code> 不包括指定内容的元素</li>
<li>偶数选择器：<code>even</code> 偶数，从 0 开始计数</li>
<li>奇数选择器：<code>odd</code> 奇数，从 0 开始计数</li>
<li>等于索引选择器：<code>eq(index)</code> 指定索引元素</li>
<li>大于索引选择器：<code>gt(index)</code> 大于指定索引元素</li>
<li>小于索引选择器：<code>t(index)</code>小于指定索引元素</li>
<li>标题选择器：<code>header</code> 获得标题（h1~h6）元素，固定写法</li>
</ol>
</li>
<li>表单过滤选择器<ol>
<li>可用元素选择器：<code>enabled</code>获得可用元素</li>
<li>不可用元素选择器：<code>disabled</code> 获得不可用元素</li>
<li>选中选择器：<code>checked</code> 获得单选/复选框选中的元素</li>
<li>选中选择器：<code>selected</code> 获得下拉框选中的元素</li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="DOM操作"><a href="#DOM操作" class="headerlink" title="DOM操作"></a>DOM操作</h4><blockquote>
<ul>
<li>内容操作<ol>
<li><code>html()</code>：获取/设置元素的标签体内容    <code>&lt;a&gt;&lt;font&gt;内容&lt;/font&gt;&lt;/a&gt; --&gt; &lt;font&gt;内容&lt;/font&gt;</code></li>
<li><code>text()</code>：获取/设置元素的标签体纯文本内容     <code>&lt;a&gt;&lt;font&gt;内容&lt;/font&gt;&lt;/a&gt; --&gt; 内容</code></li>
<li><code>val()</code>：获取/设置元素的value属性值</li>
</ol>
</li>
<li>属性操作<ol>
<li><code>attr()</code>：获取/设置元素的属性（偏向操作元素的固有属性）</li>
<li><code>removeAttr()</code>：删除属性</li>
<li><code>prop()</code>：获取/设置元素的属性（偏向操作元素自定义的属性）</li>
<li><code>removeProp()</code>：删除属性</li>
<li><code>addClass()</code>：添加class属性值（并且保留原class属性）</li>
<li><code>removeClass()</code>：删除class属性值</li>
<li><code>toggleClass()</code>：切换class属性（若对象已有要切换的class属性，则删除；不存在则添加）</li>
<li><code>css()</code>：操作对象的css样式</li>
</ol>
</li>
<li>CRUD操作<ol>
<li><code>A.append(B)</code>：对象A将对象B追加到自己元素内部的末尾</li>
<li><code>A.appendTo(B)</code>：对象A将自己添加到对象B元素内部的末尾</li>
<li><code>A.prepend(B)</code>：对象A将对象B追加到自己元素内部的开头</li>
<li><code>A.prependTo(B)</code>：对象A将自己追加到对象B元素内部的开头</li>
<li><code>A.after(B)</code>：对象A将对象B添加到自己后边，对象A和对象B是兄弟关系</li>
<li><code>A.before(B)</code>：对象A将对象B添加到自己前边，对象A和对象B是兄弟关系</li>
<li><code>A.insertAfter(B)</code>：对象A将自己添加到对象B后边，对象A和对象B是兄弟关系</li>
<li><code>A.before(B)</code>：对象A将自己添加到对象B前边，对象A和对象B是兄弟关系</li>
<li><code>A.remove()</code>：将对象A删除掉，也可以添加一个参数，删除指定标签内部的某个标签</li>
<li><code>A.empty()</code>：将对象A的后代元素全部清空，但是保留当前对象以及其属性节点</li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="高级操作"><a href="#高级操作" class="headerlink" title="高级操作"></a>高级操作</h4><blockquote>
<ul>
<li><p>动画操作</p>
<ul>
<li>默认显示和隐藏方式<ol>
<li><code>show([speed,[easing],[fn]])</code></li>
<li><code>hide([speed,[easing],[fn]])</code></li>
<li><code>toggle([speed],[easing],[fn])</code></li>
</ol>
</li>
<li>滑动显示和隐藏方式<ol>
<li><code>slideDown([speed],[easing],[fn])</code></li>
<li><code>slideUp([speed,[easing],[fn]])</code></li>
<li><code>slideToggle([speed],[easing],[fn])</code></li>
</ol>
</li>
<li>淡入淡出显示和隐藏方式<ol>
<li><code>fadeIn([speed],[easing],[fn])</code></li>
<li><code>fadeOut([speed],[easing],[fn])</code></li>
<li><code>fadeToggle([speed,[easing],[fn]])</code></li>
</ol>
</li>
<li>三个参数含义：<ol>
<li>speed：表示动画时长的毫秒数，或三个预定义的值(slow,normal, fast)</li>
<li>easing：用来指定切换效果，默认是swing(慢&gt;快&gt;慢)，可用参数linear(匀速)</li>
<li>fn：在动画完成时执行的函数，每个元素执行一次</li>
</ol>
</li>
</ul>
</li>
<li><p>遍历操作</p>
<ul>
<li>jq对象.each(callback)：<code>citys.each(function(index,element) {});</code></li>
<li>$.each(object, [callback])：<code>JQuery.each(citys,function(index,element) {});</code></li>
<li>for…of：<code>for(city of citys) {};</code>    （jquery 3.0 版本之后提供的方式）</li>
</ul>
</li>
<li><p>事件绑定</p>
<ul>
<li><p>标准绑定：jq对象.事件方法(回调函数)；</p>
</li>
<li><p>绑定事件：jq对象.on(“事件名称”,回调函数)</p>
</li>
<li><p>解除绑定：jq对象.off(“事件名称”)</p>
</li>
<li><p>事件切换：jq对象.toggle(fn1,fn2…)    （通过单击循环切换方法）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt;     1.9版本中.toggle() 方法删除，JQuery Migrate（迁移）插件可以恢复此功能。</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>插件操作</p>
<ul>
<li><p><code>$.fn.extend(object)</code>：增强JQuery的对象的功能</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;     $.fn.extend(&#123;</span><br><span class="line">&gt;         check:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&gt;        		<span class="keyword">this</span>.prop(<span class="string">"checked"</span>, <span class="literal">true</span>);</span><br><span class="line">&gt;         &#125;,</span><br><span class="line">&gt;         uncheck:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">&gt;         	<span class="keyword">this</span>.prop(<span class="string">"checked"</span>, <span class="literal">false</span>);</span><br><span class="line">&gt;         &#125;</span><br><span class="line">&gt;     &#125;)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p><code>$.extend(object)</code>：增强JQuery全局的功能</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;      $.extend(&#123;</span><br><span class="line">&gt;          max: <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">&gt;          	<span class="keyword">return</span> a &gt; b ? a : b;</span><br><span class="line">&gt;          &#125;,</span><br><span class="line">&gt;         min: <span class="function"><span class="keyword">function</span> (<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">&gt;         	<span class="keyword">return</span> a &lt; b ? a : b;</span><br><span class="line">&gt;         &#125;</span><br><span class="line">&gt;     &#125;)</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h3 id="16-AJAX"><a href="#16-AJAX" class="headerlink" title="16. AJAX"></a>16. AJAX</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ASynchronous JavaScript And XML，可以使网页实现异步更新的技术，在服务器处理请求的过程中，客户端可以不需要等待服务器端的响应，进行其他的操作。这意味着可以在不重新加载整个网页的情况下，对网页的部分进行更新。</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">JQuery实现方式：</span><br><span class="line"><span class="comment">//1.使用$.ajax()发送异步请求</span></span><br><span class="line">$.ajax(&#123;</span><br><span class="line">	url:<span class="string">"ajaxServlet"</span>, <span class="comment">// 请求路径</span></span><br><span class="line">    type:<span class="string">"POST"</span>, <span class="comment">//请求方式</span></span><br><span class="line">    data:&#123;<span class="string">"username"</span>:<span class="string">"jack"</span>,<span class="string">"age"</span>:<span class="number">23</span>&#125;, <span class="comment">//请求参数</span></span><br><span class="line">    success:<span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;	<span class="comment">//响应成功后的回调函数</span></span><br><span class="line">        alert(data);</span><br><span class="line">    &#125;,</span><br><span class="line">    error:<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;	<span class="comment">//若响应失败的回调函数</span></span><br><span class="line">        alert(<span class="string">"出错啦..."</span>)</span><br><span class="line">    &#125;,</span><br><span class="line">    dataType:<span class="string">"text"</span><span class="comment">//设置接受到的响应数据的格式</span></span><br><span class="line">&#125;);</span><br><span class="line"><span class="comment">//2. $.get()：发送get请求</span></span><br><span class="line">语法：$.<span class="keyword">get</span>(url, [data], [callback], [type])</span><br><span class="line">参数：url：请求路径；data：请求参数；callback：回调函数；type：响应结果的类型；</span><br><span class="line">//3. $.post()：发送post请求  </span><br><span class="line">方法同$.<span class="keyword">get</span>()</span><br></pre></td></tr></table></figure>

<h3 id="17-JSON"><a href="#17-JSON" class="headerlink" title="17. JSON"></a>17. JSON</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">JavaScript Object Notation，JavaScript的对象表示法，多用于存储和交换文本信息的语法，进行数据传输</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>基本规则</strong>：<code>var p = {&quot;name&quot;:&quot;张三&quot;,&quot;age&quot;:23,&quot;gender&quot;:&quot;男&quot;};</code></p>
<ul>
<li>JSON数据由键值对构成，键可以用单引号、双引号包裹，也可以不使用引号</li>
<li>值的取值类型有六种：<ol>
<li>数字（整数或浮点数）</li>
<li>字符串（在双引号中）</li>
<li>逻辑值（true 或 false）</li>
<li>数组（在方括号中）    {“persons”:[{},{}]}</li>
<li>对象（在花括号中） {“address”:{“province”：”陕西”….}}</li>
<li>null</li>
</ol>
</li>
<li>数据由逗号分隔：多个键值对由逗号分隔</li>
<li>花括号保存对象：使用{}定义json 格式</li>
<li>方括号保存数组：[]</li>
</ul>
<p><strong>获取数据</strong></p>
<ul>
<li>json对象.键名</li>
<li>json对象[“键名”]</li>
<li>数组对象[索引]</li>
</ul>
<p><strong>注解</strong></p>
<ul>
<li>@JsonIgnore：排除属性，用于JavaBean成员变量上</li>
<li>@JsonFormat：属性值的格式化     <code>@JsonFormat(pattern = &quot;yyyy-MM-dd&quot;)</code></li>
</ul>
</blockquote>
<h4 id="JSON数据和Java对象的相互转换"><a href="#JSON数据和Java对象的相互转换" class="headerlink" title="JSON数据和Java对象的相互转换"></a>JSON数据和Java对象的相互转换</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">常见的JSON解析器：Jsonlib，Gson，fastjson，jackson</span><br><span class="line"><span class="number">1</span>. 导入jackson的相关jar包</span><br><span class="line"><span class="number">2</span>. 创建Jackson核心对象 ObjectMapper</span><br><span class="line"><span class="number">3</span>. 调用ObjectMapper的相关方法进行转换</span><br><span class="line"><span class="comment">//将JSON数转换为java对象据：</span></span><br><span class="line">Object obj = mapper.readValue(json, Object.class);</span><br><span class="line"><span class="comment">//将java对象转换为JSON数据：</span></span><br><span class="line">String json = mapper.writeValueAsString(obj);<span class="comment">//将obj对象转换为JSON字符串</span></span><br><span class="line">mapper.writeValue(<span class="keyword">new</span> File(<span class="string">"C://a.txt"</span>),obj);<span class="comment">//将obj对象转换为JSON字符串，并保存到指定的文件中</span></span><br><span class="line">mapper.writeValue(response.getWriter(), obj);<span class="comment">//将obj对象转换为JSON字符串，并响应至请求来源处</span></span><br></pre></td></tr></table></figure>

<h3 id="18-案例展示：用户名检验"><a href="#18-案例展示：用户名检验" class="headerlink" title="18. 案例展示：用户名检验"></a>18. 案例展示：用户名检验</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Servlet代码</span></span><br><span class="line"><span class="meta">@WebServlet</span>(<span class="string">"/findUserServlet"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FindUserServlet</span> <span class="keyword">extends</span> <span class="title">HttpServlet</span> </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doPost</span><span class="params">(...)</span> <span class="keyword">throws</span> IOException </span>&#123;</span><br><span class="line">        request.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">        response.setContentType(<span class="string">"application/json;charset=utf-8"</span>);</span><br><span class="line"></span><br><span class="line">        String username = request.getParameter(<span class="string">"username"</span>);</span><br><span class="line">        User user = UserDao.username_check(username);</span><br><span class="line">        HashMap&lt;String, Object&gt; map = <span class="keyword">new</span> HashMap&lt;&gt;();</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            map.put(<span class="string">"userExist"</span>, <span class="keyword">true</span>);</span><br><span class="line">            map.put(<span class="string">"msg"</span>, <span class="string">"该用户名已存在"</span>);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            map.put(<span class="string">"userExist"</span>, <span class="keyword">false</span>);</span><br><span class="line">            map.put(<span class="string">"msg"</span>, <span class="string">"该用户名可用"</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//将map转为JSON，并传给客户端</span></span><br><span class="line">        ObjectMapper mapper = <span class="keyword">new</span> ObjectMapper();</span><br><span class="line">        mapper.writeValue(response.getWriter(), map);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--html代码--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">"UTF-8"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">title</span>&gt;</span>注册页面<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span> <span class="attr">src</span> = <span class="string">"js/jquery-3.3.1.min.js"</span>&gt;</span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="javascript">    $(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span></span><br><span class="line"><span class="javascript">        $(<span class="string">"#username"</span>).blur(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;	<span class="comment">//为username绑定失焦事件</span></span></span><br><span class="line"><span class="javascript">            <span class="comment">//将username的内容异步传递给findUserServlet进行判断</span></span></span><br><span class="line"><span class="javascript">            <span class="keyword">var</span> username = $(<span class="keyword">this</span>).val();</span></span><br><span class="line"><span class="javascript">            $.<span class="keyword">get</span>(</span></span><br><span class="line"><span class="javascript">                <span class="string">"findUserServlet"</span>,</span></span><br><span class="line">                &#123;username:username&#125;,</span><br><span class="line"><span class="javascript">                <span class="comment">//data接收mapper.writeValue(response.getWriter(), map)响应的JSON</span></span></span><br><span class="line"><span class="javascript">                <span class="function"><span class="keyword">function</span> (<span class="params">data</span>) </span>&#123;  </span></span><br><span class="line"><span class="javascript">                    <span class="keyword">if</span>(data.userExist) &#123;	<span class="comment">//用户名存在</span></span></span><br><span class="line"><span class="javascript">                        $(<span class="string">"#user_check"</span>).html(data.msg);</span></span><br><span class="line"><span class="javascript">                    &#125;<span class="keyword">else</span> &#123;		<span class="comment">//用户名不存在</span></span></span><br><span class="line"><span class="javascript">                        $(<span class="string">"#user_check"</span>).html(data.msg);</span></span><br><span class="line">	&#125;&#125;)&#125;);&#125;)</span><br><span class="line">    <span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"username"</span> <span class="attr">id</span>=<span class="string">"username"</span> <span class="attr">placeholder</span>=<span class="string">"请输入用户名"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">span</span> <span class="attr">id</span>=<span class="string">"user_check"</span>&gt;</span><span class="tag">&lt;/<span class="name">span</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"password"</span> <span class="attr">id</span>=<span class="string">"password"</span> <span class="attr">placeholder</span>=<span class="string">"请输入密码"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">br</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"button"</span> <span class="attr">value</span>=<span class="string">"提交"</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/16/数据库知识点总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric">
      <meta itemprop="description" content="Eric's Knowledge Base">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Space">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/06/16/数据库知识点总结/" class="post-title-link" itemprop="url">数据库</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-06-16 09:46:37 / Geändert am: 09:55:19" itemprop="dateCreated datePublished" datetime="2019-06-16T09:46:37+08:00">2019-06-16</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="数据库知识点总结"><a href="#数据库知识点总结" class="headerlink" title="数据库知识点总结"></a>数据库知识点总结</h1><h3 id="1-数据库的基本概念"><a href="#1-数据库的基本概念" class="headerlink" title="1. 数据库的基本概念"></a>1. 数据库的基本概念</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">数据库(DataBase,简称:DB)，用于存储和管理数据的仓库。</span><br><span class="line">类比：数据库：文件夹(仓库)；表：文件（货架子）； 数据：数据（货物）。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>数据库的特点：</p>
<ol>
<li>持久化存储数据，数据库就是一个文件系统</li>
<li>方便存储和管理数据</li>
<li>使用了统一的方式操作数据库 – SQL</li>
</ol>
</blockquote>
<h3 id="2-MySQL配置操作"><a href="#2-MySQL配置操作" class="headerlink" title="2. MySQL配置操作"></a>2. MySQL配置操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">服务启动:</span><br><span class="line">	net <span class="keyword">start</span> mysql：启动mysql的服务</span><br><span class="line">	net <span class="keyword">stop</span> mysql：关闭mysql服务</span><br><span class="line">登录:</span><br><span class="line">	mysql -u用户名 -p密码</span><br><span class="line">	mysql -hip地址 -u用户名 -p连接目标的密码</span><br><span class="line">退出:</span><br><span class="line">	<span class="keyword">exit</span>/quit</span><br><span class="line">配置文件 my.ini</span><br></pre></td></tr></table></figure>

<h3 id="3-SQL概念"><a href="#3-SQL概念" class="headerlink" title="3. SQL概念"></a>3. SQL概念</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Structured Query Language：结构化查询语言。</span><br><span class="line">SQL定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>SQL通用语法：</strong></p>
<ol>
<li>SQL 语句可以单行或多行书写，以分号结尾。</li>
<li>可使用空格和缩进来增强语句的可读性。</li>
<li>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</li>
<li>注释：<ul>
<li>单行注释: – 注释内容 或 # 注释内容(mysql 特有) </li>
<li>多行注释: /* 注释 */</li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<p><strong>SQL分类：</strong></p>
<ul>
<li><strong>DDL（Data Definition Language）</strong>数据定义语言：用来定义数据库对象：数据库，表，列等。</li>
<li><strong>DML（Data Manipulation Language）</strong>数据操作语言：用来对数据库中表的数据进行增删改。</li>
<li><strong>DQL（Data Query Language）</strong>数据查询语言：用来查询数据库中表的记录(数据)。</li>
<li><strong>DCL（Data Control Language）</strong>数据控制语言：用来定义数据库的访问权限和安全级别，创建用户。</li>
</ul>
</blockquote>
<h3 id="4-DDL-定义数据库"><a href="#4-DDL-定义数据库" class="headerlink" title="4. DDL 定义数据库"></a>4. DDL 定义数据库</h3><h4 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h4><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>创建</td>
<td>create database <code>数据库名称</code></td>
<td>创建数据库</td>
</tr>
<tr>
<td>创建</td>
<td>create database if not exists <code>数据库名称</code></td>
<td>创建数据库，判断不存在，再创建</td>
</tr>
<tr>
<td>创建</td>
<td>create database <code>数据库名称</code> character set <code>字符集名称</code></td>
<td>创建数据库，并指定字符集</td>
</tr>
<tr>
<td>查询</td>
<td>show databases</td>
<td>查询所有数据库的名称</td>
</tr>
<tr>
<td>查询</td>
<td>show create database <code>数据库名称</code></td>
<td>查询某个数据库的字符集/创建语句</td>
</tr>
<tr>
<td>修改</td>
<td>alter database<code>数据库名称</code> character set <code>字符集名称</code></td>
<td>修改数据库的字符集</td>
</tr>
<tr>
<td>删除</td>
<td>drop database <code>数据库名称</code></td>
<td>删除数据库</td>
</tr>
<tr>
<td>删除</td>
<td>drop database if exists <code>数据库名称</code></td>
<td>判断数据库存在，存在再删除</td>
</tr>
<tr>
<td>使用</td>
<td>select database()</td>
<td>查询当前正在使用的数据库名称</td>
</tr>
<tr>
<td>使用</td>
<td>use <code>数据库名称</code></td>
<td>使用数据库</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>注意：数据库的名称不可修改</strong></p>
</blockquote>
<h4 id="操作表"><a href="#操作表" class="headerlink" title="操作表"></a>操作表</h4><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>创建</td>
<td>create table <code>表名(列名1 数据类型1,....列名n 数据类型n)</code>;</td>
<td>创建一个表</td>
</tr>
<tr>
<td>创建</td>
<td>create table <code>表名</code> like <code>被复制的表名</code></td>
<td>复制表</td>
</tr>
<tr>
<td>查询</td>
<td>show tables</td>
<td>查询某个数据库中所有的表名称</td>
</tr>
<tr>
<td>查询</td>
<td>desc <code>表名</code></td>
<td>查询表结构</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> rename to <code>新的表名</code></td>
<td>修改表名</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> character set <code>字符集名称</code></td>
<td>修改表的字符集</td>
</tr>
<tr>
<td>修改</td>
<td>show create table <code>表名</code></td>
<td>查看表的字符集</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> add <code>列名 数据类型</code></td>
<td>添加一列</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> add <code>列名 数据类型</code> after <code>指定列名</code></td>
<td>在指定的列后添加一列</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> change <code>列名 新列别 新数据类型</code></td>
<td>修改列名称和数据类型</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> modify <code>列名 新数据类型</code></td>
<td>修改数据类型</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> drop <code>列名</code></td>
<td>删除列</td>
</tr>
<tr>
<td>删除</td>
<td>drop table <code>表名</code></td>
<td>删除表</td>
</tr>
<tr>
<td>删除</td>
<td>drop table  if exists <code>表名</code></td>
<td>判断表存在，存在再删除</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>数据类型：</strong></p>
<ol>
<li><strong>int</strong>：整数类型  <code>age int</code></li>
<li><strong>double</strong>：小数类型  <code>score double(5,2)</code></li>
<li><strong>date</strong>：日期，只包含年月日  <code>yyyy-MM-dd</code></li>
<li><strong>datetime</strong>：日期，包含年月日时分秒  <code>yyyy-MM-dd HH:mm:ss</code></li>
<li><strong>timestamp</strong>：时间戳，包含年月日时分秒  <code>yyyy-MM-dd HH:mm:ss</code>（默认使用系统当前时间赋值）    </li>
<li><strong>varchar</strong>：字符串  <code>name varchar(20)</code> （括号里数字为可接收最大字符数）</li>
</ol>
</blockquote>
<h3 id="5-DML-增删改表中数据"><a href="#5-DML-增删改表中数据" class="headerlink" title="5. DML 增删改表中数据"></a>5. DML 增删改表中数据</h3><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>添加</td>
<td>insert into <code>表名</code> values <code>(值1,值2,...值n)</code></td>
<td>给表中每一列赋值</td>
</tr>
<tr>
<td>添加</td>
<td>insert into <code>表名(列名1,列名2,...列名n)</code>values<code>(值1,值2,...值n)</code></td>
<td>选择地给表中某一列赋值</td>
</tr>
<tr>
<td>删除</td>
<td>delete from <code>表名 [where 条件]</code></td>
<td>删除符合条件的记录</td>
</tr>
<tr>
<td>删除</td>
<td>truncate table <code>表名</code></td>
<td>删除整张表</td>
</tr>
<tr>
<td>修改</td>
<td>update <code>表名</code> set <code>列名1 = 值1, 列名2 = 值2,... [where 条件]</code></td>
<td>修改指定列的数据</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>注意：</strong></p>
<ol>
<li>除了数字类型，其他类型需要使用引号(单双都可以)引起来，数值类型加引号也不会报错，但是不推荐加</li>
<li>若要删除整表，推荐使用<code>truncate table</code>，效率高；<code>delete from</code> 内部采用逐个删除，效率低</li>
<li>若要修改多条记录，可以指定条件数据范围<code>in()</code></li>
</ol>
</blockquote>
<h3 id="6-DQL-查询表中记录"><a href="#6-DQL-查询表中记录" class="headerlink" title="6. DQL 查询表中记录"></a>6. DQL 查询表中记录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">	select</span><br><span class="line">		字段列表</span><br><span class="line">	from</span><br><span class="line">		表名列表</span><br><span class="line">	where</span><br><span class="line">		条件列表</span><br><span class="line">	group by</span><br><span class="line">		分组字段</span><br><span class="line">	having</span><br><span class="line">		分组之后的条件</span><br><span class="line">	order by</span><br><span class="line">		排序</span><br><span class="line">	limit</span><br><span class="line">		分页限定</span><br></pre></td></tr></table></figure>

<h4 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h4><blockquote>
<ol>
<li><p>多个字段的查询：<code>select 字段名1，字段名2... from 表名；</code>(*来替代查询所有字段)</p>
</li>
<li><p>去除重复：<code>select</code> <strong>distinct</strong> <code>字段名1，字段名2... from 表名；</code></p>
</li>
<li><p>计算列：一般可以使用四则运算计算一些列的值。（一般只会进行数值型的计算）</p>
</li>
<li><p>null参与的运算，计算结果都为null。<code>ifnull(表达式1,表达式2)：</code></p>
<p>表达式1：需要判断是否为null的字段；表达式2：若该字段为null后的替换值</p>
<ol start="5">
<li>起别名：as（as也可以省略）</li>
</ol>
</li>
</ol>
</blockquote>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><blockquote>
<pre><code> 1. where子句后跟条件
 2. 运算符
 * &lt;&gt; (相当于!=)
 * BETWEEN...AND  
 * IN( 集合) 

3. 模糊查询 LIKE：占位符：`_`：单个任意字符；`%`：多个任意字符（含0个）
4. IS NULL (是否为空，不能用=null判断) ；IS NOT NULL：不为空</code></pre></blockquote>
<h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><blockquote>
<ol>
<li>语法：<code>order by 排序字段1 排序方式1 ，排序字段2 排序方式2...</code></li>
<li>排序方式：ASC：升序，默认的；DESC：降序</li>
<li>如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件</li>
</ol>
</blockquote>
<h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><blockquote>
<p><strong>将一列数据作为一个整体，进行纵向的计算，需要排除null值</strong></p>
<ol>
<li>count：计算个数（<code>count(*)</code>：只要该数据有一列不为空）</li>
<li>max：计算最大值</li>
<li>min：计算最小值</li>
<li>sum：计算和</li>
<li>avg：计算平均值</li>
</ol>
</blockquote>
<h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><blockquote>
<p>语法：group by 分组字段；</p>
<p>要求：查询条件的字段只能是<strong>分组字段</strong>和<strong>聚合函数</strong></p>
</blockquote>
<h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><blockquote>
<ol>
<li><p>语法：limit 要开始显示的索引，每页查询的条数；</p>
</li>
<li><p>公式：开始的索引 = （当前的页码 - 1） * 每页显示的条数</p>
</li>
<li><p>limit 是一个MySQL”方言”</p>
</li>
</ol>
</blockquote>
<blockquote>
<p><strong>where 和 having 的区别？</strong></p>
<ol>
<li>where 在分组之前进行限定，如果不满足条件，则不参与分组；having在分组之后进行限定，如果不满足结果，则不会被查询出来。</li>
<li>where 后不可以跟聚合函数，having可以进行聚合函数的判断。</li>
</ol>
</blockquote>
<h3 id="7-约束"><a href="#7-约束" class="headerlink" title="7. 约束"></a>7. 约束</h3><h4 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">not null，某一列的值不能为null</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>创建表时，添加非空约束：CREATE TABLE stu(id INT,NAME VARCHAR(20) <strong>NOT NULL</strong>);</li>
<li>创建表后，添加非空约束：ALTER TABLE stu MODIFY NAME VARCHAR(20) <strong>NOT NULL</strong>;</li>
<li>删除非空约束：ALTER TABLE stu <strong>MODIFY</strong> NAME VARCHAR(20);</li>
</ol>
</blockquote>
<h4 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unique，某一列的值不能重复，但可以有多个NULL值</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>创建表时，添加唯一约束：CREATE TABLE stu(id INT, NAME VARCHAR(20) <strong>UNIQUE</strong> );</li>
<li>创建表后，添加唯一约束：ALTER TABLE stu MODIFY NAME VARCHAR(20) <strong>UNIQUE</strong>;</li>
<li>删除唯一约束：ALTER TABLE stu <strong>DROP INDEX</strong> NAME;</li>
</ol>
</blockquote>
<h4 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">primary key，非空且唯一，一张表只能有一列的值设为主键，是表中记录的唯一标识，一般是数据无关列</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>创建表时，添加主键约束：CREATE TABLE stu(id INT <strong>PRIMARY KEY</strong>, NAME VACHAR(20));</li>
<li>创建表后，添加主键约束：ALTER TABLE stu MODIFY id INT <strong>PRIMARY KEY</strong>;</li>
<li>删除主键约束：ALTER TABLE stu <strong>DROP PRIMARY KEY</strong>;</li>
<li>主键约束添加自增长：id INT PRIMARY KEY <strong>AUTO_INCREMENT</strong>；</li>
</ol>
</blockquote>
<h4 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foreign key，让表于表产生关系，从而保证数据的正确性</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li><p>创建表时，添加外键约束：</p>
<p><strong>constraint</strong> <code>外键名称</code> <strong>foreign key</strong><code>(外键列名称)</code> <strong>references</strong> <code>主表名称(主键列名称)</code>  <strong>①</strong></p>
<p>外键列名称为<strong>受约束的列</strong>名称，主键列名称为<strong>约束别人的列</strong>名称；</p>
<p>外键名称可以自定义，起到删除时索引的作用 。一般格式：当前表名 _ 外键表名 _ fk</p>
</li>
<li><p>创建表之后，添加外键约束：ALTER TABLE stu ADD + ①</p>
</li>
<li><p>删除外键约束：ALTER TABLE stu DROP FOREIGN KEY <code>外键名称</code>；</p>
</li>
<li><p>级联操作：级联更新：ON UPDATE CASCADE ；级联删除：ON DELETE CASCADE </p>
</li>
</ol>
</blockquote>
<h3 id="8-数据库的设计"><a href="#8-数据库的设计" class="headerlink" title="8. 数据库的设计"></a>8. 数据库的设计</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">1. 一对一：实现方式：一对一关系实现，可以在任意一方添加唯一外键指向另一方的主键。</span><br><span class="line">2. 一对多(多对一)：实现方式：在多的一方建立外键，指向一的一方的主键。</span><br><span class="line">3. 多对多：实现方式：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键。</span><br><span class="line">-- 旅游网案例展示：一个旅游线路分类中有多个旅游线路；一个用户收藏多个线路，一个线路被多个用户收藏。</span><br><span class="line">/*创建旅游线路分类表 tab_category</span><br><span class="line">    cid 旅游线路分类主键，自动增长</span><br><span class="line">    cname 旅游线路分类名称非空，唯一，字符串 100</span><br><span class="line">*/</span><br><span class="line">CREATE TABLE tab_category (</span><br><span class="line">	cid INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	cname VARCHAR(100) UNIQUE NOT NULL</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">/*创建旅游线路表 tab_route</span><br><span class="line">    rid 旅游线路主键，自动增长</span><br><span class="line">    rname 旅游线路名称非空，唯一，字符串 100</span><br><span class="line">    price 价格</span><br><span class="line">    rdate 上架时间，日期类型</span><br><span class="line">    cid 外键，所属分类</span><br><span class="line">*/</span><br><span class="line">CREATE TABLE tab_route(</span><br><span class="line">	rid INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	rname VARCHAR(100) NOT NULL UNIQUE,</span><br><span class="line">	price DOUBLE,</span><br><span class="line">	rdate DATE,</span><br><span class="line">	cid INT,</span><br><span class="line">	FOREIGN KEY (cid) REFERENCES tab_category(cid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">/*创建用户表 tab_user</span><br><span class="line">    uid 用户主键，自增长</span><br><span class="line">    username 用户名长度 100，唯一，非空</span><br><span class="line">    password 密码长度 30，非空</span><br><span class="line">    name 真实姓名长度 100</span><br><span class="line">    birthday 生日</span><br><span class="line">    sex 性别，定长字符串 1</span><br><span class="line">    telephone 手机号，字符串 11</span><br><span class="line">    email 邮箱，字符串长度 100</span><br><span class="line">*/</span><br><span class="line">CREATE TABLE tab_user (</span><br><span class="line">	uid INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	username VARCHAR(100) NOT NULL UNIQUE,</span><br><span class="line">	PASSWORD VARCHAR(30) NOT NULL,</span><br><span class="line">	NAME VARCHAR(100),</span><br><span class="line">	birthday DATE,</span><br><span class="line">	sex CHAR(1) DEFAULT &apos;男&apos;,</span><br><span class="line">	telephone VARCHAR(11),</span><br><span class="line">	email VARCHAR(100)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">/*创建收藏表 tab_favorite</span><br><span class="line">    rid 旅游线路 id，外键</span><br><span class="line">    date 收藏时间</span><br><span class="line">    uid 用户 id，外键</span><br><span class="line">    rid 和 uid 不能重复，设置复合主键，同一个用户不能收藏同一个线路两次</span><br><span class="line">*/</span><br><span class="line">CREATE TABLE tab_favorite (</span><br><span class="line">	rid INT,</span><br><span class="line">	FOREIGN KEY (rid) REFERENCES tab_route(rid),</span><br><span class="line">	DATE DATETIME,</span><br><span class="line">	uid INT,</span><br><span class="line">	FOREIGN KEY (uid) REFERENCES tab_user(uid),</span><br><span class="line">	PRIMARY KEY (rid,uid)  -- 联合主键</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="9-数据库设计范式"><a href="#9-数据库设计范式" class="headerlink" title="9. 数据库设计范式"></a>9. 数据库设计范式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 第一范式（1NF）：每一列都是不可分割的原子数据项</span><br><span class="line">2. 第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除部分函数依赖）</span><br><span class="line">3. 第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）</span><br></pre></td></tr></table></figure>

<blockquote>
<p>几个概念：</p>
<ol>
<li>函数依赖：A–&gt;B，如果通过A属性(属性组)的值，可以确定<strong>唯一</strong>B属性的值，则称B依赖于A。</li>
<li>完全函数依赖：A–&gt;B， 如果A是一个属性组，则B属性值的确定需要依赖于A属性组中<strong>所有</strong>的属性值。</li>
<li>部分函数依赖：A–&gt;B， 如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中<strong>某一些</strong>值即可。</li>
<li>传递函数依赖：A–&gt;B, B – &gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A。</li>
<li>码：一张表中，一个属性或属性组，<strong>被其他所有属性所完全依赖</strong>，则称这个属性(属性组)为该表的码。</li>
</ol>
</blockquote>
<p><strong>第一范式表（1NF）：</strong>原子数据项</p>
<table>
<thead>
<tr>
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
<th>课程名称</th>
<th>分数</th>
</tr>
</thead>
<tbody><tr>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>张三丰</td>
<td>高等数学</td>
<td>95</td>
</tr>
<tr>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>张三丰</td>
<td>大学英语</td>
<td>87</td>
</tr>
<tr>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>张三丰</td>
<td>计算机基础</td>
<td>65</td>
</tr>
<tr>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>任我行</td>
<td>法理学</td>
<td>77</td>
</tr>
<tr>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>任我行</td>
<td>大学英语</td>
<td>87</td>
</tr>
<tr>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>任我行</td>
<td>法律社会学</td>
<td>65</td>
</tr>
<tr>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td>任我行</td>
<td>法律社会学</td>
<td>95</td>
</tr>
<tr>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td>任我行</td>
<td>法理学</td>
<td>97</td>
</tr>
<tr>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td>任我行</td>
<td>大学英语</td>
<td>99</td>
</tr>
</tbody></table>
<blockquote>
<p>存在问题：</p>
<ol>
<li>存在非常严重的数据冗余(重复)：姓名、系名、系主任</li>
<li>数据添加存在问题：添加新开设的系和系主任时，数据不合法</li>
<li>数据删除存在问题：张无忌同学毕业了，删除数据，会将系的数据一起删除。</li>
</ol>
</blockquote>
<p><strong>第二范式表（2NF）：</strong>消除部分函数依赖</p>
<table>
<thead>
<tr>
<th>学号</th>
<th>课程名称</th>
<th>分数</th>
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
</tr>
</thead>
<tbody><tr>
<td>10010</td>
<td>高等数学</td>
<td>95</td>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>张三丰</td>
</tr>
<tr>
<td>10010</td>
<td>大学英语</td>
<td>87</td>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>任我行</td>
</tr>
<tr>
<td>10010</td>
<td>计算机基础</td>
<td>65</td>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td>任我行</td>
</tr>
<tr>
<td>10011</td>
<td>法理学</td>
<td>77</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>大学英语</td>
<td>87</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>法律社会学</td>
<td>65</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>法律社会学</td>
<td>95</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>法理学</td>
<td>97</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>大学英语</td>
<td>99</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><strong>第三范式表（3NF）：</strong>消除传递依赖</p>
<table>
<thead>
<tr>
<th>学号</th>
<th>课程名称</th>
<th>分数</th>
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系名</th>
<th>系主任</th>
</tr>
</thead>
<tbody><tr>
<td>10010</td>
<td>高等数学</td>
<td>95</td>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>经济系</td>
<td>张三丰</td>
</tr>
<tr>
<td>10010</td>
<td>大学英语</td>
<td>87</td>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>法律系</td>
<td>任我行</td>
</tr>
<tr>
<td>10010</td>
<td>计算机基础</td>
<td>65</td>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>法理学</td>
<td>77</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>大学英语</td>
<td>87</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>法律社会学</td>
<td>65</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>法律社会学</td>
<td>95</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>法理学</td>
<td>97</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>大学英语</td>
<td>99</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="10-数据库的备份和还原"><a href="#10-数据库的备份和还原" class="headerlink" title="10. 数据库的备份和还原"></a>10. 数据库的备份和还原</h3><blockquote>
<p> 备份： <code>mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径</code></p>
<p>还原：登录数据库—&gt;创建数据库—&gt;使用数据库—&gt;执行文件 source 文件路径</p>
</blockquote>
<h3 id="11-多表查询"><a href="#11-多表查询" class="headerlink" title="11. 多表查询"></a>11. 多表查询</h3><h4 id="隐式内连接"><a href="#隐式内连接" class="headerlink" title="隐式内连接"></a>隐式内连接</h4><blockquote>
<p>使用where条件消除无用数据：<code>SELECT * FROM emp,dept WHERE emp.dept_id = dept.id</code></p>
</blockquote>
<h4 id="显式内连接"><a href="#显式内连接" class="headerlink" title="显式内连接"></a>显式内连接</h4><blockquote>
<p> 表名1 [inner] join 表名2 on 条件：<code>SELECT * FROM emp INNER JOIN dept ON emp.dept_id= dept.id</code></p>
</blockquote>
<h4 id="外链接查询"><a href="#外链接查询" class="headerlink" title="外链接查询"></a>外链接查询</h4><blockquote>
<p>左外连接：查询左表<strong>所有数据</strong>以及其和右表交集部分</p>
<p>语法：select 字段列表 from 表1 left [outer] join 表2 on 条件</p>
<p>右外连接与左外连接正好相反：select 字段列表 from 表1 right [outer] join 表2 on 条件；</p>
</blockquote>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查询中嵌套查询，称嵌套查询为子查询。</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>子查询的结果是<strong>单行单列</strong>的：子查询可以作为条件，使用运算符去判断。 </li>
<li>子查询的结果是<strong>多行单列</strong>的：子查询可以作为条件，使用in(结果)来判断。</li>
<li>子查询的结果是<strong>多行多列</strong>的：子查询可以作为一张虚拟表参与查询。</li>
</ol>
</blockquote>
<h3 id="12-事务"><a href="#12-事务" class="headerlink" title="12. 事务"></a>12. 事务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>基本操作：</p>
<ol>
<li>开启事务： <code>start transaction;</code></li>
<li>回滚：<code>rollback;</code></li>
<li>提交：<code>commit;</code></li>
</ol>
</blockquote>
<blockquote>
<p>提交方式：</p>
<ul>
<li>自动提交：一条DML(增删改)语句会自动提交一次事务。（mysql）</li>
<li>手动提交：需要先开启事务，再提交。（Oracle）</li>
<li>修改事务的默认提交方式：<ul>
<li>查看事务的默认提交方式：<code>SELECT @@autocommit;</code>  1 代表自动提交，0 代表手动提交</li>
<li>修改默认提交方式： <code>set @@autocommit = 0;</code></li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="四大特征ACID"><a href="#四大特征ACID" class="headerlink" title="四大特征ACID"></a>四大特征ACID</h4><blockquote>
<ol>
<li><strong>原子性Atomic</strong>：是不可分割的最小操作单位，要么同时成功，要么同时失败。</li>
<li><strong>一致性Consistent</strong>：事务操作前后，数据总量不变</li>
<li><strong>隔离性Isolated</strong>：多个事务之间。相互独立。</li>
<li><strong>持久性Duration</strong>：当事务提交或回滚后，数据库会持久化的保存数据。</li>
</ol>
</blockquote>
<h4 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">多个事务之间隔离的，相互独立的。但是如果多个事务操作同一批数据，则会引发一些问题：</span><br><span class="line">1. 脏读：一个事务，读取到另一个事务中没有提交的数据</span><br><span class="line">2. 不可重复读(虚读)：在同一个事务中，两次读取到的数据不一样。</span><br><span class="line">3. 幻读：一个事务操作(DML)数据表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到自己的修改。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>四种隔离级别</strong>：</p>
<ol>
<li>read uncommitted：读未提交。产生的问题：脏读、不可重复读、幻读</li>
<li>read committed：读已提交 （Oracle）。产生的问题：不可重复读、幻读</li>
<li>repeatable read：可重复读 （MySQL默认）。产生的问题：幻读</li>
<li>serializable：串行化。可以解决所有的问题</li>
</ol>
</blockquote>
<blockquote>
<p>数据库查询隔离级别：<code>select @@tx_isolation;</code></p>
<p>数据库设置隔离级别：<code>set global transaction isolation level 级别字符串;</code></p>
<p>注意：隔离级别从小到大安全性越来越高，但是效率越来越低</p>
</blockquote>
<h3 id="13-DCL-控制用户权限"><a href="#13-DCL-控制用户权限" class="headerlink" title="13. DCL 控制用户权限"></a>13. DCL 控制用户权限</h3><h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>添加</td>
<td>CREATE USER <code>&#39;用户名&#39;@&#39;主机名&#39;</code>IDENTIFIED BY<code>&#39;密码&#39;</code></td>
<td>创建一个用户</td>
</tr>
<tr>
<td>删除</td>
<td>DROP USER <code>&#39;用户名&#39;@&#39;主机名&#39;</code></td>
<td>删除指定用户</td>
</tr>
<tr>
<td>修改</td>
<td>UPDATE USER SET PASSWORD = PASSWORD<code>(&#39;新密码&#39;)</code>WHERE USER =<code>&#39;用户名&#39;</code></td>
<td>修改用户密码</td>
</tr>
<tr>
<td>修改</td>
<td>SET PASSWORD FOR <code>&#39;用户名&#39;@&#39;主机名&#39;</code>= PASSWORD<code>(&#39;新密码&#39;)</code></td>
<td>修改用户密码</td>
</tr>
<tr>
<td>查询</td>
<td>切换到mysql数据库后，SELECT * FROM <code>用户名</code></td>
<td>查询用户信息</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>重置root用户密码：</strong></p>
<ol>
<li>停止mysql服务：管理员运行cmd – &gt; net stop mysql </li>
<li>使用无验证方式启动mysql服务： mysqld –skip-grant-tables</li>
<li>打开新的cmd窗口,直接输入mysql命令，敲回车。就可以登录成功</li>
<li>切换到mysql数据库：use mysql;</li>
<li>重置密码：update user set password = password(‘你的新密码’) where user = ‘root’;</li>
<li>关闭两个窗口</li>
<li>打开任务管理器，手动结束mysqld.exe 的进程</li>
<li>启动mysql服务：net start mysql</li>
<li>使用新密码登录</li>
</ol>
</blockquote>
<h4 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h4><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>查询</td>
<td>SHOW GRANTS FOR <code>&#39;用户名&#39;@&#39;主机名&#39;</code></td>
<td>查询权限</td>
</tr>
<tr>
<td>授予</td>
<td>grant <code>权限列表</code> on<code>数据库名.表名</code> to <code>&#39;用户名&#39;@&#39;主机名&#39;</code></td>
<td>授予权限</td>
</tr>
<tr>
<td>撤销</td>
<td>revoke <code>权限列表</code> on<code>数据库名.表名</code> from <code>&#39;用户名&#39;@&#39;主机名&#39;</code></td>
<td>撤销权限</td>
</tr>
</tbody></table>
<blockquote>
<p>通配符： % 表示可以在任意主机使用用户登录数据库；<code>localhost</code>主机名仅限于本机使用。</p>
<p>给user用户授予所有权限，在任意数据库任意表上：</p>
<p>GRANT ALL ON * . * TO ‘user’ @ ‘%’;</p>
</blockquote>
<h3 id="14-JDBC"><a href="#14-JDBC" class="headerlink" title="14. JDBC"></a>14. JDBC</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Java DataBase Connectivity Java ：数据库连接</span><br><span class="line">本质：官方（sun公司）定义的一套操作所有关系型数据库的规则，即接口。各个数据库厂商去实现这套接口，提供数据库驱动jar包。我们可以使用这套接口（JDBC）编程，真正执行的代码是驱动jar包中的实现类。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>操作步骤：</strong></p>
<ol>
<li><p><strong>导入驱动jar包</strong></p>
<ol>
<li>复制mysql-connector-java-5.1.37-bin.jar到项目的libs目录下</li>
<li>右键–&gt;Add As Library</li>
</ol>
</li>
<li><p><strong>注册驱动</strong>（mysql5之后的驱动jar包可以省略注册驱动的步骤）</p>
<p> <code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></p>
</li>
<li><p><strong>获取数据库连接对象 Connection</strong> </p>
<p> <code>Connection conn = DriverManager.getConnection(String url, String user, String password);</code></p>
</li>
<li><p><strong>定义sql语句</strong></p>
<p><code>String sql = &quot;update account set balance = 500 where id = 1&quot;;</code></p>
</li>
<li><p><strong>获取执行sql的对象 Statement</strong><br><code>Statement stmt = conn.createStatement();</code></p>
</li>
<li><p><strong>执行sql</strong><br><code>int count = stmt.executeUpdate(sql);</code></p>
</li>
<li><p><strong>处理结果</strong></p>
<p><code>System.out.println(count);</code></p>
</li>
<li><p><strong>释放资源</strong><br><code>stmt.close();
conn.close();</code></p>
</li>
</ol>
</blockquote>
<h4 id="Connection-数据库连接对象"><a href="#Connection-数据库连接对象" class="headerlink" title="Connection 数据库连接对象"></a>Connection 数据库连接对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Connection conn = DriverManager.getConnection(String url, String user, String password)；</span><br><span class="line">url是指定的连接路径，例如jdbc:mysql://localhost:3306/数据库名称；</span><br><span class="line">如果连接的是本机mysql服务器，并且mysql服务默认端口是3306，则可以简写为jdbc:mysql:///数据库名称</span><br></pre></td></tr></table></figure>

<blockquote>
<p>功能：</p>
<ul>
<li>获取执行sql 的对象：<ul>
<li><code>Statement createStatement()</code></li>
<li><code>PreparedStatement prepareStatement(String sql)</code></li>
</ul>
</li>
<li>管理事务：<ul>
<li>开启事务：<code>setAutoCommit(boolean autoCommit)</code> ：调用该方法设置参数为false，即开启事务</li>
<li>提交事务：<code>commit()</code></li>
<li>回滚事务：<code>rollback()</code></li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="Statement-执行sql的对象"><a href="#Statement-执行sql的对象" class="headerlink" title="Statement 执行sql的对象"></a>Statement 执行sql的对象</h4><blockquote>
<ol>
<li><code>boolean execute(String sql)</code>：可以执行任意的sql </li>
<li><code>int executeUpdate(String sql)</code>：执行DML（insert、update、delete）语句、DDL(create，alter、drop)语句。返回值为影响的行数，可以通过这个影响的行数判断DML语句是否执行成功：返回值&gt;0的则执行成功，反之，则失败。</li>
<li><code>ResultSet executeQuery(String sql)</code>：执行DQL（select)语句</li>
</ol>
</blockquote>
<h4 id="ResultSet-结果集对象"><a href="#ResultSet-结果集对象" class="headerlink" title="ResultSet 结果集对象"></a>ResultSet 结果集对象</h4><blockquote>
<ol>
<li><p><code>boolean next()</code>：游标向下移动一行，判断当前行是否是最后一行末尾(是否有数据)，如果是，则返回false，如果不是则返回true。</p>
</li>
<li><p><code>getXxx(参数)</code>：获取数据，XXX如：int getInt()，String getString()</p>
<p>参数可以是int，代表列的编号，从1开始；也可以是String，代表列名称。</p>
</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码展示,展示指定表中数据</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (Connection conn = DriverManager.getConnection(<span class="string">"jdbc:mysql:///db_day01"</span>, 				<span class="string">"root"</span>, <span class="string">"root"</span>);</span><br><span class="line">             Statement stmt = conn.createStatement();</span><br><span class="line">             ResultSet rs = stmt.executeQuery(<span class="string">"select * from dept"</span>);)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                String DEPTON = rs.getString(<span class="string">"DEPTNO"</span>);</span><br><span class="line">                String DNAME = rs.getString(<span class="string">"DNAME"</span>);</span><br><span class="line">                String LOC = rs.getString(<span class="string">"LOC"</span>);</span><br><span class="line">                System.out.println(DEPTON + <span class="string">"---"</span> + DNAME + <span class="string">"---"</span> + LOC);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="15-JDBCUtils-抽取JDBC工具类"><a href="#15-JDBCUtils-抽取JDBC工具类" class="headerlink" title="15. JDBCUtils 抽取JDBC工具类"></a>15. JDBCUtils 抽取JDBC工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDBCUtils 代码展示</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url;	<span class="comment">//配置文件的四个参数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String user;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver;	</span><br><span class="line">    <span class="keyword">static</span>&#123; <span class="comment">//静态代码块，完成各个参数的赋值，省略了try...catch语句</span></span><br><span class="line">            Properties pro = <span class="keyword">new</span> Properties(); </span><br><span class="line">            InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream</span><br><span class="line">                (<span class="string">"jdbc.properties"</span>);	<span class="comment">//通过类加载器获得配置文件路径</span></span><br><span class="line">            pro.load(is); </span><br><span class="line">            url = pro.getProperty(<span class="string">"url"</span>);</span><br><span class="line">            user = pro.getProperty(<span class="string">"user"</span>);</span><br><span class="line">            password = pro.getProperty(<span class="string">"password"</span>);</span><br><span class="line">            driver = pro.getProperty(<span class="string">"driver"</span>);</span><br><span class="line">            Class.forName(driver);&#125;</span><br><span class="line">	<span class="comment">//获取Connection对象的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url, user, password);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//释放资源的方法，两种重载形式</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt,Connection conn)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( stmt != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;stmt.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();&#125;&#125;</span><br><span class="line">        <span class="keyword">if</span>( conn != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;               </span><br><span class="line">                e.printStackTrace();&#125;&#125;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs, Statement stmt, Connection conn)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( rs != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();&#125;&#125;</span><br><span class="line">        <span class="keyword">if</span>( stmt != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;stmt.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();&#125;&#125;</span><br><span class="line">        <span class="keyword">if</span>( conn != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();&#125;&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-用户登录案例与sql注入问题"><a href="#16-用户登录案例与sql注入问题" class="headerlink" title="16. 用户登录案例与sql注入问题"></a>16. 用户登录案例与sql注入问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在拼接sql时，有一些sql的特殊关键字参与字符串的拼接，会造成安全性问题。PreparedStatement对象可以解决这个问题，预编SQL语句时使用“？”作为占位符，可以防止SQL注入，同时效率更高。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用JDBCUtils完成登录案例代码展示</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.println(<span class="string">"请输入用户名："</span>);</span><br><span class="line">        String username = sc.nextLine();</span><br><span class="line">        System.out.println(<span class="string">"请输入密码："</span>);</span><br><span class="line">        String password = sc.nextLine();</span><br><span class="line">        <span class="keyword">boolean</span> flag = login(username, password);</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            System.out.println(<span class="string">"登录成功"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"用户名或密码错误"</span>);</span><br><span class="line">        &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String username, String password)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (username == <span class="keyword">null</span> || password == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCUtils.getConnection();</span><br><span class="line">            <span class="comment">/*特殊关键字拼接sql时会造成安全性问题，例如密码：a' or 'a' = 'a</span></span><br><span class="line"><span class="comment">            String sql = "select * from user where </span></span><br><span class="line"><span class="comment">            	username = '"+username+"' and password = '"+password+"' ";</span></span><br><span class="line"><span class="comment">			stmt = conn.createStatement();</span></span><br><span class="line"><span class="comment">			rs = stmt.executeQuery(sql);</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="comment">//使用PreparedStatement对象来解决,参数使用?作为占位符</span></span><br><span class="line">            String sql = <span class="string">"select * from user where username = ? and password = ?"</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            pstmt.setString(<span class="number">1</span>, username); <span class="comment">//setXXX方法，参数1为第几个问号的位置，参数2为赋值</span></span><br><span class="line">            pstmt.setString(<span class="number">2</span>, password);</span><br><span class="line">            rs = pstmt.executeQuery();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> rs.next();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtils.close(rs, pstmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="17-JDBC事务控制"><a href="#17-JDBC事务控制" class="headerlink" title="17. JDBC事务控制"></a>17. JDBC事务控制</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement pstmt1 = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement pstmt2 = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCUtils.getConnection();</span><br><span class="line">        <span class="comment">//开启事务</span></span><br><span class="line">        conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">//张三 - 500</span></span><br><span class="line">        String sql1 = <span class="string">"update account set balance = balance - ? where id = ?"</span>;</span><br><span class="line">        <span class="comment">//李四 + 500</span></span><br><span class="line">        String sql2 = <span class="string">"update account set balance = balance + ? where id = ?"</span>;</span><br><span class="line">        <span class="comment">//获取执行sql对象</span></span><br><span class="line">        pstmt1 = conn.prepareStatement(sql1);</span><br><span class="line">        pstmt2 = conn.prepareStatement(sql2);</span><br><span class="line">        <span class="comment">//设置参数</span></span><br><span class="line">        pstmt1.setDouble(<span class="number">1</span>,<span class="number">500</span>);</span><br><span class="line">        pstmt1.setInt(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">        pstmt2.setDouble(<span class="number">1</span>,<span class="number">500</span>);</span><br><span class="line">        pstmt2.setInt(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//执行张三sql</span></span><br><span class="line">        pstmt1.executeUpdate();</span><br><span class="line">        <span class="comment">// 手动制造异常</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">3</span>/<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//执行李四sql</span></span><br><span class="line">        pstmt2.executeUpdate();</span><br><span class="line">        <span class="comment">//提交事务</span></span><br><span class="line">        conn.commit();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;  <span class="comment">//发生任何异常，事务回滚</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">                conn.rollback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtils.close(pstmt1,conn);</span><br><span class="line">        JDBCUtils.close(pstmt2,<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="18-数据库连接池"><a href="#18-数据库连接池" class="headerlink" title="18. 数据库连接池"></a>18. 数据库连接池</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">本质是一个存放数据库连接的容器(集合)。当系统初始化好后，容器被创建，容器中会申请一些连接对象，当用户来访问数据库时，从容器中获取连接对象，用户访问完之后，会将连接对象归还给容器。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>好处：针对数据库连接对象的复用，可以节约创建以及销毁数据库连接对象的资源，提高用户访问效率。</p>
<p>标准接口：DataSource </p>
<p>常用方法：获取连接：getConnection()；归还连接：Connection.close()</p>
</blockquote>
<h4 id="C3P0-数据库连接池技术"><a href="#C3P0-数据库连接池技术" class="headerlink" title="C3P0 数据库连接池技术"></a>C3P0 数据库连接池技术</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用步骤：</span></span><br><span class="line"><span class="comment">//1. 导入jar包：【c3p0-0.9.5.2.jar】和【mchange-commons-java-0.2.12.jar】</span></span><br><span class="line"><span class="comment">//2. 定义配置文件：【c3p0.properties】或【c3p0-config.xml】直接放在src目录下</span></span><br><span class="line"><span class="comment">//3. 创建数据库连接池对象</span></span><br><span class="line">DataSource ds = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line"><span class="comment">//4. 获取连接对象</span></span><br><span class="line">Connection conn = ds.getConnection();</span><br></pre></td></tr></table></figure>

<h4 id="Druid-数据库连接池技术"><a href="#Druid-数据库连接池技术" class="headerlink" title="Druid 数据库连接池技术"></a>Druid 数据库连接池技术</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用步骤：</span></span><br><span class="line"><span class="comment">//1. 导入jar包【druid-1.0.9.jar】</span></span><br><span class="line"><span class="comment">//2. 定义配置文件：properties文件，可以叫任意名称，放在任意目录下</span></span><br><span class="line">InputStream is = Demo.class.getClassLoader().getResourceAsStream(<span class="string">"druid.properties"</span>);</span><br><span class="line"><span class="comment">//3. 加载配置文件：</span></span><br><span class="line">Properties pro = <span class="keyword">new</span> Properties(); </span><br><span class="line">pro.load(is);</span><br><span class="line"><span class="comment">//4. 获取数据库连接池对象：通过工厂来来获取 </span></span><br><span class="line">DataSource ds = DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line"><span class="comment">//5. 获取连接：</span></span><br><span class="line">Connection conn = ds.getConnection();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码展示：根据Druid技术，定义工具类JDBCUtils</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DataSource ds;</span><br><span class="line"><span class="comment">//静态代码块中加载配置文件，生成DataSource对象</span></span><br><span class="line"><span class="keyword">static</span>&#123;	</span><br><span class="line">    	Properties pro = <span class="keyword">new</span> Properties();           	         </span><br><span class="line">        pro.load</span><br><span class="line">            (DruidUtils.class.getClassLoader().getResourceAsStream(<span class="string">"druid.properties"</span>));</span><br><span class="line">        ds = DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//返回DataSource对象的方法，用于SpringJDBC</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DataSource <span class="title">getDataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ds;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//返回Connection对象的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//两个重载的归还连接方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt, Connection conn)</span> </span>&#123;</span><br><span class="line">    close(<span class="keyword">null</span>, stmt, conn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs, Statement stmt, Connection conn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (rs != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();&#125;&#125;</span><br><span class="line">    <span class="keyword">if</span> (stmt != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;stmt.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();&#125;&#125;</span><br><span class="line">    <span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="19-Spring-JDBC"><a href="#19-Spring-JDBC" class="headerlink" title="19. Spring JDBC"></a>19. Spring JDBC</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spring框架对JDBC的简单封装，提供了一个JDBCTemplate对象简化JDBC的开发。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>常用方法：</p>
<ul>
<li><p>使用数据源DataSource，创建JdbcTemplate对象：</p>
<p><code>JdbcTemplate template = new JdbcTemplate(ds);</code></p>
</li>
<li><p>update()：执行DML增、删、改语句：</p>
<p><code>int count = template.update(sql);</code></p>
</li>
<li><p>queryForMap()：将列名作为key，值作为value，将一条记录封装为一个map集合</p>
<p><code>Map&lt;String, Object&gt; map = template.queryForMap(sql);</code></p>
</li>
<li><p>queryForList()：将每一条记录封装为一个Map集合，再将Map集合装载到List集合中</p>
<p><code>List&lt;Map&lt;String, Object&gt;&gt; list = template.queryForList(sql);</code></p>
</li>
<li><p>query()：查询结果，将结果封装为JavaBean对象</p>
<p><code>List&lt;T&gt; list = template.query(sql, new BeanPropertyRowMapper&lt;T&gt;(T.class));</code></p>
</li>
<li><p>queryForObject：查询结果，将结果封装为对象，一般用于获取单行单列的数值数据</p>
<p><code>String count = template.queryForObject(sql, String.class);</code></p>
</li>
</ul>
</blockquote>
<h3 id="20-Redis"><a href="#20-Redis" class="headerlink" title="20. Redis"></a>20. Redis</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Redis是用C语言开发的一个开源的高性能键值对的NOSQL(Not Only SQL)非关系型数据库，通过将数据缓存于内存中，提升程序的读写效率。官方测试：50个并发执行100000个请求,读的速度是110000次/s,写的速度是81000次/s。</span><br></pre></td></tr></table></figure>

<h4 id="NOSQL和关系型数据库"><a href="#NOSQL和关系型数据库" class="headerlink" title="NOSQL和关系型数据库"></a>NOSQL和关系型数据库</h4><table>
<thead>
<tr>
<th>比较</th>
<th>非关系型数据库</th>
<th>关系型数据库</th>
</tr>
</thead>
<tbody><tr>
<td>成本</td>
<td>基本开源，部署简单</td>
<td>价格高昂</td>
</tr>
<tr>
<td>性能</td>
<td>不支持事务处理，不经过SQL层解析，性能高</td>
<td>事务支持，安全性高，可实现多表复杂查询</td>
</tr>
<tr>
<td>查询速度</td>
<td>数据存储于缓存中，速度快</td>
<td>数据存储于硬盘中，速度慢</td>
</tr>
<tr>
<td>拓展性</td>
<td>数据间没有耦合，容易水平拓展</td>
<td>多表查询机制导致拓展艰难</td>
</tr>
<tr>
<td>维护性</td>
<td>新技术维护工具和资料有限</td>
<td>长时间积累，工具丰富</td>
</tr>
<tr>
<td>存储格式</td>
<td>格式丰富（value、文档、图片等等）</td>
<td>只支持基础类型</td>
</tr>
<tr>
<td>学习成本</td>
<td>没有统一工业标准，学习成本较高</td>
<td>支持sql标准，技能易迁移</td>
</tr>
</tbody></table>
<blockquote>
<p>对于这两类数据库，对方的优势就是自己的弱势，反之亦然。两者是互补的关系，一般会将全部数据存储在关系型数据库中，然后在nosql数据库中备份存储不常变化，使用频率高的数据。</p>
</blockquote>
<h5 id="主流的NOSQL产品"><a href="#主流的NOSQL产品" class="headerlink" title="主流的NOSQL产品"></a>主流的NOSQL产品</h5><blockquote>
<ul>
<li>键值(Key-Value)存储数据库：Tokyo Cabinet/Tyrant、Redis、Voldemort、Berkeley DB</li>
<li>列存储数据库：Cassandra, HBase, Riak</li>
<li>文档型数据库：CouchDB、MongoDB</li>
<li>图形(Graph)数据库：Neo4J、InfoGrid、Infinite Graph</li>
</ul>
</blockquote>
<h4 id="Redis特点"><a href="#Redis特点" class="headerlink" title="Redis特点"></a>Redis特点</h4><blockquote>
<p><strong>Redis速度快的原因：</strong></p>
<ul>
<li>因为Redis使用C语言开发 C语言可以直接操作内存</li>
<li>Redis 是内存（JVM）操作内存（redis数据库）</li>
<li>Redis多路复用的IO</li>
<li>Redis是单线程的，避免了并发和锁对性能的消耗</li>
</ul>
<p><strong>Redis支持的键值数据类型：</strong></p>
<ul>
<li>字符串类型 string</li>
<li>哈希类型 hash</li>
<li>列表类型 list：linkedlist格式，支持重复元素</li>
<li>集合类型 set：不允许重复元素</li>
<li>有序集合类型 sortedset：不允许重复元素，且元素有顺序</li>
</ul>
</blockquote>
<h4 id="Redis命令操作"><a href="#Redis命令操作" class="headerlink" title="Redis命令操作"></a>Redis命令操作</h4><blockquote>
<ul>
<li><p>字符串类型（String）</p>
<ol>
<li>存储：<code>set key value</code></li>
<li>获取：<code>get key</code></li>
<li>删除：<code>del key</code></li>
</ol>
</li>
<li><p>哈希类型（hash）</p>
<ol>
<li><p>存储：<code>hset key field value</code></p>
</li>
<li><p>获取：<code>hget key field</code>：获取指定的field对应的值</p>
<p>​            <code>hgetall key</code>：获取所有的field和value</p>
</li>
<li><p>删除：<code>hdel key field</code></p>
</li>
</ol>
</li>
<li><p>列表类型（list）</p>
<ol>
<li><p>添加：<code>lpush key value：将元素加入列表左表</code></p>
<p>​            <code>rpush key value：将元素加入列表右边</code></p>
</li>
<li><p>获取：<code>lrange key start end</code>：start为起始位置，end为结束位置（0 -1可获取所有元素）</p>
</li>
<li><p>删除：<code>lpop key</code>：删除列表最左边的元素，并将元素返回</p>
<p>​            <code>rpop key</code>：删除列表最右边的元素，并将元素返回</p>
</li>
</ol>
</li>
<li><p>集合类型（set）：不允许重复元素</p>
<ol>
<li>存储：<code>sadd key value</code>：将一个value放入key集合中</li>
<li>获取：<code>smembers key</code>：获取set集合中所有元素</li>
<li>删除：<code>srem key value</code>：删除set集合中的某个元素</li>
</ol>
</li>
<li><p>有序集合类型（sortedset） ：不允许重复元素，且元素有顺序。</p>
<p>每个元素都会关联一个double类型的分数，redis通过该分数来为集合中的成员进行从小到大的排序。</p>
<ol>
<li>存储：<code>zadd key score value</code></li>
<li>获取：<code>zrange key start end [withscores]</code></li>
<li>删除：<code>zrem key value</code></li>
</ol>
</li>
<li><p>通用命令：</p>
<ol>
<li>获取所有的键：<code>keys *</code></li>
<li>获取键对应的value类型：<code>type key</code></li>
<li>删除指定的key-value：<code>del key</code></li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="Redis持久化机制"><a href="#Redis持久化机制" class="headerlink" title="Redis持久化机制"></a>Redis持久化机制</h4><blockquote>
<ul>
<li><p>RDB：在一定的间隔时间中，检测key的变化情况，然后持久化数据。为Redis默认持久化方式，通过编辑redis.windwos.conf文件可以自定义持久化参数：</p>
<p><code>save 900 1</code>：after 900 sec (15 min) if at least 1 key changed </p>
<p><code>save 60 10000</code>：after 60 sec if at least 10000 keys changed</p>
</li>
<li><p>AOF：日志记录的方式，可以记录每一条命令的操作。触发设定的动作后，持久化数据，通过编辑redis.windwos.conf文件可以自定义持久化参数：</p>
<p><code>appendonly no</code>（关闭aof） –&gt; <code>appendonly yes</code>（开启aof）</p>
<p><code>appendfsync always</code>：每一次操作都进行持久化</p>
<p><code>appendfsync everysec</code>：每隔一秒进行一次持久化</p>
<p><code>appendfsync no</code>：不进行持久化</p>
</li>
</ul>
</blockquote>
<h3 id="21-Jedis"><a href="#21-Jedis" class="headerlink" title="21. Jedis"></a>21. Jedis</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一款java操作redis数据库的工具。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Jedis方法：</p>
<ul>
<li>获取连接：<code>Jedis jedis = new Jedis(&quot;localhost&quot;,6379);</code></li>
<li>操作：<code>jedis.set(&quot;username&quot;,&quot;zhangsan&quot;);</code></li>
<li>关闭连接：<code>jedis.close();</code></li>
<li>指定过期时间：<code>jedis.setex(&quot;activecode&quot;,20,&quot;hehe&quot;);</code></li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jedis连接池</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisPoolUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JedisPool jedisPool;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="comment">//读取配置文件</span></span><br><span class="line">        InputStream is = JedisPoolUtils.class.getClassLoader().</span><br><span class="line">            				getResourceAsStream(<span class="string">"jedis.properties"</span>);</span><br><span class="line">        <span class="comment">//创建Properties对象</span></span><br><span class="line">        Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="comment">//关联文件</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pro.load(is);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//获取数据，设置到JedisPoolConfig中</span></span><br><span class="line">        JedisPoolConfig config = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line">        <span class="comment">// 将字符串转化为int 使用Integer.parseInt("")</span></span><br><span class="line">        config.setMaxTotal(Integer.parseInt(pro.getProperty(<span class="string">"maxTotal"</span>)));</span><br><span class="line">        config.setMaxIdle(Integer.parseInt(pro.getProperty(<span class="string">"maxIdle"</span>)));</span><br><span class="line">        <span class="comment">//初始化JedisPool</span></span><br><span class="line">        jedisPool = <span class="keyword">new</span> JedisPool(config,pro.getProperty(<span class="string">"host"</span>),</span><br><span class="line">                                  Integer.parseInt(pro.getProperty(<span class="string">"port"</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//获取连接方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title">getJedis</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="22-Oracle"><a href="#22-Oracle" class="headerlink" title="22. Oracle"></a>22. Oracle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORACLE数据库是目前最流行的C/S或B/S体系结构的关系型数据库，具有完整的数据管理和分布式处理的功能。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>数据库：</strong>Oracle数据库是一个操作系统只有一个库，可以看做是Oracle就只有一个大数据库。</p>
<p><strong>实例：</strong>一个Oracle实例（Oracle Instance）有一系列的后台进程（Backguound Processes)和内存结构        （Memory Structures)组成。一个数据库可以有n个实例。</p>
<p><strong>用户：</strong>用户在实例下建立，不同实例可以创建相同名字的用户。</p>
<p><strong>表空间：</strong>表空间是Oracle对物理数据库上相关数据文件（ORA或者DBF文件）的逻辑映射。每个表空间由同一磁盘上的一个或多个文件组成，这些文件叫数据文件(datafile)。一个数据文件只能属于一个表空间。</p>
<p><strong>数据文件：</strong>数据文件（dbf、ora）是数据库的物理存储单位，一个表空间可以由一个或多个数据文件组成，一个数据文件只能属于一个表空间。一旦数据文件被加入到某个表空间后，就不能删除这个文件，如果要删除某个数据文件，只能删除其所属于的表空间才行。</p>
<p>oracle通过用户和表空间对数据进行管理和存放，但是表不是由表空间去查询的，而是由用户去查询。不同用户可以在同一个表空间建立同一个名字的表，同名的表通过不同用户来区分。</p>
</blockquote>
<h4 id="创建表空间"><a href="#创建表空间" class="headerlink" title="创建表空间"></a>创建表空间</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create tablespace itcast   	//指定表空间名称</span><br><span class="line">datafile &apos;c:\itcast.dbf&apos; 	//指定表空间对应的数据文件</span><br><span class="line">size 100m 					//指定表空间的初始大小</span><br><span class="line">autoextend on 				//当表空间存储都占满时，自动增长</span><br><span class="line">next 10m					//指定一次自动增长的大小</span><br></pre></td></tr></table></figure>

<h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create user itcastuser		//指定用户名 </span><br><span class="line">identified by itcast		//指定用户密码 </span><br><span class="line">default tablespace itcast	//指定表空间名称</span><br><span class="line">grant dba to itcastuser		//为用户赋予权限</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Oracle中三个重要的角色：connect角色（用户），resource角色（开发人员），dba角色（最高权限）。</p>
</blockquote>
<h4 id="表的管理"><a href="#表的管理" class="headerlink" title="表的管理"></a>表的管理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">创建person表： </span><br><span class="line">create table person( </span><br><span class="line">    pid number(10), </span><br><span class="line">    name varchar2(10), </span><br><span class="line">    gender number(1) default 1, </span><br><span class="line">    birthday date </span><br><span class="line">);</span><br><span class="line">表删除：</span><br><span class="line">DROP TABLE 表名</span><br><span class="line">表的修改：</span><br><span class="line">在person表中增加列address：</span><br><span class="line">alter table person add(address varchar2(10));</span><br><span class="line">把person表的address列的长度修改成20长度：</span><br><span class="line">alter table person modify(address varchar2(20));</span><br></pre></td></tr></table></figure>

<h4 id="数据的管理"><a href="#数据的管理" class="headerlink" title="数据的管理"></a>数据的管理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT（增加）：</span><br><span class="line">INSERT INTO表名[(列名1，列名2，...)]VALUES(值1，值2，...)</span><br><span class="line">UPDATE（修改）：</span><br><span class="line">UPDATE 表名 SET 列名1=值1，列名2=值2，....WHERE 修改条件；</span><br><span class="line">DELETE（删除）：</span><br><span class="line">语法 : DELETE FROM 表名 WHERE 删除条件;</span><br></pre></td></tr></table></figure>

<h4 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">创建序列：</span><br><span class="line">CREATE SEQUENCE 序列名</span><br><span class="line">select seqpersonid.nextval from dual 取得序列的下一个内容</span><br><span class="line">select seqpersonid.currval from dual 取得序列的当前内容</span><br></pre></td></tr></table></figure>

<h4 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h4><p>空值处理nvl：由于null和任何数值计算都是null，通过nvl处理，可以将null转换为0，<code>nvl(comm,0)</code>。</p>
<h4 id="Rownum与分页查询"><a href="#Rownum与分页查询" class="headerlink" title="Rownum与分页查询"></a>Rownum与分页查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">----emp表工资倒叙排列后，每页五条记录，查询第二页。</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">rownum</span> rn, tt.* <span class="keyword">from</span>(</span><br><span class="line">          <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span></span><br><span class="line">    ) tt <span class="keyword">where</span> <span class="keyword">rownum</span>&lt;<span class="number">11</span></span><br><span class="line">) <span class="keyword">where</span> rn&gt;<span class="number">5</span></span><br></pre></td></tr></table></figure>

<h4 id="Oracle视图"><a href="#Oracle视图" class="headerlink" title="Oracle视图"></a>Oracle视图</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">视图就是封装了一条复杂查询的语句，提供一个查询的窗口，所有数据来自于原表。</span><br><span class="line">语法：CREATE OR REPLACE VIEW 视图名称 AS 子查询 with read only</span><br><span class="line">例如：create view v_emp as select ename, job from emp with read only;</span><br><span class="line">作用：可以屏蔽掉一些敏感字段，保证总部和分部数据及时统一。</span><br></pre></td></tr></table></figure>

<h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">索引就是在表的列上构建一个二叉树 B+Tree，达到大幅度提高查询效率的目的，但是索引会影响增删改的效率。</span><br><span class="line">单列索引：create index idx_ename on emp(ename); 触发条件：必须是索引列中的原始值</span><br><span class="line">复合索引：create index idx_enamejob on emp(ename, job); 触发条件：能优先检索列中的原始值</span><br><span class="line">使用原则：</span><br><span class="line">1. 在大表上建立索引才有意义</span><br><span class="line">2. 在where子句后面或者是连接条件上的字段建立索引</span><br><span class="line">3. 表中数据修改频率高时不建议建立索引</span><br></pre></td></tr></table></figure>

<h3 id="23-pl-sql语言"><a href="#23-pl-sql语言" class="headerlink" title="23. pl/sql语言"></a>23. pl/sql语言</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PL/SQL（Procedure Language/SQL）是Oracle对sql语言的过程化扩展，在SQL命令语言中增加了过程处理语句（如分支、循环等），使SQL语言具有过程处理能力，结合了SQL语言的数据操纵能力与过程语言的数据处理能力。</span><br></pre></td></tr></table></figure>

<h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">程序语法：</span><br><span class="line">    declare</span><br><span class="line">        说明部分 （变量说明，游标申明，例外说明）</span><br><span class="line">    begin</span><br><span class="line">        语句序列 （DML语句）…</span><br><span class="line">    exception</span><br><span class="line">        例外处理语句</span><br><span class="line">    End;</span><br></pre></td></tr></table></figure>

<h5 id="变量的类型"><a href="#变量的类型" class="headerlink" title="变量的类型"></a>变量的类型</h5><p>基本类型：char, varchar2, date, number, boolean, long</p>
<p>引用变量：Myname emp.ename%type; 在sql中使用into来赋值</p>
<p>记录型变量：e1 emp%rowtype</p>
<h5 id="if分支"><a href="#if分支" class="headerlink" title="if分支"></a>if分支</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">语法1：</span><br><span class="line">IF 条件 THEN 语句1;</span><br><span class="line">	语句2;</span><br><span class="line">	END IF;</span><br><span class="line">语法2：</span><br><span class="line">IF 条件 THEN 语句序列1；</span><br><span class="line">	ELSE 语句序列 2；</span><br><span class="line">	END IF；</span><br><span class="line">语法3：</span><br><span class="line">IF 条件 THEN 语句;</span><br><span class="line">	ELSIF 语句 THEN 语句;</span><br><span class="line">	ELSE 语句;</span><br><span class="line">	END IF;</span><br></pre></td></tr></table></figure>

<h5 id="LOOP循环语句"><a href="#LOOP循环语句" class="headerlink" title="LOOP循环语句"></a>LOOP循环语句</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--while循环</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  i <span class="built_in">number</span>(<span class="number">2</span>) := <span class="number">1</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">while</span> i &lt; <span class="number">11</span> <span class="keyword">loop</span></span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">    i := i + 1;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--exit循环</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  i <span class="built_in">number</span>(<span class="number">2</span>) := <span class="number">1</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">loop</span></span><br><span class="line">    <span class="keyword">exit</span> <span class="keyword">when</span> i &gt; <span class="number">10</span>;</span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">    i := i + 1;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--for循环</span></span><br><span class="line"><span class="keyword">declare</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span> <span class="keyword">loop</span></span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h5 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">游标可以存储查询返回的多条数据</span><br><span class="line">游标的创建：</span><br><span class="line">	cursor c1 is select ename from emp;</span><br><span class="line">游标使用步骤：</span><br><span class="line">	打开游标： open c1; (打开游标执行查询)</span><br><span class="line">	取一行游标的值：fetch c1 into pjob; (取一行到变量中)</span><br><span class="line">	关闭游标： close c1;(关闭游标释放资源)</span><br><span class="line">	游标的结束方式 exit when c1%notfound</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">范例：按员工的工种涨工资,总裁1000元，经理涨800元其，他人员涨400元</span><br><span class="line">create table myemp as select * from emp;</span><br><span class="line">declare </span><br><span class="line">	cursor pc is select * from myemp; </span><br><span class="line">	addsal myemp.sal%type; </span><br><span class="line">	pemp myemp%rowtype; </span><br><span class="line">begin </span><br><span class="line">	open pc; </span><br><span class="line">	loop </span><br><span class="line">        fetch pc into pemp; </span><br><span class="line">        exit when pc%notfound; </span><br><span class="line">        if pemp.job = &apos;PRESIDENT&apos; then </span><br><span class="line">            addsal := 1000; </span><br><span class="line">        elsif pemp.job = &apos;MANAGER&apos; then </span><br><span class="line">            addsal := 800; </span><br><span class="line">        else addsal := 400;</span><br><span class="line">        end if; </span><br><span class="line">        update myemp t set t.sal = t.sal + addsal where t.empno = pemp.empno; </span><br><span class="line">	end loop; </span><br><span class="line">	close pc; </span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<h3 id="24-存储过程"><a href="#24-存储过程" class="headerlink" title="24. 存储过程"></a>24. 存储过程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">存储过程（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的SQL语句集，经编译后存储在数据库中，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">创建存储过程:</span><br><span class="line">create [or replace] PROCEDURE 过程名[(参数名 in/out 数据类型)]</span><br><span class="line">AS</span><br><span class="line">begin</span><br><span class="line">	PLSQL子程序体；</span><br><span class="line">End;</span><br><span class="line"></span><br><span class="line">调用存储过程:</span><br><span class="line">begin </span><br><span class="line">	-- Call the procedure </span><br><span class="line">	过程名; </span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建存储过程，通过工号求年薪</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> p_yearsal(eno emp.empno%<span class="keyword">type</span>, yearsal <span class="keyword">out</span> <span class="built_in">number</span>)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">  s <span class="built_in">number</span>(<span class="number">10</span>);</span><br><span class="line">  c emp.comm%type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> sal*<span class="number">12</span>,nvl(comm,<span class="number">0</span>) <span class="keyword">into</span> s,c <span class="keyword">from</span> emp <span class="keyword">where</span> empno = eno;</span><br><span class="line">  yearsal := s+c;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">-- 调用存储过程</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  yearsal <span class="built_in">number</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  p_yearsal(<span class="number">7788</span>,yearsal);</span><br><span class="line">  dbms_output.put_line(yearsal);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="25-存储函数"><a href="#25-存储函数" class="headerlink" title="25. 存储函数"></a>25. 存储函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">function</span> 函数名(<span class="keyword">Name</span> <span class="keyword">in</span> <span class="keyword">type</span>, <span class="keyword">Name</span> <span class="keyword">in</span> <span class="keyword">type</span>, ...) <span class="keyword">return</span> 数据类型 <span class="keyword">is</span></span><br><span class="line">	结果变量 数据类型;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">return</span>(结果变量);</span><br><span class="line"><span class="keyword">end</span>函数名;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--使用存储函数来实现提供一个部门编号，输出一个部门名称</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> scott.dept;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">function</span> fdna(dno dept.deptno%<span class="keyword">type</span>) <span class="keyword">return</span> dept.dname%<span class="keyword">type</span></span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">  dna dept.dname%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> dname <span class="keyword">into</span> dna <span class="keyword">from</span> dept <span class="keyword">where</span> deptno = dno;</span><br><span class="line">  return dna;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">-- 调用存储函数</span></span><br><span class="line"><span class="keyword">select</span> e.ename, fdna(e.deptno) <span class="keyword">from</span> emp e;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>存储过程和存储函数的区别</strong><br>存储过程和函数的区别在于函数可以有一个返回值；而过程没有返回值。<br>但过程和函数都可以通过out指定一个或多个输出参数。利用out参数可以在过程和函数中实现返回多个值。</p>
</blockquote>
<h3 id="26-触发器"><a href="#26-触发器" class="headerlink" title="26. 触发器"></a>26. 触发器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库触发器是一个与表相关联的、存储的PL/SQL程序。每当一个特定的数据操作语句(Insert,update,delete)在指定的表上发出时，Oracle自动地执行触发器中定义的语句序列。</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 禁止给员工降薪的触发器</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> t2</span><br><span class="line"><span class="keyword">before</span></span><br><span class="line"><span class="keyword">update</span></span><br><span class="line"><span class="keyword">on</span> emp </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span> </span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">if</span> :old.sal&gt;:new.sal <span class="keyword">then</span></span><br><span class="line">    raise_application_error(<span class="number">-20001</span>,<span class="string">'不能给员工降薪'</span>);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7788</span>;</span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> sal = sal<span class="number">-1</span> <span class="keyword">where</span> empno = <span class="number">7788</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>

<h3 id="27-Java程序调用存储过程"><a href="#27-Java程序调用存储过程" class="headerlink" title="27. Java程序调用存储过程"></a>27. Java程序调用存储过程</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">javaCallProcedure</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Class.forName(<span class="string">"oracle.jdbc.driver.OracleDriver"</span>);</span><br><span class="line">    Connection connection = DriverManager.getConnection(</span><br><span class="line">        <span class="string">"jdbc:oracle:thin:@192.168.44.130:1521:orcl"</span>, <span class="string">"itcastuser"</span>, <span class="string">"itcast"</span>);</span><br><span class="line">    CallableStatement call = connection.prepareCall(<span class="string">"&#123;call p_yearsal(?,?)&#125;"</span>);</span><br><span class="line">    call.setObject(<span class="number">1</span>, <span class="number">7788</span>);</span><br><span class="line">    call.registerOutParameter(<span class="number">2</span>, OracleTypes.NUMBER);</span><br><span class="line">    call.execute();</span><br><span class="line">    System.out.println(call.getObject(<span class="number">2</span>));</span><br><span class="line">    call.close();</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  


          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Eric</p>
              <div class="site-description motion-element" itemprop="description">Eric's Knowledge Base</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">Artikel</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Eric</span>

  

  
</div>


  <div class="powered-by">Erstellt mit  <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Design – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.2</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>




  

  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  



  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
