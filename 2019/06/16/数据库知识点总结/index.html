<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="数据库知识点总结1. 数据库的基本概念12数据库(DataBase,简称:DB)，用于存储和管理数据的仓库。类比：数据库：文件夹(仓库)；表：文件（货架子）； 数据：数据（货物）。   数据库的特点：  持久化存储数据，数据库就是一个文件系统 方便存储和管理数据 使用了统一的方式操作数据库 – SQL   2. MySQL配置操作123456789服务启动:	net start mysql：启动m">
<meta property="og:type" content="article">
<meta property="og:title" content="数据库">
<meta property="og:url" content="http://yoursite.com/2019/06/16/数据库知识点总结/index.html">
<meta property="og:site_name" content="Space">
<meta property="og:description" content="数据库知识点总结1. 数据库的基本概念12数据库(DataBase,简称:DB)，用于存储和管理数据的仓库。类比：数据库：文件夹(仓库)；表：文件（货架子）； 数据：数据（货物）。   数据库的特点：  持久化存储数据，数据库就是一个文件系统 方便存储和管理数据 使用了统一的方式操作数据库 – SQL   2. MySQL配置操作123456789服务启动:	net start mysql：启动m">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-06-16T01:55:19.109Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="数据库">
<meta name="twitter:description" content="数据库知识点总结1. 数据库的基本概念12数据库(DataBase,简称:DB)，用于存储和管理数据的仓库。类比：数据库：文件夹(仓库)；表：文件（货架子）； 数据：数据（货物）。   数据库的特点：  持久化存储数据，数据库就是一个文件系统 方便存储和管理数据 使用了统一的方式操作数据库 – SQL   2. MySQL配置操作123456789服务启动:	net start mysql：启动m">





  
  
  <link rel="canonical" href="http://yoursite.com/2019/06/16/数据库知识点总结/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>数据库 | Space</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Space</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Navigationsleiste an/ausschalten">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>Archiv</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-database">

    
    
    
      
    

    

    <a href="/https:/eric18018.github.io/2019/06/16/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" rel="section"><i class="menu-item-icon fa fa-fw fa-database"></i> <br>数据库</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-html">

    
    
    
      
    

    

    <a href="/https:/eric18018.github.io/2019/06/16/Web%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" rel="section"><i class="menu-item-icon fa fa-fw fa-globe"></i> <br>Web前端</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-webcore">

    
    
    
      
    

    

    <a href="/https:/eric18018.github.io/2019/06/16/Web%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" rel="section"><i class="menu-item-icon fa fa-fw fa-cube"></i> <br>Web核心</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/16/数据库知识点总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric">
      <meta itemprop="description" content="Eric's Knowledge Base">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Space">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">数据库

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Veröffentlicht am</span>
              

              
                
              

              <time title="Erstellt: 2019-06-16 09:46:37 / Geändert am: 09:55:19" itemprop="dateCreated datePublished" datetime="2019-06-16T09:46:37+08:00">2019-06-16</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="数据库知识点总结"><a href="#数据库知识点总结" class="headerlink" title="数据库知识点总结"></a>数据库知识点总结</h1><h3 id="1-数据库的基本概念"><a href="#1-数据库的基本概念" class="headerlink" title="1. 数据库的基本概念"></a>1. 数据库的基本概念</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">数据库(DataBase,简称:DB)，用于存储和管理数据的仓库。</span><br><span class="line">类比：数据库：文件夹(仓库)；表：文件（货架子）； 数据：数据（货物）。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>数据库的特点：</p>
<ol>
<li>持久化存储数据，数据库就是一个文件系统</li>
<li>方便存储和管理数据</li>
<li>使用了统一的方式操作数据库 – SQL</li>
</ol>
</blockquote>
<h3 id="2-MySQL配置操作"><a href="#2-MySQL配置操作" class="headerlink" title="2. MySQL配置操作"></a>2. MySQL配置操作</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">服务启动:</span><br><span class="line">	net <span class="keyword">start</span> mysql：启动mysql的服务</span><br><span class="line">	net <span class="keyword">stop</span> mysql：关闭mysql服务</span><br><span class="line">登录:</span><br><span class="line">	mysql -u用户名 -p密码</span><br><span class="line">	mysql -hip地址 -u用户名 -p连接目标的密码</span><br><span class="line">退出:</span><br><span class="line">	<span class="keyword">exit</span>/quit</span><br><span class="line">配置文件 my.ini</span><br></pre></td></tr></table></figure>

<h3 id="3-SQL概念"><a href="#3-SQL概念" class="headerlink" title="3. SQL概念"></a>3. SQL概念</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Structured Query Language：结构化查询语言。</span><br><span class="line">SQL定义了操作所有关系型数据库的规则。每一种数据库操作的方式存在不一样的地方，称为“方言”。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>SQL通用语法：</strong></p>
<ol>
<li>SQL 语句可以单行或多行书写，以分号结尾。</li>
<li>可使用空格和缩进来增强语句的可读性。</li>
<li>MySQL 数据库的 SQL 语句不区分大小写，关键字建议使用大写。</li>
<li>注释：<ul>
<li>单行注释: – 注释内容 或 # 注释内容(mysql 特有) </li>
<li>多行注释: /* 注释 */</li>
</ul>
</li>
</ol>
</blockquote>
<blockquote>
<p><strong>SQL分类：</strong></p>
<ul>
<li><strong>DDL（Data Definition Language）</strong>数据定义语言：用来定义数据库对象：数据库，表，列等。</li>
<li><strong>DML（Data Manipulation Language）</strong>数据操作语言：用来对数据库中表的数据进行增删改。</li>
<li><strong>DQL（Data Query Language）</strong>数据查询语言：用来查询数据库中表的记录(数据)。</li>
<li><strong>DCL（Data Control Language）</strong>数据控制语言：用来定义数据库的访问权限和安全级别，创建用户。</li>
</ul>
</blockquote>
<h3 id="4-DDL-定义数据库"><a href="#4-DDL-定义数据库" class="headerlink" title="4. DDL 定义数据库"></a>4. DDL 定义数据库</h3><h4 id="操作数据库"><a href="#操作数据库" class="headerlink" title="操作数据库"></a>操作数据库</h4><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>创建</td>
<td>create database <code>数据库名称</code></td>
<td>创建数据库</td>
</tr>
<tr>
<td>创建</td>
<td>create database if not exists <code>数据库名称</code></td>
<td>创建数据库，判断不存在，再创建</td>
</tr>
<tr>
<td>创建</td>
<td>create database <code>数据库名称</code> character set <code>字符集名称</code></td>
<td>创建数据库，并指定字符集</td>
</tr>
<tr>
<td>查询</td>
<td>show databases</td>
<td>查询所有数据库的名称</td>
</tr>
<tr>
<td>查询</td>
<td>show create database <code>数据库名称</code></td>
<td>查询某个数据库的字符集/创建语句</td>
</tr>
<tr>
<td>修改</td>
<td>alter database<code>数据库名称</code> character set <code>字符集名称</code></td>
<td>修改数据库的字符集</td>
</tr>
<tr>
<td>删除</td>
<td>drop database <code>数据库名称</code></td>
<td>删除数据库</td>
</tr>
<tr>
<td>删除</td>
<td>drop database if exists <code>数据库名称</code></td>
<td>判断数据库存在，存在再删除</td>
</tr>
<tr>
<td>使用</td>
<td>select database()</td>
<td>查询当前正在使用的数据库名称</td>
</tr>
<tr>
<td>使用</td>
<td>use <code>数据库名称</code></td>
<td>使用数据库</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>注意：数据库的名称不可修改</strong></p>
</blockquote>
<h4 id="操作表"><a href="#操作表" class="headerlink" title="操作表"></a>操作表</h4><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>创建</td>
<td>create table <code>表名(列名1 数据类型1,....列名n 数据类型n)</code>;</td>
<td>创建一个表</td>
</tr>
<tr>
<td>创建</td>
<td>create table <code>表名</code> like <code>被复制的表名</code></td>
<td>复制表</td>
</tr>
<tr>
<td>查询</td>
<td>show tables</td>
<td>查询某个数据库中所有的表名称</td>
</tr>
<tr>
<td>查询</td>
<td>desc <code>表名</code></td>
<td>查询表结构</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> rename to <code>新的表名</code></td>
<td>修改表名</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> character set <code>字符集名称</code></td>
<td>修改表的字符集</td>
</tr>
<tr>
<td>修改</td>
<td>show create table <code>表名</code></td>
<td>查看表的字符集</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> add <code>列名 数据类型</code></td>
<td>添加一列</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> add <code>列名 数据类型</code> after <code>指定列名</code></td>
<td>在指定的列后添加一列</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> change <code>列名 新列别 新数据类型</code></td>
<td>修改列名称和数据类型</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> modify <code>列名 新数据类型</code></td>
<td>修改数据类型</td>
</tr>
<tr>
<td>修改</td>
<td>alter table <code>表名</code> drop <code>列名</code></td>
<td>删除列</td>
</tr>
<tr>
<td>删除</td>
<td>drop table <code>表名</code></td>
<td>删除表</td>
</tr>
<tr>
<td>删除</td>
<td>drop table  if exists <code>表名</code></td>
<td>判断表存在，存在再删除</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>数据类型：</strong></p>
<ol>
<li><strong>int</strong>：整数类型  <code>age int</code></li>
<li><strong>double</strong>：小数类型  <code>score double(5,2)</code></li>
<li><strong>date</strong>：日期，只包含年月日  <code>yyyy-MM-dd</code></li>
<li><strong>datetime</strong>：日期，包含年月日时分秒  <code>yyyy-MM-dd HH:mm:ss</code></li>
<li><strong>timestamp</strong>：时间戳，包含年月日时分秒  <code>yyyy-MM-dd HH:mm:ss</code>（默认使用系统当前时间赋值）    </li>
<li><strong>varchar</strong>：字符串  <code>name varchar(20)</code> （括号里数字为可接收最大字符数）</li>
</ol>
</blockquote>
<h3 id="5-DML-增删改表中数据"><a href="#5-DML-增删改表中数据" class="headerlink" title="5. DML 增删改表中数据"></a>5. DML 增删改表中数据</h3><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>添加</td>
<td>insert into <code>表名</code> values <code>(值1,值2,...值n)</code></td>
<td>给表中每一列赋值</td>
</tr>
<tr>
<td>添加</td>
<td>insert into <code>表名(列名1,列名2,...列名n)</code>values<code>(值1,值2,...值n)</code></td>
<td>选择地给表中某一列赋值</td>
</tr>
<tr>
<td>删除</td>
<td>delete from <code>表名 [where 条件]</code></td>
<td>删除符合条件的记录</td>
</tr>
<tr>
<td>删除</td>
<td>truncate table <code>表名</code></td>
<td>删除整张表</td>
</tr>
<tr>
<td>修改</td>
<td>update <code>表名</code> set <code>列名1 = 值1, 列名2 = 值2,... [where 条件]</code></td>
<td>修改指定列的数据</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>注意：</strong></p>
<ol>
<li>除了数字类型，其他类型需要使用引号(单双都可以)引起来，数值类型加引号也不会报错，但是不推荐加</li>
<li>若要删除整表，推荐使用<code>truncate table</code>，效率高；<code>delete from</code> 内部采用逐个删除，效率低</li>
<li>若要修改多条记录，可以指定条件数据范围<code>in()</code></li>
</ol>
</blockquote>
<h3 id="6-DQL-查询表中记录"><a href="#6-DQL-查询表中记录" class="headerlink" title="6. DQL 查询表中记录"></a>6. DQL 查询表中记录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">语法格式：</span><br><span class="line">	select</span><br><span class="line">		字段列表</span><br><span class="line">	from</span><br><span class="line">		表名列表</span><br><span class="line">	where</span><br><span class="line">		条件列表</span><br><span class="line">	group by</span><br><span class="line">		分组字段</span><br><span class="line">	having</span><br><span class="line">		分组之后的条件</span><br><span class="line">	order by</span><br><span class="line">		排序</span><br><span class="line">	limit</span><br><span class="line">		分页限定</span><br></pre></td></tr></table></figure>

<h4 id="基础查询"><a href="#基础查询" class="headerlink" title="基础查询"></a>基础查询</h4><blockquote>
<ol>
<li><p>多个字段的查询：<code>select 字段名1，字段名2... from 表名；</code>(*来替代查询所有字段)</p>
</li>
<li><p>去除重复：<code>select</code> <strong>distinct</strong> <code>字段名1，字段名2... from 表名；</code></p>
</li>
<li><p>计算列：一般可以使用四则运算计算一些列的值。（一般只会进行数值型的计算）</p>
</li>
<li><p>null参与的运算，计算结果都为null。<code>ifnull(表达式1,表达式2)：</code></p>
<p>表达式1：需要判断是否为null的字段；表达式2：若该字段为null后的替换值</p>
<ol start="5">
<li>起别名：as（as也可以省略）</li>
</ol>
</li>
</ol>
</blockquote>
<h4 id="条件查询"><a href="#条件查询" class="headerlink" title="条件查询"></a>条件查询</h4><blockquote>
<pre><code> 1. where子句后跟条件
 2. 运算符
 * &lt;&gt; (相当于!=)
 * BETWEEN...AND  
 * IN( 集合) 

3. 模糊查询 LIKE：占位符：`_`：单个任意字符；`%`：多个任意字符（含0个）
4. IS NULL (是否为空，不能用=null判断) ；IS NOT NULL：不为空</code></pre></blockquote>
<h4 id="排序查询"><a href="#排序查询" class="headerlink" title="排序查询"></a>排序查询</h4><blockquote>
<ol>
<li>语法：<code>order by 排序字段1 排序方式1 ，排序字段2 排序方式2...</code></li>
<li>排序方式：ASC：升序，默认的；DESC：降序</li>
<li>如果有多个排序条件，则当前边的条件值一样时，才会判断第二条件</li>
</ol>
</blockquote>
<h4 id="聚合函数"><a href="#聚合函数" class="headerlink" title="聚合函数"></a>聚合函数</h4><blockquote>
<p><strong>将一列数据作为一个整体，进行纵向的计算，需要排除null值</strong></p>
<ol>
<li>count：计算个数（<code>count(*)</code>：只要该数据有一列不为空）</li>
<li>max：计算最大值</li>
<li>min：计算最小值</li>
<li>sum：计算和</li>
<li>avg：计算平均值</li>
</ol>
</blockquote>
<h4 id="分组查询"><a href="#分组查询" class="headerlink" title="分组查询"></a>分组查询</h4><blockquote>
<p>语法：group by 分组字段；</p>
<p>要求：查询条件的字段只能是<strong>分组字段</strong>和<strong>聚合函数</strong></p>
</blockquote>
<h4 id="分页查询"><a href="#分页查询" class="headerlink" title="分页查询"></a>分页查询</h4><blockquote>
<ol>
<li><p>语法：limit 要开始显示的索引，每页查询的条数；</p>
</li>
<li><p>公式：开始的索引 = （当前的页码 - 1） * 每页显示的条数</p>
</li>
<li><p>limit 是一个MySQL”方言”</p>
</li>
</ol>
</blockquote>
<blockquote>
<p><strong>where 和 having 的区别？</strong></p>
<ol>
<li>where 在分组之前进行限定，如果不满足条件，则不参与分组；having在分组之后进行限定，如果不满足结果，则不会被查询出来。</li>
<li>where 后不可以跟聚合函数，having可以进行聚合函数的判断。</li>
</ol>
</blockquote>
<h3 id="7-约束"><a href="#7-约束" class="headerlink" title="7. 约束"></a>7. 约束</h3><h4 id="非空约束"><a href="#非空约束" class="headerlink" title="非空约束"></a>非空约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">not null，某一列的值不能为null</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>创建表时，添加非空约束：CREATE TABLE stu(id INT,NAME VARCHAR(20) <strong>NOT NULL</strong>);</li>
<li>创建表后，添加非空约束：ALTER TABLE stu MODIFY NAME VARCHAR(20) <strong>NOT NULL</strong>;</li>
<li>删除非空约束：ALTER TABLE stu <strong>MODIFY</strong> NAME VARCHAR(20);</li>
</ol>
</blockquote>
<h4 id="唯一约束"><a href="#唯一约束" class="headerlink" title="唯一约束"></a>唯一约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">unique，某一列的值不能重复，但可以有多个NULL值</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>创建表时，添加唯一约束：CREATE TABLE stu(id INT, NAME VARCHAR(20) <strong>UNIQUE</strong> );</li>
<li>创建表后，添加唯一约束：ALTER TABLE stu MODIFY NAME VARCHAR(20) <strong>UNIQUE</strong>;</li>
<li>删除唯一约束：ALTER TABLE stu <strong>DROP INDEX</strong> NAME;</li>
</ol>
</blockquote>
<h4 id="主键约束"><a href="#主键约束" class="headerlink" title="主键约束"></a>主键约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">primary key，非空且唯一，一张表只能有一列的值设为主键，是表中记录的唯一标识，一般是数据无关列</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>创建表时，添加主键约束：CREATE TABLE stu(id INT <strong>PRIMARY KEY</strong>, NAME VACHAR(20));</li>
<li>创建表后，添加主键约束：ALTER TABLE stu MODIFY id INT <strong>PRIMARY KEY</strong>;</li>
<li>删除主键约束：ALTER TABLE stu <strong>DROP PRIMARY KEY</strong>;</li>
<li>主键约束添加自增长：id INT PRIMARY KEY <strong>AUTO_INCREMENT</strong>；</li>
</ol>
</blockquote>
<h4 id="外键约束"><a href="#外键约束" class="headerlink" title="外键约束"></a>外键约束</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">foreign key，让表于表产生关系，从而保证数据的正确性</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li><p>创建表时，添加外键约束：</p>
<p><strong>constraint</strong> <code>外键名称</code> <strong>foreign key</strong><code>(外键列名称)</code> <strong>references</strong> <code>主表名称(主键列名称)</code>  <strong>①</strong></p>
<p>外键列名称为<strong>受约束的列</strong>名称，主键列名称为<strong>约束别人的列</strong>名称；</p>
<p>外键名称可以自定义，起到删除时索引的作用 。一般格式：当前表名 _ 外键表名 _ fk</p>
</li>
<li><p>创建表之后，添加外键约束：ALTER TABLE stu ADD + ①</p>
</li>
<li><p>删除外键约束：ALTER TABLE stu DROP FOREIGN KEY <code>外键名称</code>；</p>
</li>
<li><p>级联操作：级联更新：ON UPDATE CASCADE ；级联删除：ON DELETE CASCADE </p>
</li>
</ol>
</blockquote>
<h3 id="8-数据库的设计"><a href="#8-数据库的设计" class="headerlink" title="8. 数据库的设计"></a>8. 数据库的设计</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line">1. 一对一：实现方式：一对一关系实现，可以在任意一方添加唯一外键指向另一方的主键。</span><br><span class="line">2. 一对多(多对一)：实现方式：在多的一方建立外键，指向一的一方的主键。</span><br><span class="line">3. 多对多：实现方式：多对多关系实现需要借助第三张中间表。中间表至少包含两个字段，这两个字段作为第三张表的外键，分别指向两张表的主键。</span><br><span class="line">-- 旅游网案例展示：一个旅游线路分类中有多个旅游线路；一个用户收藏多个线路，一个线路被多个用户收藏。</span><br><span class="line">/*创建旅游线路分类表 tab_category</span><br><span class="line">    cid 旅游线路分类主键，自动增长</span><br><span class="line">    cname 旅游线路分类名称非空，唯一，字符串 100</span><br><span class="line">*/</span><br><span class="line">CREATE TABLE tab_category (</span><br><span class="line">	cid INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	cname VARCHAR(100) UNIQUE NOT NULL</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">/*创建旅游线路表 tab_route</span><br><span class="line">    rid 旅游线路主键，自动增长</span><br><span class="line">    rname 旅游线路名称非空，唯一，字符串 100</span><br><span class="line">    price 价格</span><br><span class="line">    rdate 上架时间，日期类型</span><br><span class="line">    cid 外键，所属分类</span><br><span class="line">*/</span><br><span class="line">CREATE TABLE tab_route(</span><br><span class="line">	rid INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	rname VARCHAR(100) NOT NULL UNIQUE,</span><br><span class="line">	price DOUBLE,</span><br><span class="line">	rdate DATE,</span><br><span class="line">	cid INT,</span><br><span class="line">	FOREIGN KEY (cid) REFERENCES tab_category(cid)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">/*创建用户表 tab_user</span><br><span class="line">    uid 用户主键，自增长</span><br><span class="line">    username 用户名长度 100，唯一，非空</span><br><span class="line">    password 密码长度 30，非空</span><br><span class="line">    name 真实姓名长度 100</span><br><span class="line">    birthday 生日</span><br><span class="line">    sex 性别，定长字符串 1</span><br><span class="line">    telephone 手机号，字符串 11</span><br><span class="line">    email 邮箱，字符串长度 100</span><br><span class="line">*/</span><br><span class="line">CREATE TABLE tab_user (</span><br><span class="line">	uid INT PRIMARY KEY AUTO_INCREMENT,</span><br><span class="line">	username VARCHAR(100) NOT NULL UNIQUE,</span><br><span class="line">	PASSWORD VARCHAR(30) NOT NULL,</span><br><span class="line">	NAME VARCHAR(100),</span><br><span class="line">	birthday DATE,</span><br><span class="line">	sex CHAR(1) DEFAULT &apos;男&apos;,</span><br><span class="line">	telephone VARCHAR(11),</span><br><span class="line">	email VARCHAR(100)</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">/*创建收藏表 tab_favorite</span><br><span class="line">    rid 旅游线路 id，外键</span><br><span class="line">    date 收藏时间</span><br><span class="line">    uid 用户 id，外键</span><br><span class="line">    rid 和 uid 不能重复，设置复合主键，同一个用户不能收藏同一个线路两次</span><br><span class="line">*/</span><br><span class="line">CREATE TABLE tab_favorite (</span><br><span class="line">	rid INT,</span><br><span class="line">	FOREIGN KEY (rid) REFERENCES tab_route(rid),</span><br><span class="line">	DATE DATETIME,</span><br><span class="line">	uid INT,</span><br><span class="line">	FOREIGN KEY (uid) REFERENCES tab_user(uid),</span><br><span class="line">	PRIMARY KEY (rid,uid)  -- 联合主键</span><br><span class="line">);</span><br></pre></td></tr></table></figure>

<h3 id="9-数据库设计范式"><a href="#9-数据库设计范式" class="headerlink" title="9. 数据库设计范式"></a>9. 数据库设计范式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 第一范式（1NF）：每一列都是不可分割的原子数据项</span><br><span class="line">2. 第二范式（2NF）：在1NF的基础上，非码属性必须完全依赖于码（在1NF基础上消除部分函数依赖）</span><br><span class="line">3. 第三范式（3NF）：在2NF基础上，任何非主属性不依赖于其它非主属性（在2NF基础上消除传递依赖）</span><br></pre></td></tr></table></figure>

<blockquote>
<p>几个概念：</p>
<ol>
<li>函数依赖：A–&gt;B，如果通过A属性(属性组)的值，可以确定<strong>唯一</strong>B属性的值，则称B依赖于A。</li>
<li>完全函数依赖：A–&gt;B， 如果A是一个属性组，则B属性值的确定需要依赖于A属性组中<strong>所有</strong>的属性值。</li>
<li>部分函数依赖：A–&gt;B， 如果A是一个属性组，则B属性值得确定只需要依赖于A属性组中<strong>某一些</strong>值即可。</li>
<li>传递函数依赖：A–&gt;B, B – &gt;C . 如果通过A属性(属性组)的值，可以确定唯一B属性的值，在通过B属性（属性组）的值可以确定唯一C属性的值，则称 C 传递函数依赖于A。</li>
<li>码：一张表中，一个属性或属性组，<strong>被其他所有属性所完全依赖</strong>，则称这个属性(属性组)为该表的码。</li>
</ol>
</blockquote>
<p><strong>第一范式表（1NF）：</strong>原子数据项</p>
<table>
<thead>
<tr>
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
<th>课程名称</th>
<th>分数</th>
</tr>
</thead>
<tbody><tr>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>张三丰</td>
<td>高等数学</td>
<td>95</td>
</tr>
<tr>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>张三丰</td>
<td>大学英语</td>
<td>87</td>
</tr>
<tr>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>张三丰</td>
<td>计算机基础</td>
<td>65</td>
</tr>
<tr>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>任我行</td>
<td>法理学</td>
<td>77</td>
</tr>
<tr>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>任我行</td>
<td>大学英语</td>
<td>87</td>
</tr>
<tr>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>任我行</td>
<td>法律社会学</td>
<td>65</td>
</tr>
<tr>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td>任我行</td>
<td>法律社会学</td>
<td>95</td>
</tr>
<tr>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td>任我行</td>
<td>法理学</td>
<td>97</td>
</tr>
<tr>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td>任我行</td>
<td>大学英语</td>
<td>99</td>
</tr>
</tbody></table>
<blockquote>
<p>存在问题：</p>
<ol>
<li>存在非常严重的数据冗余(重复)：姓名、系名、系主任</li>
<li>数据添加存在问题：添加新开设的系和系主任时，数据不合法</li>
<li>数据删除存在问题：张无忌同学毕业了，删除数据，会将系的数据一起删除。</li>
</ol>
</blockquote>
<p><strong>第二范式表（2NF）：</strong>消除部分函数依赖</p>
<table>
<thead>
<tr>
<th>学号</th>
<th>课程名称</th>
<th>分数</th>
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系主任</th>
</tr>
</thead>
<tbody><tr>
<td>10010</td>
<td>高等数学</td>
<td>95</td>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>张三丰</td>
</tr>
<tr>
<td>10010</td>
<td>大学英语</td>
<td>87</td>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>任我行</td>
</tr>
<tr>
<td>10010</td>
<td>计算机基础</td>
<td>65</td>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td>任我行</td>
</tr>
<tr>
<td>10011</td>
<td>法理学</td>
<td>77</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>大学英语</td>
<td>87</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>法律社会学</td>
<td>65</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>法律社会学</td>
<td>95</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>法理学</td>
<td>97</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>大学英语</td>
<td>99</td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<p><strong>第三范式表（3NF）：</strong>消除传递依赖</p>
<table>
<thead>
<tr>
<th>学号</th>
<th>课程名称</th>
<th>分数</th>
<th>学号</th>
<th>姓名</th>
<th>系名</th>
<th>系名</th>
<th>系主任</th>
</tr>
</thead>
<tbody><tr>
<td>10010</td>
<td>高等数学</td>
<td>95</td>
<td>10010</td>
<td>张无忌</td>
<td>经济系</td>
<td>经济系</td>
<td>张三丰</td>
</tr>
<tr>
<td>10010</td>
<td>大学英语</td>
<td>87</td>
<td>10011</td>
<td>令狐冲</td>
<td>法律系</td>
<td>法律系</td>
<td>任我行</td>
</tr>
<tr>
<td>10010</td>
<td>计算机基础</td>
<td>65</td>
<td>10012</td>
<td>杨过</td>
<td>法律系</td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>法理学</td>
<td>77</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>大学英语</td>
<td>87</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10011</td>
<td>法律社会学</td>
<td>65</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>法律社会学</td>
<td>95</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>法理学</td>
<td>97</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
<tr>
<td>10012</td>
<td>大学英语</td>
<td>99</td>
<td></td>
<td></td>
<td></td>
<td></td>
<td></td>
</tr>
</tbody></table>
<h3 id="10-数据库的备份和还原"><a href="#10-数据库的备份和还原" class="headerlink" title="10. 数据库的备份和还原"></a>10. 数据库的备份和还原</h3><blockquote>
<p> 备份： <code>mysqldump -u用户名 -p密码 数据库名称 &gt; 保存的路径</code></p>
<p>还原：登录数据库—&gt;创建数据库—&gt;使用数据库—&gt;执行文件 source 文件路径</p>
</blockquote>
<h3 id="11-多表查询"><a href="#11-多表查询" class="headerlink" title="11. 多表查询"></a>11. 多表查询</h3><h4 id="隐式内连接"><a href="#隐式内连接" class="headerlink" title="隐式内连接"></a>隐式内连接</h4><blockquote>
<p>使用where条件消除无用数据：<code>SELECT * FROM emp,dept WHERE emp.dept_id = dept.id</code></p>
</blockquote>
<h4 id="显式内连接"><a href="#显式内连接" class="headerlink" title="显式内连接"></a>显式内连接</h4><blockquote>
<p> 表名1 [inner] join 表名2 on 条件：<code>SELECT * FROM emp INNER JOIN dept ON emp.dept_id= dept.id</code></p>
</blockquote>
<h4 id="外链接查询"><a href="#外链接查询" class="headerlink" title="外链接查询"></a>外链接查询</h4><blockquote>
<p>左外连接：查询左表<strong>所有数据</strong>以及其和右表交集部分</p>
<p>语法：select 字段列表 from 表1 left [outer] join 表2 on 条件</p>
<p>右外连接与左外连接正好相反：select 字段列表 from 表1 right [outer] join 表2 on 条件；</p>
</blockquote>
<h4 id="子查询"><a href="#子查询" class="headerlink" title="子查询"></a>子查询</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">查询中嵌套查询，称嵌套查询为子查询。</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>子查询的结果是<strong>单行单列</strong>的：子查询可以作为条件，使用运算符去判断。 </li>
<li>子查询的结果是<strong>多行单列</strong>的：子查询可以作为条件，使用in(结果)来判断。</li>
<li>子查询的结果是<strong>多行多列</strong>的：子查询可以作为一张虚拟表参与查询。</li>
</ol>
</blockquote>
<h3 id="12-事务"><a href="#12-事务" class="headerlink" title="12. 事务"></a>12. 事务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">如果一个包含多个步骤的业务操作，被事务管理，那么这些操作要么同时成功，要么同时失败。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>基本操作：</p>
<ol>
<li>开启事务： <code>start transaction;</code></li>
<li>回滚：<code>rollback;</code></li>
<li>提交：<code>commit;</code></li>
</ol>
</blockquote>
<blockquote>
<p>提交方式：</p>
<ul>
<li>自动提交：一条DML(增删改)语句会自动提交一次事务。（mysql）</li>
<li>手动提交：需要先开启事务，再提交。（Oracle）</li>
<li>修改事务的默认提交方式：<ul>
<li>查看事务的默认提交方式：<code>SELECT @@autocommit;</code>  1 代表自动提交，0 代表手动提交</li>
<li>修改默认提交方式： <code>set @@autocommit = 0;</code></li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="四大特征ACID"><a href="#四大特征ACID" class="headerlink" title="四大特征ACID"></a>四大特征ACID</h4><blockquote>
<ol>
<li><strong>原子性Atomic</strong>：是不可分割的最小操作单位，要么同时成功，要么同时失败。</li>
<li><strong>一致性Consistent</strong>：事务操作前后，数据总量不变</li>
<li><strong>隔离性Isolated</strong>：多个事务之间。相互独立。</li>
<li><strong>持久性Duration</strong>：当事务提交或回滚后，数据库会持久化的保存数据。</li>
</ol>
</blockquote>
<h4 id="隔离级别"><a href="#隔离级别" class="headerlink" title="隔离级别"></a>隔离级别</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">多个事务之间隔离的，相互独立的。但是如果多个事务操作同一批数据，则会引发一些问题：</span><br><span class="line">1. 脏读：一个事务，读取到另一个事务中没有提交的数据</span><br><span class="line">2. 不可重复读(虚读)：在同一个事务中，两次读取到的数据不一样。</span><br><span class="line">3. 幻读：一个事务操作(DML)数据表中所有记录，另一个事务添加了一条数据，则第一个事务查询不到自己的修改。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>四种隔离级别</strong>：</p>
<ol>
<li>read uncommitted：读未提交。产生的问题：脏读、不可重复读、幻读</li>
<li>read committed：读已提交 （Oracle）。产生的问题：不可重复读、幻读</li>
<li>repeatable read：可重复读 （MySQL默认）。产生的问题：幻读</li>
<li>serializable：串行化。可以解决所有的问题</li>
</ol>
</blockquote>
<blockquote>
<p>数据库查询隔离级别：<code>select @@tx_isolation;</code></p>
<p>数据库设置隔离级别：<code>set global transaction isolation level 级别字符串;</code></p>
<p>注意：隔离级别从小到大安全性越来越高，但是效率越来越低</p>
</blockquote>
<h3 id="13-DCL-控制用户权限"><a href="#13-DCL-控制用户权限" class="headerlink" title="13. DCL 控制用户权限"></a>13. DCL 控制用户权限</h3><h4 id="用户管理"><a href="#用户管理" class="headerlink" title="用户管理"></a>用户管理</h4><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>添加</td>
<td>CREATE USER <code>&#39;用户名&#39;@&#39;主机名&#39;</code>IDENTIFIED BY<code>&#39;密码&#39;</code></td>
<td>创建一个用户</td>
</tr>
<tr>
<td>删除</td>
<td>DROP USER <code>&#39;用户名&#39;@&#39;主机名&#39;</code></td>
<td>删除指定用户</td>
</tr>
<tr>
<td>修改</td>
<td>UPDATE USER SET PASSWORD = PASSWORD<code>(&#39;新密码&#39;)</code>WHERE USER =<code>&#39;用户名&#39;</code></td>
<td>修改用户密码</td>
</tr>
<tr>
<td>修改</td>
<td>SET PASSWORD FOR <code>&#39;用户名&#39;@&#39;主机名&#39;</code>= PASSWORD<code>(&#39;新密码&#39;)</code></td>
<td>修改用户密码</td>
</tr>
<tr>
<td>查询</td>
<td>切换到mysql数据库后，SELECT * FROM <code>用户名</code></td>
<td>查询用户信息</td>
</tr>
</tbody></table>
<blockquote>
<p><strong>重置root用户密码：</strong></p>
<ol>
<li>停止mysql服务：管理员运行cmd – &gt; net stop mysql </li>
<li>使用无验证方式启动mysql服务： mysqld –skip-grant-tables</li>
<li>打开新的cmd窗口,直接输入mysql命令，敲回车。就可以登录成功</li>
<li>切换到mysql数据库：use mysql;</li>
<li>重置密码：update user set password = password(‘你的新密码’) where user = ‘root’;</li>
<li>关闭两个窗口</li>
<li>打开任务管理器，手动结束mysqld.exe 的进程</li>
<li>启动mysql服务：net start mysql</li>
<li>使用新密码登录</li>
</ol>
</blockquote>
<h4 id="权限管理"><a href="#权限管理" class="headerlink" title="权限管理"></a>权限管理</h4><table>
<thead>
<tr>
<th>操作</th>
<th>代码</th>
<th>备注</th>
</tr>
</thead>
<tbody><tr>
<td>查询</td>
<td>SHOW GRANTS FOR <code>&#39;用户名&#39;@&#39;主机名&#39;</code></td>
<td>查询权限</td>
</tr>
<tr>
<td>授予</td>
<td>grant <code>权限列表</code> on<code>数据库名.表名</code> to <code>&#39;用户名&#39;@&#39;主机名&#39;</code></td>
<td>授予权限</td>
</tr>
<tr>
<td>撤销</td>
<td>revoke <code>权限列表</code> on<code>数据库名.表名</code> from <code>&#39;用户名&#39;@&#39;主机名&#39;</code></td>
<td>撤销权限</td>
</tr>
</tbody></table>
<blockquote>
<p>通配符： % 表示可以在任意主机使用用户登录数据库；<code>localhost</code>主机名仅限于本机使用。</p>
<p>给user用户授予所有权限，在任意数据库任意表上：</p>
<p>GRANT ALL ON * . * TO ‘user’ @ ‘%’;</p>
</blockquote>
<h3 id="14-JDBC"><a href="#14-JDBC" class="headerlink" title="14. JDBC"></a>14. JDBC</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Java DataBase Connectivity Java ：数据库连接</span><br><span class="line">本质：官方（sun公司）定义的一套操作所有关系型数据库的规则，即接口。各个数据库厂商去实现这套接口，提供数据库驱动jar包。我们可以使用这套接口（JDBC）编程，真正执行的代码是驱动jar包中的实现类。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>操作步骤：</strong></p>
<ol>
<li><p><strong>导入驱动jar包</strong></p>
<ol>
<li>复制mysql-connector-java-5.1.37-bin.jar到项目的libs目录下</li>
<li>右键–&gt;Add As Library</li>
</ol>
</li>
<li><p><strong>注册驱动</strong>（mysql5之后的驱动jar包可以省略注册驱动的步骤）</p>
<p> <code>Class.forName(&quot;com.mysql.jdbc.Driver&quot;);</code></p>
</li>
<li><p><strong>获取数据库连接对象 Connection</strong> </p>
<p> <code>Connection conn = DriverManager.getConnection(String url, String user, String password);</code></p>
</li>
<li><p><strong>定义sql语句</strong></p>
<p><code>String sql = &quot;update account set balance = 500 where id = 1&quot;;</code></p>
</li>
<li><p><strong>获取执行sql的对象 Statement</strong><br><code>Statement stmt = conn.createStatement();</code></p>
</li>
<li><p><strong>执行sql</strong><br><code>int count = stmt.executeUpdate(sql);</code></p>
</li>
<li><p><strong>处理结果</strong></p>
<p><code>System.out.println(count);</code></p>
</li>
<li><p><strong>释放资源</strong><br><code>stmt.close();
conn.close();</code></p>
</li>
</ol>
</blockquote>
<h4 id="Connection-数据库连接对象"><a href="#Connection-数据库连接对象" class="headerlink" title="Connection 数据库连接对象"></a>Connection 数据库连接对象</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Connection conn = DriverManager.getConnection(String url, String user, String password)；</span><br><span class="line">url是指定的连接路径，例如jdbc:mysql://localhost:3306/数据库名称；</span><br><span class="line">如果连接的是本机mysql服务器，并且mysql服务默认端口是3306，则可以简写为jdbc:mysql:///数据库名称</span><br></pre></td></tr></table></figure>

<blockquote>
<p>功能：</p>
<ul>
<li>获取执行sql 的对象：<ul>
<li><code>Statement createStatement()</code></li>
<li><code>PreparedStatement prepareStatement(String sql)</code></li>
</ul>
</li>
<li>管理事务：<ul>
<li>开启事务：<code>setAutoCommit(boolean autoCommit)</code> ：调用该方法设置参数为false，即开启事务</li>
<li>提交事务：<code>commit()</code></li>
<li>回滚事务：<code>rollback()</code></li>
</ul>
</li>
</ul>
</blockquote>
<h4 id="Statement-执行sql的对象"><a href="#Statement-执行sql的对象" class="headerlink" title="Statement 执行sql的对象"></a>Statement 执行sql的对象</h4><blockquote>
<ol>
<li><code>boolean execute(String sql)</code>：可以执行任意的sql </li>
<li><code>int executeUpdate(String sql)</code>：执行DML（insert、update、delete）语句、DDL(create，alter、drop)语句。返回值为影响的行数，可以通过这个影响的行数判断DML语句是否执行成功：返回值&gt;0的则执行成功，反之，则失败。</li>
<li><code>ResultSet executeQuery(String sql)</code>：执行DQL（select)语句</li>
</ol>
</blockquote>
<h4 id="ResultSet-结果集对象"><a href="#ResultSet-结果集对象" class="headerlink" title="ResultSet 结果集对象"></a>ResultSet 结果集对象</h4><blockquote>
<ol>
<li><p><code>boolean next()</code>：游标向下移动一行，判断当前行是否是最后一行末尾(是否有数据)，如果是，则返回false，如果不是则返回true。</p>
</li>
<li><p><code>getXxx(参数)</code>：获取数据，XXX如：int getInt()，String getString()</p>
<p>参数可以是int，代表列的编号，从1开始；也可以是String，代表列名称。</p>
</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码展示,展示指定表中数据</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        <span class="keyword">try</span> (Connection conn = DriverManager.getConnection(<span class="string">"jdbc:mysql:///db_day01"</span>, 				<span class="string">"root"</span>, <span class="string">"root"</span>);</span><br><span class="line">             Statement stmt = conn.createStatement();</span><br><span class="line">             ResultSet rs = stmt.executeQuery(<span class="string">"select * from dept"</span>);)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">while</span> (rs.next()) &#123;</span><br><span class="line">                String DEPTON = rs.getString(<span class="string">"DEPTNO"</span>);</span><br><span class="line">                String DNAME = rs.getString(<span class="string">"DNAME"</span>);</span><br><span class="line">                String LOC = rs.getString(<span class="string">"LOC"</span>);</span><br><span class="line">                System.out.println(DEPTON + <span class="string">"---"</span> + DNAME + <span class="string">"---"</span> + LOC);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="15-JDBCUtils-抽取JDBC工具类"><a href="#15-JDBCUtils-抽取JDBC工具类" class="headerlink" title="15. JDBCUtils 抽取JDBC工具类"></a>15. JDBCUtils 抽取JDBC工具类</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//JDBCUtils 代码展示</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JDBCUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String url;	<span class="comment">//配置文件的四个参数</span></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String user;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String password;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> String driver;	</span><br><span class="line">    <span class="keyword">static</span>&#123; <span class="comment">//静态代码块，完成各个参数的赋值，省略了try...catch语句</span></span><br><span class="line">            Properties pro = <span class="keyword">new</span> Properties(); </span><br><span class="line">            InputStream is = JDBCUtils.class.getClassLoader().getResourceAsStream</span><br><span class="line">                (<span class="string">"jdbc.properties"</span>);	<span class="comment">//通过类加载器获得配置文件路径</span></span><br><span class="line">            pro.load(is); </span><br><span class="line">            url = pro.getProperty(<span class="string">"url"</span>);</span><br><span class="line">            user = pro.getProperty(<span class="string">"user"</span>);</span><br><span class="line">            password = pro.getProperty(<span class="string">"password"</span>);</span><br><span class="line">            driver = pro.getProperty(<span class="string">"driver"</span>);</span><br><span class="line">            Class.forName(driver);&#125;</span><br><span class="line">	<span class="comment">//获取Connection对象的方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> DriverManager.getConnection(url, user, password);</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//释放资源的方法，两种重载形式</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt,Connection conn)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( stmt != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;stmt.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();&#125;&#125;</span><br><span class="line">        <span class="keyword">if</span>( conn != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;               </span><br><span class="line">                e.printStackTrace();&#125;&#125;&#125;</span><br><span class="line">    </span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs, Statement stmt, Connection conn)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span>( rs != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();&#125;&#125;</span><br><span class="line">        <span class="keyword">if</span>( stmt != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;stmt.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();&#125;&#125;</span><br><span class="line">        <span class="keyword">if</span>( conn != <span class="keyword">null</span>)&#123;</span><br><span class="line">            <span class="keyword">try</span> &#123;conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">                e.printStackTrace();&#125;&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="16-用户登录案例与sql注入问题"><a href="#16-用户登录案例与sql注入问题" class="headerlink" title="16. 用户登录案例与sql注入问题"></a>16. 用户登录案例与sql注入问题</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在拼接sql时，有一些sql的特殊关键字参与字符串的拼接，会造成安全性问题。PreparedStatement对象可以解决这个问题，预编SQL语句时使用“？”作为占位符，可以防止SQL注入，同时效率更高。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 使用JDBCUtils完成登录案例代码展示</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">        Scanner sc = <span class="keyword">new</span> Scanner(System.in);</span><br><span class="line">        System.out.println(<span class="string">"请输入用户名："</span>);</span><br><span class="line">        String username = sc.nextLine();</span><br><span class="line">        System.out.println(<span class="string">"请输入密码："</span>);</span><br><span class="line">        String password = sc.nextLine();</span><br><span class="line">        <span class="keyword">boolean</span> flag = login(username, password);</span><br><span class="line">        <span class="keyword">if</span> (flag) &#123;</span><br><span class="line">            System.out.println(<span class="string">"登录成功"</span>);</span><br><span class="line">        &#125;<span class="keyword">else</span>&#123;</span><br><span class="line">            System.out.println(<span class="string">"用户名或密码错误"</span>);</span><br><span class="line">        &#125;&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">boolean</span> <span class="title">login</span><span class="params">(String username, String password)</span></span>&#123;</span><br><span class="line">        <span class="keyword">if</span> (username == <span class="keyword">null</span> || password == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        Connection conn = <span class="keyword">null</span>;</span><br><span class="line">        PreparedStatement pstmt = <span class="keyword">null</span>;</span><br><span class="line">        ResultSet rs = <span class="keyword">null</span>;</span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            conn = JDBCUtils.getConnection();</span><br><span class="line">            <span class="comment">/*特殊关键字拼接sql时会造成安全性问题，例如密码：a' or 'a' = 'a</span></span><br><span class="line"><span class="comment">            String sql = "select * from user where </span></span><br><span class="line"><span class="comment">            	username = '"+username+"' and password = '"+password+"' ";</span></span><br><span class="line"><span class="comment">			stmt = conn.createStatement();</span></span><br><span class="line"><span class="comment">			rs = stmt.executeQuery(sql);</span></span><br><span class="line"><span class="comment">            */</span></span><br><span class="line">            <span class="comment">//使用PreparedStatement对象来解决,参数使用?作为占位符</span></span><br><span class="line">            String sql = <span class="string">"select * from user where username = ? and password = ?"</span>;</span><br><span class="line">            pstmt = conn.prepareStatement(sql);</span><br><span class="line">            pstmt.setString(<span class="number">1</span>, username); <span class="comment">//setXXX方法，参数1为第几个问号的位置，参数2为赋值</span></span><br><span class="line">            pstmt.setString(<span class="number">2</span>, password);</span><br><span class="line">            rs = pstmt.executeQuery();</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">return</span> rs.next();</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125; <span class="keyword">finally</span> &#123;</span><br><span class="line">            JDBCUtils.close(rs, pstmt, conn);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="17-JDBC事务控制"><a href="#17-JDBC事务控制" class="headerlink" title="17. JDBC事务控制"></a>17. JDBC事务控制</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">main</span><span class="params">(String[] args)</span> </span>&#123;</span><br><span class="line">    Connection conn = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement pstmt1 = <span class="keyword">null</span>;</span><br><span class="line">    PreparedStatement pstmt2 = <span class="keyword">null</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        conn = JDBCUtils.getConnection();</span><br><span class="line">        <span class="comment">//开启事务</span></span><br><span class="line">        conn.setAutoCommit(<span class="keyword">false</span>);</span><br><span class="line">        <span class="comment">//张三 - 500</span></span><br><span class="line">        String sql1 = <span class="string">"update account set balance = balance - ? where id = ?"</span>;</span><br><span class="line">        <span class="comment">//李四 + 500</span></span><br><span class="line">        String sql2 = <span class="string">"update account set balance = balance + ? where id = ?"</span>;</span><br><span class="line">        <span class="comment">//获取执行sql对象</span></span><br><span class="line">        pstmt1 = conn.prepareStatement(sql1);</span><br><span class="line">        pstmt2 = conn.prepareStatement(sql2);</span><br><span class="line">        <span class="comment">//设置参数</span></span><br><span class="line">        pstmt1.setDouble(<span class="number">1</span>,<span class="number">500</span>);</span><br><span class="line">        pstmt1.setInt(<span class="number">2</span>,<span class="number">1</span>);</span><br><span class="line">        pstmt2.setDouble(<span class="number">1</span>,<span class="number">500</span>);</span><br><span class="line">        pstmt2.setInt(<span class="number">2</span>,<span class="number">2</span>);</span><br><span class="line">        <span class="comment">//执行张三sql</span></span><br><span class="line">        pstmt1.executeUpdate();</span><br><span class="line">        <span class="comment">// 手动制造异常</span></span><br><span class="line">        <span class="keyword">int</span> i = <span class="number">3</span>/<span class="number">0</span>;</span><br><span class="line">        <span class="comment">//执行李四sql</span></span><br><span class="line">        pstmt2.executeUpdate();</span><br><span class="line">        <span class="comment">//提交事务</span></span><br><span class="line">        conn.commit();</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;  <span class="comment">//发生任何异常，事务回滚</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="keyword">if</span>(conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">                conn.rollback();</span><br><span class="line">            &#125;</span><br><span class="line">        &#125; <span class="keyword">catch</span> (SQLException e1) &#123;</span><br><span class="line">            e1.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        e.printStackTrace();</span><br><span class="line">    &#125;<span class="keyword">finally</span> &#123;</span><br><span class="line">        JDBCUtils.close(pstmt1,conn);</span><br><span class="line">        JDBCUtils.close(pstmt2,<span class="keyword">null</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h3 id="18-数据库连接池"><a href="#18-数据库连接池" class="headerlink" title="18. 数据库连接池"></a>18. 数据库连接池</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">本质是一个存放数据库连接的容器(集合)。当系统初始化好后，容器被创建，容器中会申请一些连接对象，当用户来访问数据库时，从容器中获取连接对象，用户访问完之后，会将连接对象归还给容器。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>好处：针对数据库连接对象的复用，可以节约创建以及销毁数据库连接对象的资源，提高用户访问效率。</p>
<p>标准接口：DataSource </p>
<p>常用方法：获取连接：getConnection()；归还连接：Connection.close()</p>
</blockquote>
<h4 id="C3P0-数据库连接池技术"><a href="#C3P0-数据库连接池技术" class="headerlink" title="C3P0 数据库连接池技术"></a>C3P0 数据库连接池技术</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用步骤：</span></span><br><span class="line"><span class="comment">//1. 导入jar包：【c3p0-0.9.5.2.jar】和【mchange-commons-java-0.2.12.jar】</span></span><br><span class="line"><span class="comment">//2. 定义配置文件：【c3p0.properties】或【c3p0-config.xml】直接放在src目录下</span></span><br><span class="line"><span class="comment">//3. 创建数据库连接池对象</span></span><br><span class="line">DataSource ds = <span class="keyword">new</span> ComboPooledDataSource();</span><br><span class="line"><span class="comment">//4. 获取连接对象</span></span><br><span class="line">Connection conn = ds.getConnection();</span><br></pre></td></tr></table></figure>

<h4 id="Druid-数据库连接池技术"><a href="#Druid-数据库连接池技术" class="headerlink" title="Druid 数据库连接池技术"></a>Druid 数据库连接池技术</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//使用步骤：</span></span><br><span class="line"><span class="comment">//1. 导入jar包【druid-1.0.9.jar】</span></span><br><span class="line"><span class="comment">//2. 定义配置文件：properties文件，可以叫任意名称，放在任意目录下</span></span><br><span class="line">InputStream is = Demo.class.getClassLoader().getResourceAsStream(<span class="string">"druid.properties"</span>);</span><br><span class="line"><span class="comment">//3. 加载配置文件：</span></span><br><span class="line">Properties pro = <span class="keyword">new</span> Properties(); </span><br><span class="line">pro.load(is);</span><br><span class="line"><span class="comment">//4. 获取数据库连接池对象：通过工厂来来获取 </span></span><br><span class="line">DataSource ds = DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line"><span class="comment">//5. 获取连接：</span></span><br><span class="line">Connection conn = ds.getConnection();</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//代码展示：根据Druid技术，定义工具类JDBCUtils</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> DataSource ds;</span><br><span class="line"><span class="comment">//静态代码块中加载配置文件，生成DataSource对象</span></span><br><span class="line"><span class="keyword">static</span>&#123;	</span><br><span class="line">    	Properties pro = <span class="keyword">new</span> Properties();           	         </span><br><span class="line">        pro.load</span><br><span class="line">            (DruidUtils.class.getClassLoader().getResourceAsStream(<span class="string">"druid.properties"</span>));</span><br><span class="line">        ds = DruidDataSourceFactory.createDataSource(pro);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//返回DataSource对象的方法，用于SpringJDBC</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> DataSource <span class="title">getDataSource</span><span class="params">()</span></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ds;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//返回Connection对象的方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Connection <span class="title">getConnection</span><span class="params">()</span> <span class="keyword">throws</span> SQLException </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> ds.getConnection();</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">//两个重载的归还连接方法</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(Statement stmt, Connection conn)</span> </span>&#123;</span><br><span class="line">    close(<span class="keyword">null</span>, stmt, conn);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> <span class="title">close</span><span class="params">(ResultSet rs, Statement stmt, Connection conn)</span> </span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (rs != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;rs.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();&#125;&#125;</span><br><span class="line">    <span class="keyword">if</span> (stmt != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;stmt.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();&#125;&#125;</span><br><span class="line">    <span class="keyword">if</span> (conn != <span class="keyword">null</span>) &#123;</span><br><span class="line">        <span class="keyword">try</span> &#123;conn.close();</span><br><span class="line">            &#125; <span class="keyword">catch</span> (SQLException e) &#123;</span><br><span class="line">            e.printStackTrace();&#125;&#125;&#125;</span><br></pre></td></tr></table></figure>

<h3 id="19-Spring-JDBC"><a href="#19-Spring-JDBC" class="headerlink" title="19. Spring JDBC"></a>19. Spring JDBC</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Spring框架对JDBC的简单封装，提供了一个JDBCTemplate对象简化JDBC的开发。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>常用方法：</p>
<ul>
<li><p>使用数据源DataSource，创建JdbcTemplate对象：</p>
<p><code>JdbcTemplate template = new JdbcTemplate(ds);</code></p>
</li>
<li><p>update()：执行DML增、删、改语句：</p>
<p><code>int count = template.update(sql);</code></p>
</li>
<li><p>queryForMap()：将列名作为key，值作为value，将一条记录封装为一个map集合</p>
<p><code>Map&lt;String, Object&gt; map = template.queryForMap(sql);</code></p>
</li>
<li><p>queryForList()：将每一条记录封装为一个Map集合，再将Map集合装载到List集合中</p>
<p><code>List&lt;Map&lt;String, Object&gt;&gt; list = template.queryForList(sql);</code></p>
</li>
<li><p>query()：查询结果，将结果封装为JavaBean对象</p>
<p><code>List&lt;T&gt; list = template.query(sql, new BeanPropertyRowMapper&lt;T&gt;(T.class));</code></p>
</li>
<li><p>queryForObject：查询结果，将结果封装为对象，一般用于获取单行单列的数值数据</p>
<p><code>String count = template.queryForObject(sql, String.class);</code></p>
</li>
</ul>
</blockquote>
<h3 id="20-Redis"><a href="#20-Redis" class="headerlink" title="20. Redis"></a>20. Redis</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Redis是用C语言开发的一个开源的高性能键值对的NOSQL(Not Only SQL)非关系型数据库，通过将数据缓存于内存中，提升程序的读写效率。官方测试：50个并发执行100000个请求,读的速度是110000次/s,写的速度是81000次/s。</span><br></pre></td></tr></table></figure>

<h4 id="NOSQL和关系型数据库"><a href="#NOSQL和关系型数据库" class="headerlink" title="NOSQL和关系型数据库"></a>NOSQL和关系型数据库</h4><table>
<thead>
<tr>
<th>比较</th>
<th>非关系型数据库</th>
<th>关系型数据库</th>
</tr>
</thead>
<tbody><tr>
<td>成本</td>
<td>基本开源，部署简单</td>
<td>价格高昂</td>
</tr>
<tr>
<td>性能</td>
<td>不支持事务处理，不经过SQL层解析，性能高</td>
<td>事务支持，安全性高，可实现多表复杂查询</td>
</tr>
<tr>
<td>查询速度</td>
<td>数据存储于缓存中，速度快</td>
<td>数据存储于硬盘中，速度慢</td>
</tr>
<tr>
<td>拓展性</td>
<td>数据间没有耦合，容易水平拓展</td>
<td>多表查询机制导致拓展艰难</td>
</tr>
<tr>
<td>维护性</td>
<td>新技术维护工具和资料有限</td>
<td>长时间积累，工具丰富</td>
</tr>
<tr>
<td>存储格式</td>
<td>格式丰富（value、文档、图片等等）</td>
<td>只支持基础类型</td>
</tr>
<tr>
<td>学习成本</td>
<td>没有统一工业标准，学习成本较高</td>
<td>支持sql标准，技能易迁移</td>
</tr>
</tbody></table>
<blockquote>
<p>对于这两类数据库，对方的优势就是自己的弱势，反之亦然。两者是互补的关系，一般会将全部数据存储在关系型数据库中，然后在nosql数据库中备份存储不常变化，使用频率高的数据。</p>
</blockquote>
<h5 id="主流的NOSQL产品"><a href="#主流的NOSQL产品" class="headerlink" title="主流的NOSQL产品"></a>主流的NOSQL产品</h5><blockquote>
<ul>
<li>键值(Key-Value)存储数据库：Tokyo Cabinet/Tyrant、Redis、Voldemort、Berkeley DB</li>
<li>列存储数据库：Cassandra, HBase, Riak</li>
<li>文档型数据库：CouchDB、MongoDB</li>
<li>图形(Graph)数据库：Neo4J、InfoGrid、Infinite Graph</li>
</ul>
</blockquote>
<h4 id="Redis特点"><a href="#Redis特点" class="headerlink" title="Redis特点"></a>Redis特点</h4><blockquote>
<p><strong>Redis速度快的原因：</strong></p>
<ul>
<li>因为Redis使用C语言开发 C语言可以直接操作内存</li>
<li>Redis 是内存（JVM）操作内存（redis数据库）</li>
<li>Redis多路复用的IO</li>
<li>Redis是单线程的，避免了并发和锁对性能的消耗</li>
</ul>
<p><strong>Redis支持的键值数据类型：</strong></p>
<ul>
<li>字符串类型 string</li>
<li>哈希类型 hash</li>
<li>列表类型 list：linkedlist格式，支持重复元素</li>
<li>集合类型 set：不允许重复元素</li>
<li>有序集合类型 sortedset：不允许重复元素，且元素有顺序</li>
</ul>
</blockquote>
<h4 id="Redis命令操作"><a href="#Redis命令操作" class="headerlink" title="Redis命令操作"></a>Redis命令操作</h4><blockquote>
<ul>
<li><p>字符串类型（String）</p>
<ol>
<li>存储：<code>set key value</code></li>
<li>获取：<code>get key</code></li>
<li>删除：<code>del key</code></li>
</ol>
</li>
<li><p>哈希类型（hash）</p>
<ol>
<li><p>存储：<code>hset key field value</code></p>
</li>
<li><p>获取：<code>hget key field</code>：获取指定的field对应的值</p>
<p>​            <code>hgetall key</code>：获取所有的field和value</p>
</li>
<li><p>删除：<code>hdel key field</code></p>
</li>
</ol>
</li>
<li><p>列表类型（list）</p>
<ol>
<li><p>添加：<code>lpush key value：将元素加入列表左表</code></p>
<p>​            <code>rpush key value：将元素加入列表右边</code></p>
</li>
<li><p>获取：<code>lrange key start end</code>：start为起始位置，end为结束位置（0 -1可获取所有元素）</p>
</li>
<li><p>删除：<code>lpop key</code>：删除列表最左边的元素，并将元素返回</p>
<p>​            <code>rpop key</code>：删除列表最右边的元素，并将元素返回</p>
</li>
</ol>
</li>
<li><p>集合类型（set）：不允许重复元素</p>
<ol>
<li>存储：<code>sadd key value</code>：将一个value放入key集合中</li>
<li>获取：<code>smembers key</code>：获取set集合中所有元素</li>
<li>删除：<code>srem key value</code>：删除set集合中的某个元素</li>
</ol>
</li>
<li><p>有序集合类型（sortedset） ：不允许重复元素，且元素有顺序。</p>
<p>每个元素都会关联一个double类型的分数，redis通过该分数来为集合中的成员进行从小到大的排序。</p>
<ol>
<li>存储：<code>zadd key score value</code></li>
<li>获取：<code>zrange key start end [withscores]</code></li>
<li>删除：<code>zrem key value</code></li>
</ol>
</li>
<li><p>通用命令：</p>
<ol>
<li>获取所有的键：<code>keys *</code></li>
<li>获取键对应的value类型：<code>type key</code></li>
<li>删除指定的key-value：<code>del key</code></li>
</ol>
</li>
</ul>
</blockquote>
<h4 id="Redis持久化机制"><a href="#Redis持久化机制" class="headerlink" title="Redis持久化机制"></a>Redis持久化机制</h4><blockquote>
<ul>
<li><p>RDB：在一定的间隔时间中，检测key的变化情况，然后持久化数据。为Redis默认持久化方式，通过编辑redis.windwos.conf文件可以自定义持久化参数：</p>
<p><code>save 900 1</code>：after 900 sec (15 min) if at least 1 key changed </p>
<p><code>save 60 10000</code>：after 60 sec if at least 10000 keys changed</p>
</li>
<li><p>AOF：日志记录的方式，可以记录每一条命令的操作。触发设定的动作后，持久化数据，通过编辑redis.windwos.conf文件可以自定义持久化参数：</p>
<p><code>appendonly no</code>（关闭aof） –&gt; <code>appendonly yes</code>（开启aof）</p>
<p><code>appendfsync always</code>：每一次操作都进行持久化</p>
<p><code>appendfsync everysec</code>：每隔一秒进行一次持久化</p>
<p><code>appendfsync no</code>：不进行持久化</p>
</li>
</ul>
</blockquote>
<h3 id="21-Jedis"><a href="#21-Jedis" class="headerlink" title="21. Jedis"></a>21. Jedis</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">一款java操作redis数据库的工具。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Jedis方法：</p>
<ul>
<li>获取连接：<code>Jedis jedis = new Jedis(&quot;localhost&quot;,6379);</code></li>
<li>操作：<code>jedis.set(&quot;username&quot;,&quot;zhangsan&quot;);</code></li>
<li>关闭连接：<code>jedis.close();</code></li>
<li>指定过期时间：<code>jedis.setex(&quot;activecode&quot;,20,&quot;hehe&quot;);</code></li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//jedis连接池</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JedisPoolUtils</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">static</span> JedisPool jedisPool;</span><br><span class="line">    <span class="keyword">static</span>&#123;</span><br><span class="line">        <span class="comment">//读取配置文件</span></span><br><span class="line">        InputStream is = JedisPoolUtils.class.getClassLoader().</span><br><span class="line">            				getResourceAsStream(<span class="string">"jedis.properties"</span>);</span><br><span class="line">        <span class="comment">//创建Properties对象</span></span><br><span class="line">        Properties pro = <span class="keyword">new</span> Properties();</span><br><span class="line">        <span class="comment">//关联文件</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            pro.load(is);</span><br><span class="line">        &#125; <span class="keyword">catch</span> (IOException e) &#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">//获取数据，设置到JedisPoolConfig中</span></span><br><span class="line">        JedisPoolConfig config = <span class="keyword">new</span> JedisPoolConfig();</span><br><span class="line">        <span class="comment">// 将字符串转化为int 使用Integer.parseInt("")</span></span><br><span class="line">        config.setMaxTotal(Integer.parseInt(pro.getProperty(<span class="string">"maxTotal"</span>)));</span><br><span class="line">        config.setMaxIdle(Integer.parseInt(pro.getProperty(<span class="string">"maxIdle"</span>)));</span><br><span class="line">        <span class="comment">//初始化JedisPool</span></span><br><span class="line">        jedisPool = <span class="keyword">new</span> JedisPool(config,pro.getProperty(<span class="string">"host"</span>),</span><br><span class="line">                                  Integer.parseInt(pro.getProperty(<span class="string">"port"</span>)));</span><br><span class="line">    &#125;</span><br><span class="line">	<span class="comment">//获取连接方法</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">static</span> Jedis <span class="title">getJedis</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> jedisPool.getResource();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="22-Oracle"><a href="#22-Oracle" class="headerlink" title="22. Oracle"></a>22. Oracle</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ORACLE数据库是目前最流行的C/S或B/S体系结构的关系型数据库，具有完整的数据管理和分布式处理的功能。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>数据库：</strong>Oracle数据库是一个操作系统只有一个库，可以看做是Oracle就只有一个大数据库。</p>
<p><strong>实例：</strong>一个Oracle实例（Oracle Instance）有一系列的后台进程（Backguound Processes)和内存结构        （Memory Structures)组成。一个数据库可以有n个实例。</p>
<p><strong>用户：</strong>用户在实例下建立，不同实例可以创建相同名字的用户。</p>
<p><strong>表空间：</strong>表空间是Oracle对物理数据库上相关数据文件（ORA或者DBF文件）的逻辑映射。每个表空间由同一磁盘上的一个或多个文件组成，这些文件叫数据文件(datafile)。一个数据文件只能属于一个表空间。</p>
<p><strong>数据文件：</strong>数据文件（dbf、ora）是数据库的物理存储单位，一个表空间可以由一个或多个数据文件组成，一个数据文件只能属于一个表空间。一旦数据文件被加入到某个表空间后，就不能删除这个文件，如果要删除某个数据文件，只能删除其所属于的表空间才行。</p>
<p>oracle通过用户和表空间对数据进行管理和存放，但是表不是由表空间去查询的，而是由用户去查询。不同用户可以在同一个表空间建立同一个名字的表，同名的表通过不同用户来区分。</p>
</blockquote>
<h4 id="创建表空间"><a href="#创建表空间" class="headerlink" title="创建表空间"></a>创建表空间</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">create tablespace itcast   	//指定表空间名称</span><br><span class="line">datafile &apos;c:\itcast.dbf&apos; 	//指定表空间对应的数据文件</span><br><span class="line">size 100m 					//指定表空间的初始大小</span><br><span class="line">autoextend on 				//当表空间存储都占满时，自动增长</span><br><span class="line">next 10m					//指定一次自动增长的大小</span><br></pre></td></tr></table></figure>

<h4 id="创建用户"><a href="#创建用户" class="headerlink" title="创建用户"></a>创建用户</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">create user itcastuser		//指定用户名 </span><br><span class="line">identified by itcast		//指定用户密码 </span><br><span class="line">default tablespace itcast	//指定表空间名称</span><br><span class="line">grant dba to itcastuser		//为用户赋予权限</span><br></pre></td></tr></table></figure>

<blockquote>
<p>Oracle中三个重要的角色：connect角色（用户），resource角色（开发人员），dba角色（最高权限）。</p>
</blockquote>
<h4 id="表的管理"><a href="#表的管理" class="headerlink" title="表的管理"></a>表的管理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">创建person表： </span><br><span class="line">create table person( </span><br><span class="line">    pid number(10), </span><br><span class="line">    name varchar2(10), </span><br><span class="line">    gender number(1) default 1, </span><br><span class="line">    birthday date </span><br><span class="line">);</span><br><span class="line">表删除：</span><br><span class="line">DROP TABLE 表名</span><br><span class="line">表的修改：</span><br><span class="line">在person表中增加列address：</span><br><span class="line">alter table person add(address varchar2(10));</span><br><span class="line">把person表的address列的长度修改成20长度：</span><br><span class="line">alter table person modify(address varchar2(20));</span><br></pre></td></tr></table></figure>

<h4 id="数据的管理"><a href="#数据的管理" class="headerlink" title="数据的管理"></a>数据的管理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">INSERT（增加）：</span><br><span class="line">INSERT INTO表名[(列名1，列名2，...)]VALUES(值1，值2，...)</span><br><span class="line">UPDATE（修改）：</span><br><span class="line">UPDATE 表名 SET 列名1=值1，列名2=值2，....WHERE 修改条件；</span><br><span class="line">DELETE（删除）：</span><br><span class="line">语法 : DELETE FROM 表名 WHERE 删除条件;</span><br></pre></td></tr></table></figure>

<h4 id="序列"><a href="#序列" class="headerlink" title="序列"></a>序列</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">创建序列：</span><br><span class="line">CREATE SEQUENCE 序列名</span><br><span class="line">select seqpersonid.nextval from dual 取得序列的下一个内容</span><br><span class="line">select seqpersonid.currval from dual 取得序列的当前内容</span><br></pre></td></tr></table></figure>

<h4 id="其他函数"><a href="#其他函数" class="headerlink" title="其他函数"></a>其他函数</h4><p>空值处理nvl：由于null和任何数值计算都是null，通过nvl处理，可以将null转换为0，<code>nvl(comm,0)</code>。</p>
<h4 id="Rownum与分页查询"><a href="#Rownum与分页查询" class="headerlink" title="Rownum与分页查询"></a>Rownum与分页查询</h4><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">----emp表工资倒叙排列后，每页五条记录，查询第二页。</span></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span>(</span><br><span class="line">    <span class="keyword">select</span> <span class="keyword">rownum</span> rn, tt.* <span class="keyword">from</span>(</span><br><span class="line">          <span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">order</span> <span class="keyword">by</span> sal <span class="keyword">desc</span></span><br><span class="line">    ) tt <span class="keyword">where</span> <span class="keyword">rownum</span>&lt;<span class="number">11</span></span><br><span class="line">) <span class="keyword">where</span> rn&gt;<span class="number">5</span></span><br></pre></td></tr></table></figure>

<h4 id="Oracle视图"><a href="#Oracle视图" class="headerlink" title="Oracle视图"></a>Oracle视图</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">视图就是封装了一条复杂查询的语句，提供一个查询的窗口，所有数据来自于原表。</span><br><span class="line">语法：CREATE OR REPLACE VIEW 视图名称 AS 子查询 with read only</span><br><span class="line">例如：create view v_emp as select ename, job from emp with read only;</span><br><span class="line">作用：可以屏蔽掉一些敏感字段，保证总部和分部数据及时统一。</span><br></pre></td></tr></table></figure>

<h4 id="索引"><a href="#索引" class="headerlink" title="索引"></a>索引</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">索引就是在表的列上构建一个二叉树 B+Tree，达到大幅度提高查询效率的目的，但是索引会影响增删改的效率。</span><br><span class="line">单列索引：create index idx_ename on emp(ename); 触发条件：必须是索引列中的原始值</span><br><span class="line">复合索引：create index idx_enamejob on emp(ename, job); 触发条件：能优先检索列中的原始值</span><br><span class="line">使用原则：</span><br><span class="line">1. 在大表上建立索引才有意义</span><br><span class="line">2. 在where子句后面或者是连接条件上的字段建立索引</span><br><span class="line">3. 表中数据修改频率高时不建议建立索引</span><br></pre></td></tr></table></figure>

<h3 id="23-pl-sql语言"><a href="#23-pl-sql语言" class="headerlink" title="23. pl/sql语言"></a>23. pl/sql语言</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">PL/SQL（Procedure Language/SQL）是Oracle对sql语言的过程化扩展，在SQL命令语言中增加了过程处理语句（如分支、循环等），使SQL语言具有过程处理能力，结合了SQL语言的数据操纵能力与过程语言的数据处理能力。</span><br></pre></td></tr></table></figure>

<h4 id="基本语法"><a href="#基本语法" class="headerlink" title="基本语法"></a>基本语法</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">程序语法：</span><br><span class="line">    declare</span><br><span class="line">        说明部分 （变量说明，游标申明，例外说明）</span><br><span class="line">    begin</span><br><span class="line">        语句序列 （DML语句）…</span><br><span class="line">    exception</span><br><span class="line">        例外处理语句</span><br><span class="line">    End;</span><br></pre></td></tr></table></figure>

<h5 id="变量的类型"><a href="#变量的类型" class="headerlink" title="变量的类型"></a>变量的类型</h5><p>基本类型：char, varchar2, date, number, boolean, long</p>
<p>引用变量：Myname emp.ename%type; 在sql中使用into来赋值</p>
<p>记录型变量：e1 emp%rowtype</p>
<h5 id="if分支"><a href="#if分支" class="headerlink" title="if分支"></a>if分支</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">语法1：</span><br><span class="line">IF 条件 THEN 语句1;</span><br><span class="line">	语句2;</span><br><span class="line">	END IF;</span><br><span class="line">语法2：</span><br><span class="line">IF 条件 THEN 语句序列1；</span><br><span class="line">	ELSE 语句序列 2；</span><br><span class="line">	END IF；</span><br><span class="line">语法3：</span><br><span class="line">IF 条件 THEN 语句;</span><br><span class="line">	ELSIF 语句 THEN 语句;</span><br><span class="line">	ELSE 语句;</span><br><span class="line">	END IF;</span><br></pre></td></tr></table></figure>

<h5 id="LOOP循环语句"><a href="#LOOP循环语句" class="headerlink" title="LOOP循环语句"></a>LOOP循环语句</h5><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--while循环</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  i <span class="built_in">number</span>(<span class="number">2</span>) := <span class="number">1</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">while</span> i &lt; <span class="number">11</span> <span class="keyword">loop</span></span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">    i := i + 1;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--exit循环</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  i <span class="built_in">number</span>(<span class="number">2</span>) := <span class="number">1</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">loop</span></span><br><span class="line">    <span class="keyword">exit</span> <span class="keyword">when</span> i &gt; <span class="number">10</span>;</span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">    i := i + 1;</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">--for循环</span></span><br><span class="line"><span class="keyword">declare</span> </span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">1.</span><span class="number">.10</span> <span class="keyword">loop</span></span><br><span class="line">    dbms_output.put_line(i);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">loop</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h5 id="游标"><a href="#游标" class="headerlink" title="游标"></a>游标</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">游标可以存储查询返回的多条数据</span><br><span class="line">游标的创建：</span><br><span class="line">	cursor c1 is select ename from emp;</span><br><span class="line">游标使用步骤：</span><br><span class="line">	打开游标： open c1; (打开游标执行查询)</span><br><span class="line">	取一行游标的值：fetch c1 into pjob; (取一行到变量中)</span><br><span class="line">	关闭游标： close c1;(关闭游标释放资源)</span><br><span class="line">	游标的结束方式 exit when c1%notfound</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">范例：按员工的工种涨工资,总裁1000元，经理涨800元其，他人员涨400元</span><br><span class="line">create table myemp as select * from emp;</span><br><span class="line">declare </span><br><span class="line">	cursor pc is select * from myemp; </span><br><span class="line">	addsal myemp.sal%type; </span><br><span class="line">	pemp myemp%rowtype; </span><br><span class="line">begin </span><br><span class="line">	open pc; </span><br><span class="line">	loop </span><br><span class="line">        fetch pc into pemp; </span><br><span class="line">        exit when pc%notfound; </span><br><span class="line">        if pemp.job = &apos;PRESIDENT&apos; then </span><br><span class="line">            addsal := 1000; </span><br><span class="line">        elsif pemp.job = &apos;MANAGER&apos; then </span><br><span class="line">            addsal := 800; </span><br><span class="line">        else addsal := 400;</span><br><span class="line">        end if; </span><br><span class="line">        update myemp t set t.sal = t.sal + addsal where t.empno = pemp.empno; </span><br><span class="line">	end loop; </span><br><span class="line">	close pc; </span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<h3 id="24-存储过程"><a href="#24-存储过程" class="headerlink" title="24. 存储过程"></a>24. 存储过程</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">存储过程（Stored Procedure）是在大型数据库系统中，一组为了完成特定功能的SQL语句集，经编译后存储在数据库中，用户通过指定存储过程的名字并给出参数（如果该存储过程带有参数）来执行它。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">创建存储过程:</span><br><span class="line">create [or replace] PROCEDURE 过程名[(参数名 in/out 数据类型)]</span><br><span class="line">AS</span><br><span class="line">begin</span><br><span class="line">	PLSQL子程序体；</span><br><span class="line">End;</span><br><span class="line"></span><br><span class="line">调用存储过程:</span><br><span class="line">begin </span><br><span class="line">	-- Call the procedure </span><br><span class="line">	过程名; </span><br><span class="line">end;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 创建存储过程，通过工号求年薪</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">procedure</span> p_yearsal(eno emp.empno%<span class="keyword">type</span>, yearsal <span class="keyword">out</span> <span class="built_in">number</span>)</span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">  s <span class="built_in">number</span>(<span class="number">10</span>);</span><br><span class="line">  c emp.comm%type;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> sal*<span class="number">12</span>,nvl(comm,<span class="number">0</span>) <span class="keyword">into</span> s,c <span class="keyword">from</span> emp <span class="keyword">where</span> empno = eno;</span><br><span class="line">  yearsal := s+c;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">-- 调用存储过程</span></span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line">  yearsal <span class="built_in">number</span>(<span class="number">10</span>);</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  p_yearsal(<span class="number">7788</span>,yearsal);</span><br><span class="line">  dbms_output.put_line(yearsal);</span><br><span class="line"><span class="keyword">end</span>;</span><br></pre></td></tr></table></figure>

<h3 id="25-存储函数"><a href="#25-存储函数" class="headerlink" title="25. 存储函数"></a>25. 存储函数</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">function</span> 函数名(<span class="keyword">Name</span> <span class="keyword">in</span> <span class="keyword">type</span>, <span class="keyword">Name</span> <span class="keyword">in</span> <span class="keyword">type</span>, ...) <span class="keyword">return</span> 数据类型 <span class="keyword">is</span></span><br><span class="line">	结果变量 数据类型;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">	<span class="keyword">return</span>(结果变量);</span><br><span class="line"><span class="keyword">end</span>函数名;</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">--使用存储函数来实现提供一个部门编号，输出一个部门名称</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">table</span> dept <span class="keyword">as</span> <span class="keyword">select</span> * <span class="keyword">from</span> scott.dept;</span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">function</span> fdna(dno dept.deptno%<span class="keyword">type</span>) <span class="keyword">return</span> dept.dname%<span class="keyword">type</span></span><br><span class="line"><span class="keyword">is</span></span><br><span class="line">  dna dept.dname%<span class="keyword">type</span>;</span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">select</span> dname <span class="keyword">into</span> dna <span class="keyword">from</span> dept <span class="keyword">where</span> deptno = dno;</span><br><span class="line">  return dna;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"><span class="comment">-- 调用存储函数</span></span><br><span class="line"><span class="keyword">select</span> e.ename, fdna(e.deptno) <span class="keyword">from</span> emp e;</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>存储过程和存储函数的区别</strong><br>存储过程和函数的区别在于函数可以有一个返回值；而过程没有返回值。<br>但过程和函数都可以通过out指定一个或多个输出参数。利用out参数可以在过程和函数中实现返回多个值。</p>
</blockquote>
<h3 id="26-触发器"><a href="#26-触发器" class="headerlink" title="26. 触发器"></a>26. 触发器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">数据库触发器是一个与表相关联的、存储的PL/SQL程序。每当一个特定的数据操作语句(Insert,update,delete)在指定的表上发出时，Oracle自动地执行触发器中定义的语句序列。</span><br></pre></td></tr></table></figure>

<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">-- 禁止给员工降薪的触发器</span></span><br><span class="line"><span class="keyword">create</span> <span class="keyword">or</span> <span class="keyword">replace</span> <span class="keyword">trigger</span> t2</span><br><span class="line"><span class="keyword">before</span></span><br><span class="line"><span class="keyword">update</span></span><br><span class="line"><span class="keyword">on</span> emp </span><br><span class="line"><span class="keyword">for</span> <span class="keyword">each</span> <span class="keyword">row</span> </span><br><span class="line"><span class="keyword">declare</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">begin</span></span><br><span class="line">  <span class="keyword">if</span> :old.sal&gt;:new.sal <span class="keyword">then</span></span><br><span class="line">    raise_application_error(<span class="number">-20001</span>,<span class="string">'不能给员工降薪'</span>);</span><br><span class="line">  <span class="keyword">end</span> <span class="keyword">if</span>;</span><br><span class="line"><span class="keyword">end</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">select</span> * <span class="keyword">from</span> emp <span class="keyword">where</span> empno = <span class="number">7788</span>;</span><br><span class="line"><span class="keyword">update</span> emp <span class="keyword">set</span> sal = sal<span class="number">-1</span> <span class="keyword">where</span> empno = <span class="number">7788</span>;</span><br><span class="line"><span class="keyword">commit</span>;</span><br></pre></td></tr></table></figure>

<h3 id="27-Java程序调用存储过程"><a href="#27-Java程序调用存储过程" class="headerlink" title="27. Java程序调用存储过程"></a>27. Java程序调用存储过程</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Test</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">javaCallProcedure</span><span class="params">()</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">    Class.forName(<span class="string">"oracle.jdbc.driver.OracleDriver"</span>);</span><br><span class="line">    Connection connection = DriverManager.getConnection(</span><br><span class="line">        <span class="string">"jdbc:oracle:thin:@192.168.44.130:1521:orcl"</span>, <span class="string">"itcastuser"</span>, <span class="string">"itcast"</span>);</span><br><span class="line">    CallableStatement call = connection.prepareCall(<span class="string">"&#123;call p_yearsal(?,?)&#125;"</span>);</span><br><span class="line">    call.setObject(<span class="number">1</span>, <span class="number">7788</span>);</span><br><span class="line">    call.registerOutParameter(<span class="number">2</span>, OracleTypes.NUMBER);</span><br><span class="line">    call.execute();</span><br><span class="line">    System.out.println(call.getObject(<span class="number">2</span>));</span><br><span class="line">    call.close();</span><br><span class="line">    connection.close();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/16/Web前端知识点总结/" rel="prev" title="Web前端">
                Web前端 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Inhaltsverzeichnis
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Übersicht
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Eric</p>
              <div class="site-description motion-element" itemprop="description">Eric's Knowledge Base</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">3</span>
                    <span class="site-state-item-name">Artikel</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#数据库知识点总结"><span class="nav-number">1.</span> <span class="nav-text">数据库知识点总结</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-数据库的基本概念"><span class="nav-number">1.0.1.</span> <span class="nav-text">1. 数据库的基本概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-MySQL配置操作"><span class="nav-number">1.0.2.</span> <span class="nav-text">2. MySQL配置操作</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-SQL概念"><span class="nav-number">1.0.3.</span> <span class="nav-text">3. SQL概念</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-DDL-定义数据库"><span class="nav-number">1.0.4.</span> <span class="nav-text">4. DDL 定义数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#操作数据库"><span class="nav-number">1.0.4.1.</span> <span class="nav-text">操作数据库</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#操作表"><span class="nav-number">1.0.4.2.</span> <span class="nav-text">操作表</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-DML-增删改表中数据"><span class="nav-number">1.0.5.</span> <span class="nav-text">5. DML 增删改表中数据</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-DQL-查询表中记录"><span class="nav-number">1.0.6.</span> <span class="nav-text">6. DQL 查询表中记录</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基础查询"><span class="nav-number">1.0.6.1.</span> <span class="nav-text">基础查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#条件查询"><span class="nav-number">1.0.6.2.</span> <span class="nav-text">条件查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#排序查询"><span class="nav-number">1.0.6.3.</span> <span class="nav-text">排序查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#聚合函数"><span class="nav-number">1.0.6.4.</span> <span class="nav-text">聚合函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分组查询"><span class="nav-number">1.0.6.5.</span> <span class="nav-text">分组查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#分页查询"><span class="nav-number">1.0.6.6.</span> <span class="nav-text">分页查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-约束"><span class="nav-number">1.0.7.</span> <span class="nav-text">7. 约束</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#非空约束"><span class="nav-number">1.0.7.1.</span> <span class="nav-text">非空约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#唯一约束"><span class="nav-number">1.0.7.2.</span> <span class="nav-text">唯一约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#主键约束"><span class="nav-number">1.0.7.3.</span> <span class="nav-text">主键约束</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#外键约束"><span class="nav-number">1.0.7.4.</span> <span class="nav-text">外键约束</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-数据库的设计"><span class="nav-number">1.0.8.</span> <span class="nav-text">8. 数据库的设计</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-数据库设计范式"><span class="nav-number">1.0.9.</span> <span class="nav-text">9. 数据库设计范式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-数据库的备份和还原"><span class="nav-number">1.0.10.</span> <span class="nav-text">10. 数据库的备份和还原</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-多表查询"><span class="nav-number">1.0.11.</span> <span class="nav-text">11. 多表查询</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#隐式内连接"><span class="nav-number">1.0.11.1.</span> <span class="nav-text">隐式内连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#显式内连接"><span class="nav-number">1.0.11.2.</span> <span class="nav-text">显式内连接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#外链接查询"><span class="nav-number">1.0.11.3.</span> <span class="nav-text">外链接查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#子查询"><span class="nav-number">1.0.11.4.</span> <span class="nav-text">子查询</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-事务"><span class="nav-number">1.0.12.</span> <span class="nav-text">12. 事务</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#四大特征ACID"><span class="nav-number">1.0.12.1.</span> <span class="nav-text">四大特征ACID</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#隔离级别"><span class="nav-number">1.0.12.2.</span> <span class="nav-text">隔离级别</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-DCL-控制用户权限"><span class="nav-number">1.0.13.</span> <span class="nav-text">13. DCL 控制用户权限</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#用户管理"><span class="nav-number">1.0.13.1.</span> <span class="nav-text">用户管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#权限管理"><span class="nav-number">1.0.13.2.</span> <span class="nav-text">权限管理</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-JDBC"><span class="nav-number">1.0.14.</span> <span class="nav-text">14. JDBC</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Connection-数据库连接对象"><span class="nav-number">1.0.14.1.</span> <span class="nav-text">Connection 数据库连接对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Statement-执行sql的对象"><span class="nav-number">1.0.14.2.</span> <span class="nav-text">Statement 执行sql的对象</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#ResultSet-结果集对象"><span class="nav-number">1.0.14.3.</span> <span class="nav-text">ResultSet 结果集对象</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-JDBCUtils-抽取JDBC工具类"><span class="nav-number">1.0.15.</span> <span class="nav-text">15. JDBCUtils 抽取JDBC工具类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-用户登录案例与sql注入问题"><span class="nav-number">1.0.16.</span> <span class="nav-text">16. 用户登录案例与sql注入问题</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-JDBC事务控制"><span class="nav-number">1.0.17.</span> <span class="nav-text">17. JDBC事务控制</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#18-数据库连接池"><span class="nav-number">1.0.18.</span> <span class="nav-text">18. 数据库连接池</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#C3P0-数据库连接池技术"><span class="nav-number">1.0.18.1.</span> <span class="nav-text">C3P0 数据库连接池技术</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Druid-数据库连接池技术"><span class="nav-number">1.0.18.2.</span> <span class="nav-text">Druid 数据库连接池技术</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-Spring-JDBC"><span class="nav-number">1.0.19.</span> <span class="nav-text">19. Spring JDBC</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-Redis"><span class="nav-number">1.0.20.</span> <span class="nav-text">20. Redis</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#NOSQL和关系型数据库"><span class="nav-number">1.0.20.1.</span> <span class="nav-text">NOSQL和关系型数据库</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#主流的NOSQL产品"><span class="nav-number">1.0.20.1.1.</span> <span class="nav-text">主流的NOSQL产品</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis特点"><span class="nav-number">1.0.20.2.</span> <span class="nav-text">Redis特点</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis命令操作"><span class="nav-number">1.0.20.3.</span> <span class="nav-text">Redis命令操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis持久化机制"><span class="nav-number">1.0.20.4.</span> <span class="nav-text">Redis持久化机制</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-Jedis"><span class="nav-number">1.0.21.</span> <span class="nav-text">21. Jedis</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-Oracle"><span class="nav-number">1.0.22.</span> <span class="nav-text">22. Oracle</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#创建表空间"><span class="nav-number">1.0.22.1.</span> <span class="nav-text">创建表空间</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#创建用户"><span class="nav-number">1.0.22.2.</span> <span class="nav-text">创建用户</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#表的管理"><span class="nav-number">1.0.22.3.</span> <span class="nav-text">表的管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#数据的管理"><span class="nav-number">1.0.22.4.</span> <span class="nav-text">数据的管理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#序列"><span class="nav-number">1.0.22.5.</span> <span class="nav-text">序列</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#其他函数"><span class="nav-number">1.0.22.6.</span> <span class="nav-text">其他函数</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Rownum与分页查询"><span class="nav-number">1.0.22.7.</span> <span class="nav-text">Rownum与分页查询</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Oracle视图"><span class="nav-number">1.0.22.8.</span> <span class="nav-text">Oracle视图</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#索引"><span class="nav-number">1.0.22.9.</span> <span class="nav-text">索引</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-pl-sql语言"><span class="nav-number">1.0.23.</span> <span class="nav-text">23. pl/sql语言</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#基本语法"><span class="nav-number">1.0.23.1.</span> <span class="nav-text">基本语法</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#变量的类型"><span class="nav-number">1.0.23.1.1.</span> <span class="nav-text">变量的类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#if分支"><span class="nav-number">1.0.23.1.2.</span> <span class="nav-text">if分支</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#LOOP循环语句"><span class="nav-number">1.0.23.1.3.</span> <span class="nav-text">LOOP循环语句</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#游标"><span class="nav-number">1.0.23.1.4.</span> <span class="nav-text">游标</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-存储过程"><span class="nav-number">1.0.24.</span> <span class="nav-text">24. 存储过程</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-存储函数"><span class="nav-number">1.0.25.</span> <span class="nav-text">25. 存储函数</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-触发器"><span class="nav-number">1.0.26.</span> <span class="nav-text">26. 触发器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#27-Java程序调用存储过程"><span class="nav-number">1.0.27.</span> <span class="nav-text">27. Java程序调用存储过程</span></a></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Eric</span>

  

  
</div>


  <div class="powered-by">Erstellt mit  <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Design – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.2</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>




  
  <script src="/js/scrollspy.js?v=7.1.2"></script>
<script src="/js/post-details.js?v=7.1.2"></script>



  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  


  


  




  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
