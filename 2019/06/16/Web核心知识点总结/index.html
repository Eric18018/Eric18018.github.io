<!DOCTYPE html>












  


<html class="theme-next gemini use-motion" lang="zh-Hans">
<head><meta name="generator" content="Hexo 3.8.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.7.0">

<link rel="stylesheet" href="/css/main.css?v=7.1.2">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.2">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.2">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.2" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Gemini',
    version: '7.1.2',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Web核心知识点总结1. XML概述1Extensible Markup Language 可扩展标记语言，自定义标签，使用标记语言的特性描述数据结构，主要作为配置文件用于数据的存储以及传输。   语法特点：  文档后缀名：xml 第一行必须定义为文档声明 文档中有且仅有一个根标签，所有标签必须闭合，区分大小写 属性值必须加引号  文档声明：  格式：&amp;lt;?xml version=&amp;quot;">
<meta property="og:type" content="article">
<meta property="og:title" content="web核心">
<meta property="og:url" content="http://yoursite.com/2019/06/16/Web核心知识点总结/index.html">
<meta property="og:site_name" content="Space">
<meta property="og:description" content="Web核心知识点总结1. XML概述1Extensible Markup Language 可扩展标记语言，自定义标签，使用标记语言的特性描述数据结构，主要作为配置文件用于数据的存储以及传输。   语法特点：  文档后缀名：xml 第一行必须定义为文档声明 文档中有且仅有一个根标签，所有标签必须闭合，区分大小写 属性值必须加引号  文档声明：  格式：&amp;lt;?xml version=&amp;quot;">
<meta property="og:locale" content="zh-Hans">
<meta property="og:updated_time" content="2019-06-16T01:56:55.520Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="web核心">
<meta name="twitter:description" content="Web核心知识点总结1. XML概述1Extensible Markup Language 可扩展标记语言，自定义标签，使用标记语言的特性描述数据结构，主要作为配置文件用于数据的存储以及传输。   语法特点：  文档后缀名：xml 第一行必须定义为文档声明 文档中有且仅有一个根标签，所有标签必须闭合，区分大小写 属性值必须加引号  文档声明：  格式：&amp;lt;?xml version=&amp;quot;">





  
  
  <link rel="canonical" href="http://yoursite.com/2019/06/16/Web核心知识点总结/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>web核心 | Space</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  
  
    
  

  <div class="container sidebar-position-left page-post-detail">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Space</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Cambiar a barra de navegación">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-document">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-tasks"></i> <br>文档</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-javacore">

    
    
    
      
    

    

    <a href="/2019/06/16/Java%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" rel="section"><i class="menu-item-icon fa fa-fw fa-coffee"></i> <br>Java核心</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-database">

    
    
    
      
    

    

    <a href="/2019/06/16/%E6%95%B0%E6%8D%AE%E5%BA%93%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" rel="section"><i class="menu-item-icon fa fa-fw fa-database"></i> <br>数据库</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-html">

    
    
    
      
    

    

    <a href="/2019/06/16/Web%E5%89%8D%E7%AB%AF%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" rel="section"><i class="menu-item-icon fa fa-fw fa-globe"></i> <br>Web前端</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-webcore">

    
    
    
      
    

    

    <a href="/2019/06/16/Web%E6%A0%B8%E5%BF%83%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" rel="section"><i class="menu-item-icon fa fa-fw fa-cube"></i> <br>Web核心</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-ssmframwork">

    
    
    
      
    

    

    <a href="/2019/06/16/%E6%A1%86%E6%9E%B6%E7%9F%A5%E8%AF%86%E7%82%B9%E6%80%BB%E7%BB%93/" rel="section"><i class="menu-item-icon fa fa-fw fa-leaf"></i> <br>SSM框架</a>

  </li>

      
      
        <li class="menu-item menu-item-search">
          
            <a href="javascript:;" class="popup-trigger">
          
            
              <i class="menu-item-icon fa fa-search fa-fw"></i> <br>Buscar</a>
        </li>
      
    </ul>
  

  

  
    <div class="site-search">
      
  <div class="popup search-popup local-search-popup">
  <div class="local-search-header clearfix">
    <span class="search-icon">
      <i class="fa fa-search"></i>
    </span>
    <span class="popup-btn-close">
      <i class="fa fa-times-circle"></i>
    </span>
    <div class="local-search-input-wrapper">
      <input autocomplete="off" placeholder="Buscando..." spellcheck="false" type="text" id="local-search-input">
    </div>
  </div>
  <div id="local-search-result"></div>
</div>



    </div>
  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            

  <div id="posts" class="posts-expand">
    

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://yoursite.com/2019/06/16/Web核心知识点总结/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="Eric">
      <meta itemprop="description" content="Eric's Knowledge Base">
      <meta itemprop="image" content="/images/avatar.gif">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Space">
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">web核心

              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Publicado el</span>
              

              
                
              

              <time title="Creado por: 2019-06-16 15:29:54 / Modificado por: 09:56:55" itemprop="dateCreated datePublished" datetime="2019-06-16T15:29:54+08:00">2019-06-16</time>
            

            
              

              
            
          </span>

          

          
            
            
          

          
          

          

          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        <h1 id="Web核心知识点总结"><a href="#Web核心知识点总结" class="headerlink" title="Web核心知识点总结"></a>Web核心知识点总结</h1><h3 id="1-XML概述"><a href="#1-XML概述" class="headerlink" title="1. XML概述"></a>1. XML概述</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Extensible Markup Language 可扩展标记语言，自定义标签，使用标记语言的特性描述数据结构，主要作为配置文件用于数据的存储以及传输。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>语法特点：</strong></p>
<ol>
<li>文档后缀名：xml</li>
<li>第一行必须定义为文档声明</li>
<li>文档中有且仅有一个根标签，所有标签必须闭合，区分大小写</li>
<li>属性值必须加引号</li>
</ol>
<p><strong>文档声明：</strong></p>
<ol>
<li>格式：<code>&lt;?xml version=&quot;1.0&quot; encoding = &quot;UTF-8&quot; standalone = &quot;yes&quot;?&gt;</code></li>
<li>version 版本号是必须的属性；</li>
<li>encoding 告知解析引擎当前文档使用的字符集，默认值：ISO-8859-1 不支持汉</li>
<li>standalone 是否独立，取值yes为不依赖其他文件，取值no为依赖其他文件</li>
</ol>
<p><strong>指令：</strong></p>
<ol>
<li>结合CSS指令：<code>&lt; ?xml-stylesheet type=&quot;text/css&quot; href=&quot;a.css&quot; ?&gt;</code></li>
<li>CDATA区（数据原样展示，不被解析）：<code>&lt;![CDATA[ 数据 ]]&gt;</code></li>
</ol>
</blockquote>
<h3 id="2-XML约束"><a href="#2-XML约束" class="headerlink" title="2. XML约束"></a>2. XML约束</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">规定xml文档的书写规则，不影响解析，主要有两种技术：</span><br><span class="line">DTD:一种简单的约束技术，约束的内容较为简单；Schema:一种复杂的约束技术，约束的内容较为详细</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>DTD引入：</strong></p>
<ul>
<li><p>内部dtd：将约束规则定义在xml文档中</p>
</li>
<li><p>外部dtd：将约束的规则定义在外部的dtd文件中</p>
<p>本地：<code>&lt; !DOCTYPE 根标签名 SYSTEM &quot;dtd文件的位置&quot;&gt;</code></p>
<p>网络：<code>&lt; !DOCTYPE 根标签名 PUBLIC &quot;dtd文件名字&quot; &quot;dtd文件的位置URL&quot;&gt;</code></p>
</li>
</ul>
<p><strong>Schema引入：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&gt; 1. 填写xml文档的根元素:</span><br><span class="line">&gt; 	&lt;beans</span><br><span class="line">&gt; 2. 引入xsd约束的标准，并声明前缀xsi：</span><br><span class="line">&gt; 	xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance</span><br><span class="line">&gt; 3. 给xsi的location参数赋值，说明引入的xsd文件路径，路径前是xsd文件的命名空间：</span><br><span class="line">&gt; 	xsi:schemaLocation=&quot;</span><br><span class="line">&gt;         http://www.springframework.org/schema/beans（命名空间） 		</span><br><span class="line">&gt;         http://www.springframework.org/schema/beans/spring-beans.xsd（文件路径）</span><br><span class="line">&gt;         http://www.springframework.org/schema/context （命名空间）</span><br><span class="line">&gt;         http://www.springframework.org/schema/context/spring-context.xsd（文件路径）</span><br><span class="line">&gt;         http://www.springframework.org/schema/mvc（命名空间）</span><br><span class="line">&gt;         http://www.springframework.org/schema/mvc/spring-mvc.xsd&quot;（文件路径）</span><br><span class="line">&gt; 4. 为每一个xsd约束声明一个前缀，作为标识：</span><br><span class="line">&gt; 	xmlns=&quot;http://www.springframework.org/schema/beans&quot;（无前缀为默认）</span><br><span class="line">&gt; 	xmlns:context=&quot;http://www.springframework.org/schema/context&quot;（前缀context）</span><br><span class="line">&gt; 	xmlns:mvc=&quot;http://www.springframework.org/schema/mvc&quot;（前缀mvc）&gt;	</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="3-XML解析"><a href="#3-XML解析" class="headerlink" title="3. XML解析"></a>3. XML解析</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">操作xml文档，将文档中的数据读取到内存中</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>解析的方式：</strong></p>
<ol>
<li><p>DOM：将标记语言文档一次性加载进内存，在内存中形成一颗DOM树</p>
<p>优点：操作方便，可以对文档进行CRUD操作；缺点：占内存</p>
</li>
<li><p>SAX：逐行读取，基于事件驱动</p>
<p>优点：不占内存；缺点：只能读取，不能增删改</p>
</li>
</ol>
<p><strong>常见解析器</strong>：</p>
<ol>
<li>JAXP：sun公司提供的解析器，支持dom和sax两种思想</li>
<li>DOM4J：一款非常优秀的解析器。应用广泛，对XPath支持度高</li>
<li>Jsoup：jsoup 是一款Java 的HTML解析器，可直接解析某个URL地址、HTML文本内容。它提供了一套非常省力的API，可通过DOM，CSS以及类似于jQuery的操作方法来取出和操作数据</li>
<li>PULL：Android操作系统内置的解析器，sax方式的</li>
</ol>
</blockquote>
<h4 id="Jsoup解析器"><a href="#Jsoup解析器" class="headerlink" title="Jsoup解析器"></a>Jsoup解析器</h4><blockquote>
<p>Jsoup方法：</p>
<ol>
<li><p>parse解析，返回Document：</p>
<ul>
<li>parse(File in, String charsetName)：解析xml或html文件的</li>
<li>parse(String html)：解析xml或html字符串</li>
<li>parse(URL url, int timeoutMillis)：通过网络路径获取指定的html或xml的文档对象</li>
</ul>
</li>
<li><p>通过Document的方法获取Elements对象：</p>
<ul>
<li>getElementById(String id)：根据id属性值获取唯一的element对象</li>
<li>getElementsByTag(String tagName)：根据标签名称获取元素对象集合</li>
<li>getElementsByAttribute(String key)：根据属性名称获取元素对象集合</li>
<li>getElementsByAttributeValue(String key, String value)：根据属性名和属性值获取元素对象集合</li>
</ul>
</li>
<li><p>通过Elements集合获取元素Element（Elements可当做ArrayList使用）：</p>
<ul>
<li>String attr(String key)：根据属性名称获取属性值</li>
<li>String text():获取文本内容</li>
<li>String html():获取标签体的所有内容(包括子标签及其字符串内容)</li>
</ul>
</li>
<li><p>selector选择器：</p>
<ul>
<li><p>document.select(String cssQuery)，返回Elements</p>
</li>
<li><p>cssQuery语法参考Selector类中定义的语法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt;       <span class="comment">//示例：获取student标签并且number属性值为heima_0001的age子标签</span></span><br><span class="line">&gt;      	document.select(<span class="string">"student[number=\"heima_0001\"] &gt; age"</span>);</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ol>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//Jsoup使用步骤</span></span><br><span class="line"><span class="comment">//0.导入jar包：jsoup-1.11.2.jar</span></span><br><span class="line"><span class="comment">//1.获取要解析文件的路径</span></span><br><span class="line">String path = Demo01Jsoup.class.getClassLoader().getResource(<span class="string">"url"</span>).getPath();</span><br><span class="line"><span class="comment">//2.通过Jsoup的方法解析，加载文档进内存，获取Document对象</span></span><br><span class="line">Document document = Jsoup.parse(<span class="keyword">new</span> File(path), <span class="string">"utf-8"</span>);</span><br><span class="line"><span class="comment">//3.获取元素对象集合</span></span><br><span class="line">Elements elements = document.getElementsByTag(<span class="string">"name"</span>);</span><br><span class="line"><span class="comment">//4.获取单个元素对象</span></span><br><span class="line">Element element = elements.get(<span class="number">1</span>);</span><br><span class="line">System.out.println(element.html());	<span class="comment">//获取标签体的所有内容(包括子标签)</span></span><br><span class="line">System.out.println(element.text());	<span class="comment">//获取文本内容</span></span><br></pre></td></tr></table></figure>

<h4 id="Xpath路径语言"><a href="#Xpath路径语言" class="headerlink" title="Xpath路径语言"></a>Xpath路径语言</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">XPath即为XML路径语言，它是一种用来确定XML（标准通用标记语言的子集）文档中某部分位置的语言，使用Jsoup的Xpath需要额外导入jar包，Jsoup只支持XPath1.0。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//XPath使用演示：</span></span><br><span class="line"><span class="comment">//1.获取要解析文件的路径</span></span><br><span class="line">String path = Demo01Jsoup.class.getClassLoader().getResource(<span class="string">"url"</span>).getPath();</span><br><span class="line"><span class="comment">//2.通过Jsoup的方法解析，加载文档进内存，获取Document对象</span></span><br><span class="line">Document document = Jsoup.parse(<span class="keyword">new</span> File(path), <span class="string">"utf-8"</span>);</span><br><span class="line"><span class="comment">//3.根据document对象，创建JXDocument对象</span></span><br><span class="line">JXDocument jxDocument = <span class="keyword">new</span> JXDocument(document);</span><br><span class="line"><span class="comment">//4.结合xpath语法查询符合条件的结果并输出</span></span><br><span class="line">List&lt;JXNode&gt; jxNodes = jxDocument.selN(<span class="string">"条件"</span>);</span><br><span class="line"><span class="keyword">for</span> (JXNode jxNode : jxNodes) &#123;</span><br><span class="line">    System.out.println(jxNode);&#125;</span><br><span class="line"><span class="comment">//条件示范：</span></span><br><span class="line"><span class="comment">//查询所有student标签：</span></span><br><span class="line">jxDocument.selN(<span class="string">"//student"</span>); </span><br><span class="line"><span class="comment">//查询所有student标签下的name标签：</span></span><br><span class="line">jxDocument.selN(<span class="string">"//student/name"</span>); </span><br><span class="line"><span class="comment">//查询student标签下带有id属性的name标签：</span></span><br><span class="line">jxDocument.selN(<span class="string">"//student/name[@id]"</span>); </span><br><span class="line"><span class="comment">//查询student标签下带有id属性的name标签，并且id属性值为itcast：</span></span><br><span class="line">jxDocument.selN(<span class="string">"//student/name[@id='itcast']"</span>);</span><br></pre></td></tr></table></figure>

<h3 id="4-web服务器软件"><a href="#4-web服务器软件" class="headerlink" title="4. web服务器软件"></a>4. web服务器软件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">web服务器软件搭载在服务器上，可以部署web项目，让用户通过浏览器来访问这些项目</span><br><span class="line">常见的java相关的web服务器软件：</span><br><span class="line">	webLogic：oracle公司，大型的JavaEE服务器，支持所有的JavaEE规范，收费。</span><br><span class="line">	webSphere：IBM公司，大型的JavaEE服务器，支持所有的JavaEE规范，收费。</span><br><span class="line">	JBOSS：JBOSS公司的，大型的JavaEE服务器，支持所有的JavaEE规范，收费。</span><br><span class="line">	Tomcat：Apache基金组织，中小型的JavaEE服务器，支持少量的JavaEE规范servlet/jsp，开源，免费。</span><br></pre></td></tr></table></figure>

<h4 id="Tomcat介绍"><a href="#Tomcat介绍" class="headerlink" title="Tomcat介绍"></a>Tomcat介绍</h4><blockquote>
<p>启动：打开bin/startup.bat</p>
<p>关闭：打开bin/shutdown.bat或在命令行ctrl+c</p>
<p>部署项目的三种方式：</p>
<ol>
<li><p>将项目打包成war(zip)包，放到<code>webapps</code>目录下即可</p>
<p>war包会自动解压缩，若需部署多个项目，可以放到虚拟目录中区分不同的项目。</p>
</li>
<li><p>配置<code>conf/server.xm</code>l文件</p>
<ul>
<li>docBase:项目存放的路径  </li>
<li>path：虚拟目录</li>
</ul>
</li>
<li><p>在<code>conf\Catalina\localhost</code>创建xml文件</p>
<p>xml文件名为虚拟目录名</p>
<p>xml文件中编写<context docbase="D:\hello"></context></p>
</li>
</ol>
</blockquote>
<h3 id="5-Servlet接口"><a href="#5-Servlet接口" class="headerlink" title="5. Servlet接口"></a>5. Servlet接口</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Servlet就是一个接口，定义了Java类被浏览器访问到(tomcat识别)的规则。</span><br><span class="line">Java类只要实现了这个接口，那么这个类就可以被浏览器访问到（让该类代码执行）。</span><br></pre></td></tr></table></figure>

<h4 id="访问原理"><a href="#访问原理" class="headerlink" title="访问原理"></a>访问原理</h4><blockquote>
<pre><code>1. 当服务器接受到客户端浏览器的请求后，会解析请求URL路径，获取访问的Servlet的资源路径</code></pre><ol start="2">
<li>查找web.xml文件，是否有对应的<url-pattern>标签体内容。</url-pattern></li>
<li>如果有，则在找到对应的<servlet-class>全类名</servlet-class></li>
<li>tomcat会将字节码文件加载进内存，并且通过反射机制创建其对象</li>
<li>调用其方法</li>
</ol>
</blockquote>
<h4 id="使用步骤"><a href="#使用步骤" class="headerlink" title="使用步骤"></a>使用步骤</h4><blockquote>
<ol>
<li><p>创建JavaEE项目</p>
</li>
<li><p>定义一个类，实现Servlet接口<code>public class ServletDemo1 implements Servlet</code></p>
</li>
<li><p>实现接口中的抽象方法</p>
</li>
<li><p><strong>配置Servlet</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">&gt;    <span class="comment">//方法一： </span></span><br><span class="line">&gt;    在web.xml中配置：</span><br><span class="line">&gt;    	&lt;!--配置Servlet --&gt;</span><br><span class="line">&gt;    	&lt;servlet&gt;</span><br><span class="line">&gt;    	        &lt;servlet-name&gt;demo1&lt;/servlet-name&gt;</span><br><span class="line">&gt;    	        &lt;servlet-<span class="class"><span class="keyword">class</span>&gt;<span class="title">cn</span>.<span class="title">itcast</span>.<span class="title">web</span>.<span class="title">servlet</span>.<span class="title">ServletDemo1</span>&lt;/<span class="title">servlet</span>-<span class="title">class</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    	&lt;/<span class="title">servlet</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    	</span></span><br><span class="line"><span class="class">&gt;    	&lt;<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    		&lt;<span class="title">servlet</span>-<span class="title">name</span>&gt;<span class="title">demo1</span>&lt;/<span class="title">servlet</span>-<span class="title">name</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    		&lt;<span class="title">url</span>-<span class="title">pattern</span>&gt;/<span class="title">demo1</span>&lt;/<span class="title">url</span>-<span class="title">pattern</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    	&lt;/<span class="title">servlet</span>-<span class="title">mapping</span>&gt;</span></span><br><span class="line"><span class="class">&gt;    	/*在&lt;<span class="title">servlet</span>&gt;标签下配置 &lt;<span class="title">load</span>-<span class="title">on</span>-<span class="title">startup</span>&gt;，赋值：</span></span><br><span class="line"><span class="class">&gt;    		值为负数：第一次被访问时创建</span></span><br><span class="line"><span class="class">&gt;    	    值为非负数：在服务器启动时创建*/    </span></span><br><span class="line"><span class="class">&gt;    //方法二：</span></span><br><span class="line">&gt;    在类上使用@WebServlet("/资源路径")注解，进行配置 (Servlet3.0版本以上)</span><br><span class="line">&gt;    <span class="comment">//一个Servlet可以定义多个访问路径 ： @WebServlet(&#123;"/d4","/dd4","/ddd4"&#125;)</span></span><br><span class="line">&gt;    <span class="comment">//路径定义规则：</span></span><br><span class="line">&gt;       <span class="number">1</span>. /xxx/xxx:多层路径，目录结构</span><br><span class="line">&gt;       <span class="number">2</span>. *.<span class="keyword">do</span>：扩展名匹配(任何以.<span class="keyword">do</span>结尾都可以匹配到)                             </span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<h4 id="内部方法"><a href="#内部方法" class="headerlink" title="内部方法"></a>内部方法</h4><blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">init</span><span class="params">(ServletConfig servletConfig)</span> <span class="keyword">throws</span> ServletException </span>&#123;</span><br><span class="line">&gt; 	<span class="comment">//Servlet的init方法，只执行一次，说明一个Servlet在内存中只存在一个对象，Servlet是单例的</span></span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(ServletRequest servletRequest, ServletResponse servletResponse)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">&gt;     <span class="comment">//每次访问Servlet时，Service方法都会被调用一次。</span></span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">destroy</span><span class="params">()</span> </span>&#123;</span><br><span class="line">&gt; 	<span class="comment">//destroy方法在Servlet服务器正常关闭之前才会执行，一般用于释放资源。</span></span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> String <span class="title">getServletInfo</span><span class="params">()</span> </span>&#123;   <span class="comment">//不常用</span></span><br><span class="line">&gt;     <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; <span class="meta">@Override</span></span><br><span class="line">&gt; <span class="function"><span class="keyword">public</span> ServletConfig <span class="title">getServletConfig</span><span class="params">()</span> </span>&#123;   <span class="comment">//不常用</span></span><br><span class="line">&gt;     <span class="keyword">return</span> <span class="keyword">null</span>;  </span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="体系结构"><a href="#体系结构" class="headerlink" title="体系结构"></a>体系结构</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">op1=&gt;operation: Servlet -- 接口</span><br><span class="line">op2=&gt;operation: GenericServlet -- 抽象类</span><br><span class="line">op3=&gt;operation: HttpServlet  -- 抽象类</span><br><span class="line">op1-&gt;op2-&gt;op3</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>GenericServlet：将Servlet接口中其他的方法做了默认空实现，只将service()方法作为抽象。继承后实现service()方法即可。</li>
<li>HttpServlet：对http协议的一种封装，简化操作。复写doGet/doPost方法。</li>
</ul>
</blockquote>
<h3 id="6-HTTP协议"><a href="#6-HTTP协议" class="headerlink" title="6. HTTP协议"></a>6. HTTP协议</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Hyper Text Transfer Protocol 超文本传输协议：定义了客户端和服务器端通信时，发送数据的格式</span><br><span class="line">客户端和服务器必须同时遵守HTTP协议，才能通信</span><br></pre></td></tr></table></figure>

<blockquote>
<p>特点：</p>
<ol>
<li>基于TCP/IP的高级协议</li>
<li>默认端口号：80</li>
<li>基于请求/响应模型的：一次请求对应一次响应</li>
<li>无状态的：每次请求之间相互独立，不能交互数据</li>
</ol>
</blockquote>
<blockquote>
<p>版本：</p>
<ul>
<li>1.0：每一次请求响应都会建立新的连接Connection，较耗费资源</li>
<li>1.1：复用连接，Connection复用，省略了重复创建连接所耗费的资源</li>
<li>2.0：1.X版本都是使用文本传输数据，2.0开始使用字节传输，多路复用，速率提升</li>
</ul>
</blockquote>
<h3 id="7-请求消息数据格式"><a href="#7-请求消息数据格式" class="headerlink" title="7. 请求消息数据格式"></a>7. 请求消息数据格式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">POST /login.html	HTTP/1.1  <span class="comment">&lt;!--1.请求行：请求方式+请求url+请求协议/版本--&gt;</span></span><br><span class="line">Host: localhost     <span class="comment">&lt;!--2.请求头：IP地址+User-Agent浏览器信息+Referer来源+...--&gt;</span></span><br><span class="line">User-Agent: Mozilla/5.0 (Windows NT 6.1; Win64; x64; rv:60.0) Gecko/20100101 Firefox/60.0</span><br><span class="line">Accept: text/html,application/xhtml+xml,application/xml;q=0.9,;q=0.8</span><br><span class="line">Accept-Language: zh-CN,zh;q=0.8,zh-TW;q=0.7,zh-HK;q=0.5,en-US;q=0.3,en;q=0.2</span><br><span class="line">Accept-Encoding: gzip, deflate</span><br><span class="line">Referer: http://localhost/login.html<span class="comment">&lt;!--告诉服务器请求的来源--&gt;</span></span><br><span class="line">Connection: keep-alive</span><br><span class="line">Upgrade-Insecure-Requests: 1	<span class="comment">&lt;!--2.请求头--&gt;</span></span><br><span class="line"><span class="comment">&lt;!--3.请求空行：分割请求头和请求体--&gt;</span></span><br><span class="line">username=zhangsan	<span class="comment">&lt;!--4.请求体(正文)：封装POST请求消息的请求参数--&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>常见的请求头：</p>
<ol>
<li>User-Agent：浏览器告诉服务器，我访问你使用的浏览器版本信息。服务器端可以获取该信息，针对不同浏览器设置参数，解决浏览器的兼容性问题。</li>
<li>Referer：<a href="http://localhost/login.html：告诉服务器当前请求的来源。作用：防盗链，统计工作。" target="_blank" rel="noopener">http://localhost/login.html：告诉服务器当前请求的来源。作用：防盗链，统计工作。</a></li>
</ol>
</blockquote>
<h3 id="8-Request对象"><a href="#8-Request对象" class="headerlink" title="8. Request对象"></a>8. Request对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request对象用来获取请求消息，response对象用来设置响应消息，request和response对象都是由服务器创建的。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>request对象继承体系结构：</strong></p>
<p>​                        ServletRequest 接口<br>​                                     |    继承<br>​                 HttpServletRequest 接口<br>​                                     |    实现<br>org.apache.catalina.connector.RequestFacade 类(tomcat)<br>在用户发出请求的时候 会自动的创建RequestFacade对象</p>
</blockquote>
<h4 id="获取请求消息数据的方法"><a href="#获取请求消息数据的方法" class="headerlink" title="获取请求消息数据的方法"></a>获取请求消息数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取请求方式 </span></span><br><span class="line">String method = request.getMethod();	<span class="comment">// GET</span></span><br><span class="line"><span class="comment">//获取虚拟目录 </span></span><br><span class="line">String contextPath = request.getContextPath();	<span class="comment">// day03</span></span><br><span class="line"><span class="comment">//获取Servlet路径 </span></span><br><span class="line">String servletPath = request.getServletPath();	<span class="comment">// /Demo01Servlet</span></span><br><span class="line"><span class="comment">//获取get方式请求参数 </span></span><br><span class="line">String queryString = request.getQueryString();	<span class="comment">// username=zhangsan</span></span><br><span class="line"><span class="comment">//获取请求URI、URL</span></span><br><span class="line">String requestURI = request.getRequestURI();	<span class="comment">// /day03/Demo01Servlet</span></span><br><span class="line">StringBuffer requestURL = request.getRequestURL();</span><br><span class="line"><span class="comment">//http://localhost:8080/day03/Demo01Servlet</span></span><br><span class="line"><span class="comment">//获取协议及版本 </span></span><br><span class="line">String protocol = request.getProtocol();	<span class="comment">// HTTP/1.1</span></span><br><span class="line"><span class="comment">//获取客户机的IP地址 </span></span><br><span class="line">String remoteAddr = request.getRemoteAddr();	<span class="comment">// 0:0:0:0:0:0:0:1</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>URL：统一资源定位符：<a href="http://localhost/day14/demo1" target="_blank" rel="noopener">http://localhost/day14/demo1</a>    （中华人民共和国）</li>
<li>URI：统一资源标识符：/day14/demo1        （共和国）</li>
</ul>
</blockquote>
<h4 id="获取请求头数据的方法"><a href="#获取请求头数据的方法" class="headerlink" title="获取请求头数据的方法"></a>获取请求头数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="function">String <span class="title">getHeader</span><span class="params">(String name)</span>:通过请求头的名称获取请求头的值</span></span><br><span class="line"><span class="function">Enumeration&lt;String&gt; <span class="title">getHeaderNames</span><span class="params">()</span>:获取所有的请求头名称，封装为键值对</span></span><br><span class="line"><span class="function">    <span class="comment">//使用示范：</span></span></span><br><span class="line"><span class="function">    Enumeration&lt;String&gt; headerNames </span>= request.getHeaderNames();</span><br><span class="line">        <span class="keyword">while</span> (headerNames.hasMoreElements()) &#123;</span><br><span class="line">            String name = headerNames.nextElement();</span><br><span class="line">            String value = request.getHeader(name);</span><br><span class="line">            System.out.println(name + <span class="string">"------"</span> + value);&#125;</span><br><span class="line">    <span class="comment">/*输出结果：</span></span><br><span class="line"><span class="comment">    host------localhost:8080</span></span><br><span class="line"><span class="comment">    connection------keep-alive</span></span><br><span class="line"><span class="comment">    cache-control------max-age=0</span></span><br><span class="line"><span class="comment">    upgrade-insecure-requests------1</span></span><br><span class="line"><span class="comment">    user-agent------Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML,     like Gecko) Chrome/74.0.3729.108 Safari/537.36</span></span><br><span class="line"><span class="comment">    accept-----text/html,application/xhtml+xml,application/xml;</span></span><br><span class="line"><span class="comment">    accept-encoding------gzip, deflate, br</span></span><br><span class="line"><span class="comment">    accept-language------zh-CN,zh;q=0.9</span></span><br><span class="line"><span class="comment">    cookie------_xsrf=2|50c9000a|7b65bf12b3842e1198f0522667c61f08|1554439214; */</span></span><br></pre></td></tr></table></figure>

<h4 id="获取请求体数据的方法"><a href="#获取请求体数据的方法" class="headerlink" title="获取请求体数据的方法"></a>获取请求体数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//请求体：只有POST请求方式，才有请求体，在请求体中封装了POST请求的请求参数</span></span><br><span class="line"><span class="comment">//步骤：1. 获取流对象</span></span><br><span class="line">	<span class="function">BufferedReader <span class="title">getReader</span><span class="params">()</span>：获取字符输入流，只能操作字符数据</span></span><br><span class="line"><span class="function">	ServletInputStream <span class="title">getInputStream</span><span class="params">()</span>：获取字节输入流，可以操作所有类型数据</span></span><br><span class="line"><span class="function">	<span class="comment">//2. 再从流对象中拿数据</span></span></span><br></pre></td></tr></table></figure>

<h4 id="获取请求参数通用方式"><a href="#获取请求参数通用方式" class="headerlink" title="获取请求参数通用方式"></a>获取请求参数通用方式</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. <span class="function">String <span class="title">getParameter</span><span class="params">(String name)</span>:根据参数名称获取参数值 </span></span><br><span class="line"><span class="function">2. String[] <span class="title">getParameterValues</span><span class="params">(String name)</span>:根据参数名称获取参数值的数组  </span></span><br><span class="line"><span class="function">3. Enumeration&lt;String&gt; <span class="title">getParameterNames</span><span class="params">()</span>:获取所有请求的参数名称</span></span><br><span class="line"><span class="function">4. Map&lt;String,String[]&gt; <span class="title">getParameterMap</span><span class="params">()</span>:获取所有参数的map集合</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>中文乱码问题：post方式会乱码，我们在获取前端传递的参数之前，都进行设置编码</p>
<p><code>request.setCharacterEncoding(&quot;utf-8&quot;);</code></p>
</blockquote>
<h4 id="请求转发的方法"><a href="#请求转发的方法" class="headerlink" title="请求转发的方法"></a>请求转发的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request.getRequestDispatcher(<span class="string">"String path"</span>).forward(request,response);</span><br></pre></td></tr></table></figure>

<blockquote>
<ol>
<li>浏览器地址栏路径不发生变化</li>
<li>只能转发到当前服务器内部资源中</li>
<li>转发是一次请求，多个资源用的是同一个请求</li>
</ol>
</blockquote>
<h4 id="共享数据的方法"><a href="#共享数据的方法" class="headerlink" title="共享数据的方法"></a>共享数据的方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="number">1</span>. <span class="function"><span class="keyword">void</span> <span class="title">setAttribute</span><span class="params">(String name,Object obj)</span>:存储数据</span></span><br><span class="line"><span class="function">2. Object <span class="title">getAttitude</span><span class="params">(String name)</span>:通过键获取值</span></span><br><span class="line"><span class="function">3. <span class="keyword">void</span> <span class="title">removeAttribute</span><span class="params">(String name)</span>:通过键移除键值对</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>域对象：一个有作用范围的对象，可以在范围内共享数据</li>
<li>request域：代表一次请求的范围，一般用于请求转发的多个资源中共享数据</li>
</ul>
</blockquote>
<h3 id="9-BeanUtils工具类"><a href="#9-BeanUtils工具类" class="headerlink" title="9. BeanUtils工具类"></a>9. BeanUtils工具类</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">用于封装标准JavaBean的工具类，按照属性进行映射。</span><br><span class="line">属性：setter和getter方法截取后的产物，例如：getUsername() --&gt; Username--&gt; username</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方法：</p>
<ol>
<li>setProperty()</li>
<li>getProperty()</li>
<li>populate(Object obj , Map map)：将map集合的键值对信息，封装到对应的JavaBean对象中</li>
</ol>
</blockquote>
<h3 id="10-响应消息数据格式"><a href="#10-响应消息数据格式" class="headerlink" title="10. 响应消息数据格式"></a>10. 响应消息数据格式</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">HTTP/1.1 200 OK  	<span class="comment">&lt;!--1.响应行：协议/版本+响应状态码+状态码描述--&gt;</span></span><br><span class="line">Content-Type: text/html;charset=UTF-8<span class="comment">&lt;!--2.响应头--&gt;</span></span><br><span class="line">Content-Length: 101</span><br><span class="line">Date: Wed, 06 Jun 2018 07:08:42 GMT</span><br><span class="line">	<span class="comment">&lt;!--3.响应空行--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span>&gt;</span>			<span class="comment">&lt;!--4.响应体:传输的数据--&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">title</span>&gt;</span>$Title$<span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">		hello , response</span><br><span class="line">	<span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span>			<span class="comment">&lt;!--4.响应体:传输的数据--&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li>响应状态码：服务器告诉客户端浏览器本次请求和响应的一个状态，状态码都是3位数字。<ul>
<li>1xx：服务器接收客户端消息，但没有接受完成，等待一段时间后，发送1xx多状态码</li>
<li>2xx：成功。代表：200</li>
<li>3xx：重定向。代表：302(重定向)，304(访问缓存)</li>
<li>4xx：客户端错误。代表：404(请求路径没有对应的资源)，405：(请求方式没有对应的doXxx方法)</li>
<li>5xx：服务器端错误。代表：500(服务器内部出现异常，写的代码有bug)</li>
</ul>
</li>
<li>常见的响应头：<ul>
<li>Content-Type：服务器告诉客户端本次响应体数据格式以及编码格式</li>
<li>Content-disposition：服务器告诉客户端以什么格式打开响应体数据<ul>
<li>in-line：默认值，在当前页面内打开</li>
<li>attachment；filename=xxx：以附件形式打开响应体：文件下载</li>
</ul>
</li>
</ul>
</li>
</ul>
</blockquote>
<h3 id="11-Response对象"><a href="#11-Response对象" class="headerlink" title="11. Response对象"></a>11. Response对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">request对象和response对象由tomcat创建，每次请求相互独立</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>Response方法</strong>：</p>
<ul>
<li><p>设置状态码：<code>setStatus(int sc)</code></p>
</li>
<li><p>设置响应头：<code>setHeader(String name, String value)</code></p>
</li>
<li><p>设置响应体：</p>
<ul>
<li>字符输出流：<code>PrintWriter getWriter()</code></li>
<li>字节输出流：<code>ServletOutputStream getOutputStream()</code></li>
</ul>
</li>
<li><p>设置输出流的编码：<code>response.setContentType(&quot;text/html;charset=utf-8&quot;);</code></p>
<p>setContentType方法同时起到两个作用：1. 设置该流的默认编码    2. 告诉浏览器响应体使用的编码</p>
</li>
</ul>
</blockquote>
<h3 id="12-重定向"><a href="#12-重定向" class="headerlink" title="12. 重定向"></a>12. 重定向</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">重定向：资源跳转的方式</span><br><span class="line"><span class="comment">//基本的重定向方法：1. 设置状态码为302；2.设置响应头location</span></span><br><span class="line">response.setStatus(<span class="number">302</span>);</span><br><span class="line">response.setHeader(<span class="string">"location"</span>,<span class="string">"/responseDemo2"</span>);</span><br><span class="line"><span class="comment">//简化的重定向方法：</span></span><br><span class="line">response.sendRedirect(<span class="string">"/responseDemo2"</span>);</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>转发(forward)和重定向(redirect)的特点：</strong> </p>
<ul>
<li><p>转发的特点：</p>
<ol>
<li>转发地址栏路径不变</li>
<li>转发只能访问当前服务器下的资源</li>
<li>转发是一次请求，可以使用request对象来共享数据</li>
<li>跳转路径<strong>不需要加虚拟目录</strong></li>
</ol>
</li>
<li><p>重定向的特点</p>
<ol>
<li>重定向地址栏路径变化</li>
<li>重定向可以访问其他站点(服务器)的资源</li>
<li>重定向是两次独立的请求，不能使用request对象来共享数据</li>
<li>跳转路径<strong>需要加虚拟目录</strong></li>
</ol>
</li>
</ul>
</blockquote>
<h3 id="13-ServletContext对象"><a href="#13-ServletContext对象" class="headerlink" title="13. ServletContext对象"></a>13. ServletContext对象</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">代表整个web应用，可以和程序的容器(服务器)来通信</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>ServletContext方法</strong>：</p>
<ul>
<li><p>获取ServletContext：</p>
<ol>
<li>通过request对象获取：<code>equest.getServletContext();</code></li>
<li>通过HttpServlet获取：<code>this.getServletContext();</code></li>
</ol>
</li>
<li><p>获取MIME类型：</p>
<ol>
<li>MIME类型:在互联网通信过程中定义的一种文件数据类型（大类型/小类型：image/jpeg）</li>
<li><code>String getMimeType(String file)</code></li>
</ol>
</li>
<li><p>域对象：共享数据（对象范围：所有用户所有请求的数据）</p>
<ol>
<li><p><code>setAttribute(String name,Object value)</code></p>
</li>
<li><p><code>getAttribute(String name)</code></p>
</li>
<li><p><code>removeAttribute(String name)</code></p>
</li>
</ol>
<p>（由于ServletContext域对象范围太大，一般不用）</p>
</li>
<li><p>获取文件的真实(<strong>服务器</strong>)路径：<code>String getRealPath(String path)</code></p>
<ol>
<li>获取web目录下资源：<code>getRealPath(&quot;/a.txt&quot;);</code></li>
<li>获取WEB-INF目录下资源：<code>getRealPath(&quot;/WEB-INF/a.txt&quot;);</code></li>
<li>获取src目录下资源：<code>getRealPath(&quot;/WEB-INF/classes/a.txt&quot;);</code></li>
</ol>
</li>
</ul>
</blockquote>
<h3 id="14-案例：文件下载"><a href="#14-案例：文件下载" class="headerlink" title="14. 案例：文件下载"></a>14. 案例：文件下载</h3><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//获取请求参数中的文件名称，找到该文件的真实路径，关联给字节输入流</span></span><br><span class="line">String filename = request.getParameter(<span class="string">"filename"</span>);	</span><br><span class="line">   ServletContext servletContext = <span class="keyword">this</span>.getServletContext();</span><br><span class="line">   String realPath = servletContext.getRealPath(<span class="string">"/img/"</span> + filename);</span><br><span class="line">   FileInputStream fis = <span class="keyword">new</span> FileInputStream(realPath);	</span><br><span class="line"></span><br><span class="line"><span class="comment">//设置response响应头的"content-type"参数为图片的Mime格式</span></span><br><span class="line">   String mimeType = servletContext.getMimeType(filename);	</span><br><span class="line">   response.setHeader(<span class="string">"content-type"</span>, mimeType);</span><br><span class="line"></span><br><span class="line"><span class="comment">//通过工具将filename改造成对应浏览器能够解读的格式</span></span><br><span class="line">   String userAgent = request.getHeader(<span class="string">"user-agent"</span>);	</span><br><span class="line">   filename = DownLoadUtils.getFileName(userAgent, filename);</span><br><span class="line"><span class="comment">//设置response响应头的"content-disposition"参数为附件形式</span></span><br><span class="line">   response.setHeader(<span class="string">"content-disposition"</span>,<span class="string">"attachment;filename="</span> + filename);</span><br><span class="line"></span><br><span class="line">   <span class="comment">//将输入流的数据写出到输出流中</span></span><br><span class="line">   ServletOutputStream sos = response.getOutputStream();</span><br><span class="line">   <span class="keyword">byte</span>[] buff = <span class="keyword">new</span> <span class="keyword">byte</span>[<span class="number">1024</span> * <span class="number">8</span>];</span><br><span class="line">   <span class="keyword">int</span> len = <span class="number">0</span>;</span><br><span class="line">   <span class="keyword">while</span> ((len = fis.read(buff)) != -<span class="number">1</span>) &#123;</span><br><span class="line">       sos.write(buff, <span class="number">0</span>, len);</span><br><span class="line">   &#125;</span><br><span class="line">   fis.close();</span><br></pre></td></tr></table></figure>

<h3 id="15-Cookie"><a href="#15-Cookie" class="headerlink" title="15. Cookie"></a>15. Cookie</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">概念：客户端会话技术，将数据保存到客户端。基于响应头set-cookie和请求头cookie实现</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>方法：</strong></p>
<ol>
<li>创建Cookie对象，绑定数据：<code>new Cookie(String name, String value)</code></li>
<li>发送Cookie对象：<code>response.addCookie(Cookie cookie)</code></li>
<li>获取Cookie对象，拿到数据：<code>request.getCookies()</code>，返回Cookie[] 数组</li>
<li>持久化存储Cookie对象：<code>setMaxAge(int seconds)</code>(Cookie数据默认在览器关闭后被销毁)<ul>
<li>正数：将Cookie数据写到硬盘的文件中，持久化存储，并指定cookie存活时间。</li>
<li>负数：默认值</li>
<li>零：删除cookie信息</li>
</ul>
</li>
</ol>
<p><strong>共享：</strong></p>
<ol>
<li>同一服务器的Cookie共享：一个服务器中多个web项目默认无法共享Cookie对象，可以设置Cookie的获取范围：<code>setPath(String path)</code>。方法默认为当前虚拟目录，设置为”/“让一个服务器下所有项目共享</li>
<li>不同服务器的Cookie共享：<code>setDomain(String path)</code>:如果设置一级域名相同，那么多个服务器之间cookie可以共享。(如setDomain(“.baidu.com”),那么tieba.baidu和news.baidu中cookie可以共享)</li>
</ol>
<p><strong>特点：</strong></p>
<ol>
<li>在tomcat 8 之前，cookie中不能直接存储中文数据。在tomcat 8 之后，cookie支持中文数据。特殊字符还是不支持，建议使用URL编码存储，URL解码解析。<ul>
<li>URL编码：<code>URLEncoder.encode(string, &quot;utf-8&quot;);</code> </li>
<li>URL解码：<code>URLDecoder.decode(string, &quot;utf-8&quot;);</code></li>
</ul>
</li>
<li>cookie数据存储在客户端浏览器，一般情况下浏览器对单个cookie 的大小限制4kb，对同一个域名下的总cookie数量限制20个。</li>
<li>cookie一般用于存储少量的不太敏感的数据，用于不登录的情况下，完成服务器对客户端的身份识别。</li>
</ol>
</blockquote>
<h3 id="16-Session"><a href="#16-Session" class="headerlink" title="16. Session"></a>16. Session</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">服务器端会话技术，在一次会话的多次请求间共享数据，将数据保存在服务器端的对象中,依赖于Cookie实现。</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>方法：</strong></p>
<ol>
<li>获取HttpSession对象：<code>request.getSession();</code></li>
<li>使用HttpSession对象：<ul>
<li><code>Object getAttribute(String name)</code></li>
<li><code>void setAttribute(String name, Object value)</code></li>
<li><code>void removeAttribute(String name)</code></li>
</ul>
</li>
</ol>
<p><strong>存活</strong>：</p>
<ol>
<li><p>客户端关闭后，服务器不关闭：</p>
<p>默认情况下两次获取session不是同一个。如果需要相同，则可以创建Cookie，键的名称一定为JSESSIONID，设置最大存活时间，让cookie持久化保存。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;    Cookie c = <span class="keyword">new</span> Cookie(<span class="string">"JSESSIONID"</span>,session.getId());</span><br><span class="line">&gt;    c.setMaxAge(<span class="number">60</span>*<span class="number">60</span>);</span><br><span class="line">&gt;    response.addCookie(c);</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="2">
<li><p>客户端不关闭，服务器关闭后：</p>
<p>两次获取的session不是同一个，但是要确保数据不丢失，tomcat自动完成以下工作：</p>
<ul>
<li>session的钝化：关闭服务器的时候，生成保存sessuib数据的文件.ser</li>
<li>session的活化：再度开启服务器的时候，读取保存的.ser文件，并销毁文件</li>
</ul>
</li>
</ol>
<p><strong>销毁：</strong></p>
<ol>
<li>服务器关闭时销毁</li>
<li>session对象调用invalidate() 方法时销毁</li>
<li>session默认失效时间 30分钟</li>
</ol>
</blockquote>
<blockquote>
<p><strong>session与Cookie的区别：</strong><br>             1. session存储数据在服务器端，Cookie在客户端<br>             2. session没有数据大小限制，Cookie有<br>             3. session数据安全，Cookie相对于不安全</p>
</blockquote>
<h3 id="17-JSP"><a href="#17-JSP" class="headerlink" title="17. JSP"></a>17. JSP</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Java Server Pages：java服务器端页面，既可以定义html标签，又可以使用java代码。</span><br><span class="line">JSP本质上是一个Servlet，IDEA编译：jsp页面-&gt;Servlet.java文件-&gt;.class文件</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>脚本</strong>：</p>
<ul>
<li><strong>&lt;%  代码 %&gt;</strong>：定义的java代码，在service方法中。每一次访问该jsp都会执行此脚本中的代码</li>
<li><strong>&lt;%! 代码 %&gt;</strong>：定义的java代码，在jsp转换后的java类的成员变量位置。</li>
<li><strong>&lt;%= 代码 %&gt;</strong>：定义的java代码，会输出到页面上。（out.print方法的简写）</li>
</ul>
<p><strong>指令</strong>：用于配置JSP页面，导入资源文件，格式：<code>&lt;%@ 指令名称 属性名1=属性值1 属性名2=属性值2 ... %&gt;</code></p>
<ul>
<li><p>page：</p>
<ul>
<li><p>contentType：设置响应体的mime类型以及字符集，在高级IDE中可设置当前jsp页面的编码</p>
</li>
<li><p>import：导包</p>
</li>
<li><p>errorPage：当前页面发生异常后，会自动跳转到指定的错误页面</p>
</li>
<li><p>isErrorPage：标识当前页面是否是错误页面。(值为true，页面可使用内置对象exception)</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&gt;     &lt;%--代码演示--%&gt; </span><br><span class="line">&gt;     &lt;%@ page contentType=<span class="string">"text/html;charset=gbk"</span> errorPage=<span class="string">"500.jsp"</span>   pageEncoding=<span class="string">"GBK"</span> language=<span class="string">"java"</span> buffer=<span class="string">"16kb"</span> %&gt;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     &lt;%@ page contentType=<span class="string">"text/html;charset=UTF-8"</span> isErrorPage=<span class="string">"true"</span> language=<span class="string">"java"</span> %&gt;</span><br><span class="line">&gt;     </span><br><span class="line">&gt;     &lt;%@ page <span class="keyword">import</span>=<span class="string">"java.util.ArrayList"</span> %&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>include：导入其他页面的资源文件  <code>&lt;%@include file=&quot;top.jsp&quot;%&gt;</code></p>
</li>
<li><p>taglib：导入资源  <code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</code></p>
</li>
</ul>
<p><strong>注释</strong>：</p>
<ul>
<li><!-- -->  html注释：会显示到网页源码中，只能注释html代码片段</li>
<li>&lt;%–   –%&gt;  jsp注释：不会显示到网页源码中，可以注释所有代码，推荐使用</li>
</ul>
<p><strong>内置对象</strong>：</p>
<table>
<thead>
<tr>
<th align="left">变量名</th>
<th>真实类型</th>
<th align="left">作用</th>
</tr>
</thead>
<tbody><tr>
<td align="left">pageContext</td>
<td>PageContext</td>
<td align="left">共享<strong>当前页面</strong>数据，还可以获取其他八个内置对象</td>
</tr>
<tr>
<td align="left">request</td>
<td>HttpServletRequest</td>
<td align="left">共享<strong>一次请求</strong>访问的多个资源数据(转发)</td>
</tr>
<tr>
<td align="left">session</td>
<td>HttpSession</td>
<td align="left">共享<strong>一次会话</strong>的多个请求间数据</td>
</tr>
<tr>
<td align="left">application</td>
<td>ServletContext</td>
<td align="left"><strong>整个web项目</strong>，所有用户间共享数据</td>
</tr>
<tr>
<td align="left">response</td>
<td>HttpServletResponse</td>
<td align="left">响应对象</td>
</tr>
<tr>
<td align="left">page</td>
<td>Object</td>
<td align="left">当前页面(Servlet)的对象  this</td>
</tr>
<tr>
<td align="left">out</td>
<td>JspWriter</td>
<td align="left">输出对象，数据输出到页面上</td>
</tr>
<tr>
<td align="left">config</td>
<td>ServletConfig</td>
<td align="left">Servlet的配置对象</td>
</tr>
<tr>
<td align="left">exception</td>
<td>Throwable</td>
<td align="left">异常对象</td>
</tr>
</tbody></table>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&gt; tomcat服务器，会先找response缓冲区数据，再找out缓冲区数据,所以response.getWriter()数据输出永远在out.write()之前，推荐使用：out.write()。</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h3 id="18-MVC开发模式"><a href="#18-MVC开发模式" class="headerlink" title="18. MVC开发模式"></a>18. MVC开发模式</h3><blockquote>
<ul>
<li>M：Model，模型。JavaBean 定义的标准的java描述类，用于完成具体的业务操作。</li>
<li>V：View，视图。JSP页面，用于展示数据。</li>
<li>C：Controller，控制器。Servlet：获取用户输入的数据；调用模型处理数据；将数据交给视图展示</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>优点：耦合性低，方便维护，可以利于分工协作，重用性高</p>
</li>
<li><p>缺点：使得项目架构变得复杂，对开发人员要求高</p>
</li>
</ul>
</blockquote>
<h3 id="19-EL表达式"><a href="#19-EL表达式" class="headerlink" title="19. EL表达式"></a>19. EL表达式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Expression Language 表达式语言，用于替换和简化jsp页面中java代码的编写</span><br><span class="line">jsp默认支持EL表达式的，语法：$&#123;表达式&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方法：</p>
<ul>
<li><code>${empty list}</code>：判断字符串、集合、数组对象是否为null或者长度为0</li>
<li><code>${not empty str}</code>：表示判断字符串、集合、数组对象是否不为null，并且长度&gt;0</li>
<li><code>${域名称.键名}</code>：从指定域中获取指定键的值，域名称有：<ol>
<li>pageScope        –&gt; pageContext    //当前页面</li>
<li>requestScope     –&gt; request         //当前次请求</li>
<li>sessionScope     –&gt; session        //当前次会话</li>
<li>applicationScope –&gt; application（ServletContext）     //整个web项目</li>
</ol>
</li>
<li><code>${域名称.键名.属性名}</code>：获取对象的属性值，不等于成员变量，本质上是调用对象的getter方法</li>
<li><code>${域名称.键名[索引]}</code>：获取List集合的元素</li>
<li><code>${域名称.键名.key名称}</code> <code>${域名称.键名[&quot;key名称&quot;]}</code>：获取Map集合的值</li>
<li><code>\${表达式}</code>或设置JSP的page指令中<code>isELIgnored=&quot;true&quot;</code>：忽略当前JSP页面中所有的EL表达式</li>
</ul>
<p>隐式对象：</p>
<p>​    EL表达式中有11个隐式对象，我们需要使用pageContext获取其他对象</p>
<ul>
<li>动态获取虚拟目录：<code>${pageContext.request.contextPath}</code></li>
</ul>
</blockquote>
<h3 id="20-JSTL"><a href="#20-JSTL" class="headerlink" title="20. JSTL"></a>20. JSTL</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">JavaServer Pages Tag Library：JSP标准标签库，由Apache组织提供的开源的免费的jsp标签</span><br><span class="line">用于简化和替换jsp页面上的java代码</span><br></pre></td></tr></table></figure>

<blockquote>
<p>使用步骤：</p>
<ol>
<li>导入jstl相关jar包</li>
<li>引入标签库taglib指令：<code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;</code></li>
<li>使用标签</li>
</ol>
<p>常用标签：</p>
<ul>
<li><p>if：test为必须属性，接受boolean表达式，表达式为true时展示标签内容，false则不展示</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;c:<span class="keyword">if</span> test=<span class="string">"true"</span>&gt;</span><br><span class="line">&gt;       &lt;h2&gt;I am true!&lt;/h2&gt;</span><br><span class="line">&gt;   &lt;/c:if&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>choose：相当于java代码的switch语句</p>
</li>
<li><p>foreach：相当于java代码的for语句</p>
<figure class="highlight jsp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;   &lt;c:forEach items=<span class="string">"$&#123;list&#125;"</span> <span class="keyword">var</span>=<span class="string">"str"</span> varStatus=<span class="string">"s"</span>&gt;</span><br><span class="line">&gt;       $&#123;s.index&#125;	&lt;%--索引--%&gt;</span><br><span class="line">&gt;       $&#123;s.count&#125;	&lt;%--循环次数--%&gt;</span><br><span class="line">&gt;       $&#123;str&#125;  	&lt;%--元素--%&gt;</span><br><span class="line">&gt;   &lt;/c:forEach&gt;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<h3 id="21-三层架构"><a href="#21-三层架构" class="headerlink" title="21. 三层架构"></a>21. 三层架构</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">1. 界面层(web层)：用户看的得界面，用户可以通过界面上的组件和服务器进行交互。</span><br><span class="line">2. 业务逻辑层（service层）：处理业务逻辑的。</span><br><span class="line">3. 数据访问层(dao层)：操作数据存储文件。</span><br></pre></td></tr></table></figure>

<h3 id="22-Filter-过滤器"><a href="#22-Filter-过滤器" class="headerlink" title="22. Filter 过滤器"></a>22. Filter 过滤器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">当客户端访问服务器的资源时，过滤器可以将请求拦截下来，完成一些特殊的功能</span><br></pre></td></tr></table></figure>

<blockquote>
<p><strong>实现步骤：</strong></p>
<ol>
<li><p>定义一个类，实现接口Filter（<code>import javax.servlet.annotation.WebFilter;</code>）</p>
</li>
<li><p>复写方法</p>
<ol start="3">
<li>配置拦截路径</li>
</ol>
</li>
</ol>
<p><strong>配置拦截路径：</strong></p>
<ul>
<li><p>方式一：web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&gt;      <span class="comment">&lt;!-- &lt;filter&gt;</span></span><br><span class="line"><span class="comment">&gt;           &lt;filter-name&gt;demo1&lt;/filter-name&gt;</span></span><br><span class="line"><span class="comment">&gt;           &lt;filter-class&gt;cn.itcast.web.filter.FilterDemo1&lt;/filter-class&gt;</span></span><br><span class="line"><span class="comment">&gt;       &lt;/filter&gt;</span></span><br><span class="line"><span class="comment">&gt;       &lt;filter-mapping&gt;</span></span><br><span class="line"><span class="comment">&gt;           &lt;filter-name&gt;demo1&lt;/filter-name&gt;</span></span><br><span class="line"><span class="comment">&gt;           &lt;url-pattern&gt;/*&lt;/url-pattern&gt;</span></span><br><span class="line"><span class="comment">&gt;       &lt;/filter-mapping&gt;--&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>方式二：注解：<code>@WebFilter(&quot;/*&quot;)</code></p>
</li>
<li><p>路径详解：</p>
<ol>
<li>拦截具体文件：<code>/index.jsp</code></li>
<li>拦截目录：<code>/user/*</code></li>
<li>拦截后缀名：<code>*.jsp</code></li>
<li>拦截所有资源：<code>/*</code></li>
</ol>
</li>
</ul>
<p><strong>配置拦截方法：</strong></p>
<ul>
<li>注解配置：设置dispatcherTypes属性<ol>
<li>REQUEST：默认值。浏览器直接请求资源</li>
<li>FORWARD：转发访问资源</li>
<li>INCLUDE：包含访问资源</li>
<li>ERROR：错误跳转资源</li>
<li>ASYNC：异步访问资源</li>
</ol>
</li>
<li>web.xml配置：设置<code>&lt;dispatcher&gt; &lt;/dispatcher&gt;</code>标签即可</li>
<li>只有同时满足拦截路径&amp;拦截方式的资源，才会被过滤器拦截</li>
</ul>
<p><strong>方法：</strong></p>
<ul>
<li><code>init()</code>：在服务器启动后，会创建Filter对象，然后调用init方法，只执行一次，用于加载资源。</li>
<li><code>doFilter()</code>：每一次请求被拦截资源时会执行，执行多次。</li>
<li><code>destroy()</code>：服务器正常关闭后，Filter对象被销毁，执行destroy方法，只执行一次，用于释放资源。</li>
<li><code>filterChain.doFilter(servletRequest,servletResponse)</code>：过滤放行</li>
</ul>
<p><strong>执行顺序：</strong></p>
<ul>
<li><p>注解配置执行顺序：过滤器1–&gt;过滤器2–&gt;资源执行–&gt;过滤器2–&gt; 过滤器1 </p>
<p>按照类名的字符串比较规则比较，值小的先执行</p>
</li>
<li><p>web.xml配置执行顺序：<code>&lt;filter-mapping&gt;</code>谁定义在上边，谁先执行</p>
</li>
</ul>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//过滤未登录用户代码展示</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">    <span class="comment">//0.强制转换</span></span><br><span class="line">    HttpServletRequest request = (HttpServletRequest) req;</span><br><span class="line">    <span class="comment">//1.获取资源请求路径</span></span><br><span class="line">    String uri = request.getRequestURI();</span><br><span class="line">    <span class="comment">//2.排除和登录以及页面布局式样相关的路径</span></span><br><span class="line">    <span class="keyword">if</span> (uri.contains(<span class="string">"/loginServlet"</span>) || uri.contains(<span class="string">"/login.jsp"</span>) || 		</span><br><span class="line">        uri.contains(<span class="string">"/checkCodeServlet"</span>) ||uri.contains(<span class="string">"/css/"</span>) || </span><br><span class="line">        uri.contains(<span class="string">"/fonts/"</span>) || uri.contains(<span class="string">"/js/"</span>)) &#123;</span><br><span class="line">        chain.doFilter(req, resp);</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//3.从request中获取用户登录后封装的user对象</span></span><br><span class="line">        Object user = request.getSession().getAttribute(<span class="string">"user"</span>);</span><br><span class="line">        <span class="keyword">if</span> (user != <span class="keyword">null</span>) &#123;</span><br><span class="line">            chain.doFilter(req, resp);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            request.setAttribute(<span class="string">"login_msg"</span>,<span class="string">"您尚未登录，请您先登录"</span>);</span><br><span class="line">            request.getRequestDispatcher(<span class="string">"/login.jsp"</span>).forward(req, resp);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="23-代理模式"><a href="#23-代理模式" class="headerlink" title="23. 代理模式"></a>23. 代理模式</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">代理对象通过代理真实对象，达到增强真实对象功能的目的，代理对象有两种实现方式：</span><br><span class="line">1. 静态代理：有一个类文件描述代理模式</span><br><span class="line">2. 动态代理：在内存中形成代理类，通过Proxy.newProxyInstance()方法生成代理对象</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//通过代理模式实现敏感词过滤代码展示</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">doFilter</span><span class="params">(ServletRequest req, ServletResponse resp, FilterChain chain)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line"></span><br><span class="line"><span class="comment">//创建代理对象，三个参数：1.真实对象的类加载器；2.真实对象实现的接口； 3.实现动态代理的接口</span></span><br><span class="line">HttpServletRequest request = (HttpServletRequest) Proxy.newProxyInstance</span><br><span class="line">(req.getClass().getClassLoader(),req.getClass().getInterfaces(),<span class="keyword">new</span> InvocationHandler() &#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> Object <span class="title">invoke</span><span class="params">(Object proxy, Method method, Object[] args)</span> <span class="keyword">throws</span> Throwable </span>&#123;</span><br><span class="line">	<span class="comment">/*invoke方法的三个参数：</span></span><br><span class="line"><span class="comment">		* 1. proxy：真实的代理对象</span></span><br><span class="line"><span class="comment">		* 2. method：代理对象调用的方法，被封装为的对象</span></span><br><span class="line"><span class="comment">		* 3. args:代理对象调用的方法时，传递的实际参数</span></span><br><span class="line"><span class="comment">	*/</span></span><br><span class="line">	<span class="comment">//获取方法的名称</span></span><br><span class="line">		<span class="keyword">if</span> (<span class="string">"getParameter"</span>.equals(method.getName())) &#123;</span><br><span class="line">			String value = (String) method.invoke(req,args);</span><br><span class="line">			<span class="comment">//检测是否含敏感词</span></span><br><span class="line">			<span class="keyword">if</span>(value.contains(<span class="string">"CNM"</span>))&#123;</span><br><span class="line">				value = value.replaceAll(<span class="string">"CNM"</span>,<span class="string">"***"</span>);</span><br><span class="line">			&#125;			</span><br><span class="line">		<span class="comment">//返回代理修改后的value</span></span><br><span class="line">		<span class="keyword">return</span> value;</span><br><span class="line">		&#125;</span><br><span class="line">	<span class="comment">//若不是"getParameter"方法，则直接返回，不修改</span></span><br><span class="line">	<span class="keyword">return</span> method.invoke(req,args);</span><br><span class="line">&#125;&#125;);</span><br><span class="line">chain.doFilter(request, resp);&#125;	<span class="comment">//放行时参数要用代理对象的request，来替换原req</span></span><br></pre></td></tr></table></figure>

<h3 id="24-Listener-监听器"><a href="#24-Listener-监听器" class="headerlink" title="24. Listener 监听器"></a>24. Listener 监听器</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">web三大组件之一，当事件源上发生某个事件后，执行监听器代码。</span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">ServletContextListener：监听ServletContext对象的创建和销毁</span><br><span class="line"><span class="meta">@WebListener</span> <span class="comment">//注解</span></span><br><span class="line"><span class="comment">//1. 定义一个类，实现ServletContextListener接口</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">ContextLoaderListener</span> <span class="keyword">implements</span> <span class="title">ServletContextListener</span> </span>&#123;</span><br><span class="line">	<span class="comment">//2. 对象创建后会调用该方法</span></span><br><span class="line">	<span class="function"><span class="keyword">void</span> <span class="title">contextInitialized</span><span class="params">(ServletContextEvent sce)</span>：ServletContext</span></span><br><span class="line"><span class="function">	<span class="comment">//3. 对象被销毁之前会调用该方法</span></span></span><br><span class="line"><span class="function">	<span class="keyword">void</span> <span class="title">contextDestroyed</span><span class="params">(ServletContextEvent sce)</span>：ServletContext</span></span><br></pre></td></tr></table></figure>

<h3 id="25-Maven"><a href="#25-Maven" class="headerlink" title="25. Maven"></a>25. Maven</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Maven是一个项目管理工具，它包含了：一个项目对象模型 (POM：Project Object Model)，一组标准集合，一个项目生命周期(Project Lifecycle)，一个依赖管理系统(Dependency Management System)，和用来运行定义在生命周期阶段(phase)中插件(plugin)目标(goal)的逻辑。</span><br></pre></td></tr></table></figure>

<blockquote>
<ul>
<li><p>环境变量及相关配置</p>
<ul>
<li>M2_HOME：C:\Java\maven\apache-maven-3.5.2</li>
<li>MAVEN_HOME：C:\Java\maven\apache-maven-3.5.2</li>
<li>/conf/settings.xml文件中<code>&lt;localRepository&gt;</code>标签中配置本地仓库位置</li>
<li>idea的maven配置：<ul>
<li>Maven home directory：指定本地maven安装目录</li>
<li>User settings file：指定setting配置文件路径</li>
<li>Local respository：本地仓库的位置</li>
<li>创建maven的web工程时，选用archetype：<code>maven-archetype-webapp</code></li>
</ul>
</li>
</ul>
</li>
<li><p>仓库的分类</p>
<ul>
<li>本地仓库：通过maven下载的jar包会储存在本地仓库，项目会优先从本地仓库查找jar包</li>
<li>远程仓库：远程仓库可以在互联网内也可以在局域网内</li>
<li>中央仓库：maven中内置一个远程仓库：<a href="http://repo1.maven.org/maven2，服务于整个互联网，由Maven团队自己维护，里面存储了非常全的jar包，包含了世界上大部分的流行开源项目的构件。" target="_blank" rel="noopener">http://repo1.maven.org/maven2，服务于整个互联网，由Maven团队自己维护，里面存储了非常全的jar包，包含了世界上大部分的流行开源项目的构件。</a></li>
</ul>
</li>
<li><p>maven插件</p>
<ul>
<li>compile：maven工程的编译命令，将src/main/java的文件编译为class文件输出到target目录下。</li>
<li>test：maven工程的测试命令，会执行src/test/java下的单元测试类。</li>
<li>clean：maven工程的清理命令，执行 clean会删除target目录及内容。</li>
<li>package：maven工程的打包命令，对java工程执行package打成jar包，对web工程打成war包。</li>
<li>install：maven工程的安装命令，执行install将maven打成jar包或war包发布到本地仓库。</li>
<li>按上述插件排列顺序，当后面的命令执行时，前面的操作过程也都会自动执行。</li>
</ul>
</li>
<li><p>Maven指令的生命周期</p>
<ul>
<li>Clean Lifecycle：在进行真正的构建之前进行一些清理工作。</li>
<li>Default Lifecycle：构建的核心部分，编译，测试，打包，部署等等。</li>
<li>Site Lifecycle：生成项目报告，站点，发布站点。</li>
<li>上述三套生命周期相互独立</li>
</ul>
</li>
<li><p>依赖范围</p>
<table>
<thead>
<tr>
<th align="center">依赖范围</th>
<th align="center">编译时有效</th>
<th align="center">测试时有效</th>
<th align="center">运行时有效</th>
<th align="center">例子</th>
</tr>
</thead>
<tbody><tr>
<td align="center">compile(默认)</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">spring-core</td>
</tr>
<tr>
<td align="center">test</td>
<td align="center">-</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">Junit</td>
</tr>
<tr>
<td align="center">provided</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">servlet-api</td>
</tr>
<tr>
<td align="center">runtime</td>
<td align="center">-</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">JDBC驱动</td>
</tr>
<tr>
<td align="center">system</td>
<td align="center">√</td>
<td align="center">√</td>
<td align="center">-</td>
<td align="center">不推荐使用</td>
</tr>
</tbody></table>
<blockquote>
<p>因为tomcat自带servlet和jsp的jar包，所以这两类api设定运行时无效，防止冲突</p>
</blockquote>
</li>
<li><p>坐标定义</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="tag">&lt;<span class="name">dependency</span>&gt;</span></span><br><span class="line">&gt;      <span class="comment">&lt;!--项目名称，定义为组织名+项目名，类似包名--&gt;</span></span><br><span class="line">&gt;      <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>javax.servlet<span class="tag">&lt;/<span class="name">groupId</span>&gt;</span></span><br><span class="line">&gt;      <span class="comment">&lt;!-- 模块名称 --&gt;</span></span><br><span class="line">&gt;      <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>javax.servlet-api<span class="tag">&lt;/<span class="name">artifactId</span>&gt;</span></span><br><span class="line">&gt;      <span class="comment">&lt;!-- 当前项目版本号 --&gt;</span></span><br><span class="line">&gt;      <span class="tag">&lt;<span class="name">version</span>&gt;</span>3.0.1<span class="tag">&lt;/<span class="name">version</span>&gt;</span></span><br><span class="line">&gt;      <span class="comment">&lt;!-- 依赖范围 --&gt;</span></span><br><span class="line">&gt;      <span class="tag">&lt;<span class="name">scope</span>&gt;</span>provided<span class="tag">&lt;/<span class="name">scope</span>&gt;</span></span><br><span class="line">&gt;   <span class="tag">&lt;/<span class="name">dependency</span>&gt;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
<ul>
<li><p>pom基本配置：Maven项目的核心配置文件</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">&gt;   <span class="tag">&lt;<span class="name">project</span>&gt;</span>：文件的根节点 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">modelversion</span>&gt;</span>：pom.xml使用的对象模型版本 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">groupId</span>&gt;</span>：项目名称，一般写项目的域名 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">artifactId</span>&gt;</span>：模块名称，子项目名或模块名称 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">version</span>&gt;</span>：产品的版本号 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">packaging</span>&gt;</span>：打包类型，一般有jar、war、pom 等 </span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">name</span>&gt;</span>：项目的显示名，常用于 Maven 生成的文档</span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">description</span>&gt;</span>：项目描述，常用于 Maven 生成的文档</span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">dependencies</span>&gt;</span>：项目依赖构件配置，配置项目依赖构件的坐标</span><br><span class="line">&gt;   <span class="tag">&lt;<span class="name">build</span>&gt;</span>：项目构建配置，配置编译、运行插件等</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ul>
</blockquote>
<blockquote>
</blockquote>
<h3 id="26-综合案例"><a href="#26-综合案例" class="headerlink" title="26. 综合案例"></a>26. 综合案例</h3><h4 id="BaseServlet"><a href="#BaseServlet" class="headerlink" title="BaseServlet"></a>BaseServlet</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//让项目中所有的Servlet删除service方法，并继承BaseServlet，当浏览器访问时会调用父类的service方法</span></span><br><span class="line"><span class="function"><span class="keyword">protected</span> <span class="keyword">void</span> <span class="title">service</span><span class="params">(HttpServletRequest req, HttpServletResponse resp)</span>  </span>&#123;</span><br><span class="line">    <span class="comment">//获取请求路径</span></span><br><span class="line">    String uri = req.getRequestURI();</span><br><span class="line">    <span class="comment">//获取方法名称</span></span><br><span class="line">    String methodName = uri.substring(uri.lastIndexOf(<span class="string">'/'</span>) + <span class="number">1</span>);</span><br><span class="line">    <span class="comment">//通过反射，调用子类的方法</span></span><br><span class="line">    Method method = <span class="keyword">this</span>.getClass().getMethod(methodName, 		                                       HttpServletRequest.class,HttpServletResponse.class);    </span><br><span class="line">    method.invoke(<span class="keyword">this</span>, req, resp);&#125;</span><br></pre></td></tr></table></figure>

<h4 id="Jquery的serialize方法"><a href="#Jquery的serialize方法" class="headerlink" title="Jquery的serialize方法"></a>Jquery的serialize方法</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$.get(<span class="string">"user/regist"</span>, $(<span class="keyword">this</span>).serialize(), function (data) &#123;...&#125;);</span><br><span class="line"><span class="comment">//.serialize()可以将表单数据序列化为键值对的形式:username=eric&amp;password=123...</span></span><br><span class="line"><span class="comment">//通常用于接收（登录、注册）用户提交的表单数据的序列化，便于getParameterMap()方法获取参数</span></span><br></pre></td></tr></table></figure>

<h4 id="Redis与数据库交互"><a href="#Redis与数据库交互" class="headerlink" title="Redis与数据库交互"></a>Redis与数据库交互</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> List&lt;Category&gt; <span class="title">findAll</span><span class="params">()</span> </span>&#123;</span><br><span class="line">    List&lt;Category&gt; cs = <span class="keyword">null</span>;</span><br><span class="line">    Jedis jedis = JedisUtil.getJedis();</span><br><span class="line">    <span class="comment">//zrangeWithScores方法可以获取值和对应的score，存入Tuple对象中。</span></span><br><span class="line">    <span class="comment">//Tuple对象含一个Double score和一个byte[] element 成员变量</span></span><br><span class="line">    Set&lt;Tuple&gt; categorys = jedis.zrangeWithScores(<span class="string">"category"</span>, <span class="number">0</span>, -<span class="number">1</span>);</span><br><span class="line">    <span class="keyword">if</span> (categorys == <span class="keyword">null</span> || categorys.size() == <span class="number">0</span>) &#123;</span><br><span class="line">        <span class="comment">//redis缓存中没有数据，从数据库中读取</span></span><br><span class="line">        cs = categoryDao.findAll();</span><br><span class="line">        <span class="comment">//将数据缓存到jedis内存中</span></span><br><span class="line">        <span class="keyword">for</span> (<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; cs.size(); i++) &#123;</span><br><span class="line">            jedis.zadd(<span class="string">"category"</span>, cs.get(i).getCid(), cs.get(i).getCname());</span><br><span class="line">        &#125;</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="comment">//redis缓存中有数据，将数据格式统一转换为List格式返回</span></span><br><span class="line">        cs = <span class="keyword">new</span> ArrayList&lt;&gt;();</span><br><span class="line">        <span class="keyword">for</span> (Tuple tuple : categorys) &#123;</span><br><span class="line">            Category category = <span class="keyword">new</span> Category();</span><br><span class="line">            category.setCname(tuple.getElement());</span><br><span class="line">            category.setCid((<span class="keyword">int</span>) tuple.getScore());</span><br><span class="line">            cs.add(category);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> cs;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="根据参数name获取对应的值"><a href="#根据参数name获取对应的值" class="headerlink" title="根据参数name获取对应的值"></a>根据参数name获取对应的值</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getParameter</span>(<span class="params">name</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">var</span> reg = <span class="keyword">new</span> <span class="built_in">RegExp</span>(<span class="string">"(^|&amp;)"</span> + name + <span class="string">"=([^&amp;]*)(&amp;|$)"</span>,<span class="string">"i"</span>);</span><br><span class="line">    <span class="keyword">var</span> r = location.search.substr(<span class="number">1</span>).match(reg);</span><br><span class="line">    <span class="keyword">if</span> (r!=<span class="literal">null</span>) <span class="keyword">return</span> (r[<span class="number">2</span>]); </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="SQL语句的拼接"><a href="#SQL语句的拼接" class="headerlink" title="SQL语句的拼接"></a>SQL语句的拼接</h4><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">int</span> <span class="title">findTotalCount</span><span class="params">(<span class="keyword">int</span> cid, String rname)</span> </span>&#123;</span><br><span class="line">    <span class="comment">//定义模板代码</span></span><br><span class="line">    String sql = <span class="string">"select count(*) from tab_route where TRUE "</span>;</span><br><span class="line">    StringBuilder sb = <span class="keyword">new</span> StringBuilder(sql);<span class="comment">//用于拼接不同条件</span></span><br><span class="line">    ArrayList params = <span class="keyword">new</span> ArrayList();<span class="comment">//用于存放参数</span></span><br><span class="line">    <span class="keyword">if</span> (cid != <span class="number">0</span>) &#123;</span><br><span class="line">        sb.append(<span class="string">" and cid = ? "</span>);</span><br><span class="line">        params.add(cid);</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (rname != <span class="keyword">null</span> &amp;&amp; rname.length() != <span class="number">0</span> &amp;&amp; !rname.equals(<span class="string">"null"</span>)) &#123;</span><br><span class="line">        sb.append(<span class="string">" and rname like ? "</span>);</span><br><span class="line">        params.add(<span class="string">"%"</span> + rname + <span class="string">"%"</span>);</span><br><span class="line">    &#125;</span><br><span class="line">    sql = sb.toString();</span><br><span class="line">    <span class="keyword">int</span> count = -<span class="number">1</span>;</span><br><span class="line">    <span class="keyword">try</span> &#123;</span><br><span class="line">        count = template.queryForObject(sql, Integer.class, params.toArray());</span><br><span class="line">    &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> count;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="解决中文乱码的两种方式"><a href="#解决中文乱码的两种方式" class="headerlink" title="解决中文乱码的两种方式"></a>解决中文乱码的两种方式</h4><p>第一种：在pom.xml下配置<code>uriEncoding</code>标签为utf-8</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">configuration</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 通过maven tomcat7:run运行项目时，访问项目的端口号 --&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">port</span>&gt;</span>80<span class="tag">&lt;/<span class="name">port</span>&gt;</span></span><br><span class="line">    <span class="comment">&lt;!-- 项目访问路径  本例：localhost:9090,  如果配置的aa， 则访问路径为localhost:9090/aa--&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">path</span>&gt;</span>/travel<span class="tag">&lt;/<span class="name">path</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">uriEncoding</span>&gt;</span>utf-8<span class="tag">&lt;/<span class="name">uriEncoding</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">configuration</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>第二种：post提交方式下，request.setCharacterEncoding(“utf-8”);</p>
<h4 id="三种前端往后端传参的方式"><a href="#三种前端往后端传参的方式" class="headerlink" title="三种前端往后端传参的方式"></a>三种前端往后端传参的方式</h4><ol>
<li>异步请求</li>
<li>表单提交</li>
<li>a标签</li>
</ol>
<h3 id="27-Linux"><a href="#27-Linux" class="headerlink" title="27. Linux"></a>27. Linux</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Linux是基于Unix的一种自由和开放源码的操作系统，存在着许多不同的Linux版本，但它们都使用了Linux内核。Linux的版本分为两种：内核版本和发行版本；内核版本是指在Linus领导下的内核小组开发维护的系统内核的版本号。</span><br></pre></td></tr></table></figure>

<h4 id="Linux常用命令"><a href="#Linux常用命令" class="headerlink" title="Linux常用命令"></a>Linux常用命令</h4><table>
<thead>
<tr>
<th>命令</th>
<th>功能</th>
</tr>
</thead>
<tbody><tr>
<td><strong>【cd】</strong></td>
<td></td>
</tr>
<tr>
<td>cd app</td>
<td>切换到app目录（tab键可补全文件路径）</td>
</tr>
<tr>
<td>cd ..</td>
<td>切换到上一层目录</td>
</tr>
<tr>
<td>cd /</td>
<td>切换到系统根目录</td>
</tr>
<tr>
<td>cd ~</td>
<td>切换到用户主目录</td>
</tr>
<tr>
<td>cd -</td>
<td>切换到上一个所在目录</td>
</tr>
<tr>
<td><strong>【ls】</strong></td>
<td></td>
</tr>
<tr>
<td>ls</td>
<td>显示当前目录下的内容（在linux中以 . 开头的文件都是隐藏的文件）</td>
</tr>
<tr>
<td>ls -a</td>
<td>显示所有文件或目录（包含隐藏的文件）</td>
</tr>
<tr>
<td>ls -l (缩写ll)</td>
<td>显示当前目录下文件的详情信息</td>
</tr>
<tr>
<td><strong>【dir】</strong></td>
<td></td>
</tr>
<tr>
<td>mkdir app</td>
<td>在当前目录下创建app子目录</td>
</tr>
<tr>
<td>rmdir app</td>
<td>app</td>
</tr>
<tr>
<td>mkdir –p aaa/bbb</td>
<td>在当前目录下级联创建aaa/bbb子目录</td>
</tr>
<tr>
<td><strong>【content】</strong></td>
<td></td>
</tr>
<tr>
<td>cat</td>
<td>用于显示文件的内容</td>
</tr>
<tr>
<td>more</td>
<td>显示文件部分的内容，按空格显示下一页，回车显示下一行，q退出查看</td>
</tr>
<tr>
<td>less</td>
<td>用法和more类似，不同的是less可以通过PgUp、PgDn键来控制</td>
</tr>
<tr>
<td>tail -N</td>
<td>用于显示文件后N行的内容</td>
</tr>
<tr>
<td>tail -f</td>
<td>动态查看文件日志</td>
</tr>
<tr>
<td><strong>【rm】</strong></td>
<td></td>
</tr>
<tr>
<td>rm a.txt</td>
<td>删除文件（询问用户）</td>
</tr>
<tr>
<td>rm -f a.txt</td>
<td>直接删除（不询问用户）</td>
</tr>
<tr>
<td>rm -r a</td>
<td>询问递归删除</td>
</tr>
<tr>
<td>rm -rf  a</td>
<td>不询问递归删除</td>
</tr>
<tr>
<td>rm -rf *</td>
<td>删除当前目录下所有文件</td>
</tr>
<tr>
<td>rm -rf /*</td>
<td>自杀式删除</td>
</tr>
<tr>
<td><strong>【cp，mv】</strong></td>
<td></td>
</tr>
<tr>
<td>cp a.txt b.txt</td>
<td>将a.txt复制成名为b.txt的文件</td>
</tr>
<tr>
<td>cp a.txt  ../</td>
<td>将a.txt文件复制到上一层目录中</td>
</tr>
<tr>
<td>mv a.txt b.txt</td>
<td>将a.txt文件重命名为b.txt</td>
</tr>
<tr>
<td>mv a.txt ../</td>
<td>将a.txt文件移动到上一层目录中</td>
</tr>
<tr>
<td><strong>【tar】</strong></td>
<td></td>
</tr>
<tr>
<td>-c</td>
<td>创建一个新tar文件</td>
</tr>
<tr>
<td>-v</td>
<td>显示运行过程的信息</td>
</tr>
<tr>
<td>-f</td>
<td>指定文件名</td>
</tr>
<tr>
<td>-z</td>
<td>调用gzip压缩命令进行压缩</td>
</tr>
<tr>
<td>-t</td>
<td>查看压缩文件的内容</td>
</tr>
<tr>
<td>-x</td>
<td>解开tar文件</td>
</tr>
<tr>
<td>tar –cvf  xxx.tar 打包文件</td>
<td>打包</td>
</tr>
<tr>
<td>tar –zcvf xxx.tar.gz 打包文件</td>
<td>打包并且压缩</td>
</tr>
<tr>
<td>tar –xvf xxx.tar</td>
<td>拆包</td>
</tr>
<tr>
<td>tar -zxvf xxx.tar.gz -C 目标路径</td>
<td>解压</td>
</tr>
<tr>
<td><strong>【find】</strong></td>
<td></td>
</tr>
<tr>
<td>find / -name  “ins*”</td>
<td>查找文件名称是以ins开头的文件</td>
</tr>
<tr>
<td>find / –user itcast –ls</td>
<td>查找用户itcast的文件</td>
</tr>
<tr>
<td>find / –user itcast –type d –ls</td>
<td>查找用户itcast的目录</td>
</tr>
<tr>
<td>find /-perm -777 –type d-ls</td>
<td>查找权限是777的文件</td>
</tr>
<tr>
<td><strong>【grep】</strong></td>
<td></td>
</tr>
<tr>
<td>grep lang 文件名</td>
<td>在文件中查找lang</td>
</tr>
<tr>
<td>grep lang 文件名 –color</td>
<td>高亮显示</td>
</tr>
<tr>
<td><strong>【other】</strong></td>
<td></td>
</tr>
<tr>
<td>pwd</td>
<td>显示当前所在目录</td>
</tr>
<tr>
<td>touch a.txt</td>
<td>创建一个空文件</td>
</tr>
<tr>
<td>clear/ crtl + L</td>
<td>清屏</td>
</tr>
<tr>
<td>crtl + C</td>
<td>退出</td>
</tr>
<tr>
<td>ifconfig</td>
<td>查询IP地址</td>
</tr>
</tbody></table>
<h4 id="Vim编辑器"><a href="#Vim编辑器" class="headerlink" title="Vim编辑器"></a>Vim编辑器</h4><blockquote>
<p>在Linux下一般使用vi编辑器来编辑文件，vi既可以查看文件也可以编辑文件。</p>
<p>vi有三种模式：命令行、插入、底行模式。</p>
<p>通过 <code>vim 文件名</code> 命令进入Vim编辑器，此时默认为命令行模式。</p>
<p>命令行模式—-按 i 、o、a键—-&gt;插入模式—-按Esc键—-&gt;命令行模式</p>
<p>命令行模式—-按 :（冒号）—-&gt;底行模式：退出：<code>q</code>；保存并退出：<code>wq</code>；不保存退出：<code>q!</code></p>
</blockquote>
<h5 id="重定向输出"><a href="#重定向输出" class="headerlink" title="重定向输出"></a>重定向输出</h5><blockquote>
<p><code>&gt;</code> 重定向输出，覆盖原有内容；<code>&gt;&gt;</code> 重定向输出，追加在原内容后；</p>
<p>示例：</p>
<p><code>cat /b.txt &gt; a.txt</code>  将b.txt文件中内容输出定向到a.txt中</p>
<p><code>ifconfig &gt; ifconfig.txt</code> 将网络配置信息输出定向到ifconfig.txt中</p>
</blockquote>
<h5 id="系统管理命令"><a href="#系统管理命令" class="headerlink" title="系统管理命令"></a>系统管理命令</h5><blockquote>
<ul>
<li><p><code>ps</code> 正在运行的某个进程的状态</p>
</li>
<li><p><code>ps –ef</code>  查看所有进程</p>
</li>
<li><p><code>ps –ef | grep ssh</code> 查找某一进程</p>
</li>
<li><p><code>kill 2868</code>  杀掉2868编号的进程</p>
</li>
<li><p><code>kill -9 2868</code>  强制杀死进程</p>
</li>
</ul>
</blockquote>
<h5 id="管道"><a href="#管道" class="headerlink" title="管道 |"></a>管道 |</h5><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">管道是Linux命令中重要的一个概念，其作用是将一个命令的输出用作另一个命令的输入。示例：</span><br><span class="line">ls --help | more  分页查询帮助信息</span><br><span class="line">ps –ef | grep java  查询名称中包含java的进程</span><br></pre></td></tr></table></figure>

<h4 id="Linux权限命令"><a href="#Linux权限命令" class="headerlink" title="Linux权限命令"></a>Linux权限命令</h4><h5 id="文件权限"><a href="#文件权限" class="headerlink" title="文件权限"></a>文件权限</h5><table>
<thead>
<tr>
<th align="center">文件类型</th>
<th align="center">user</th>
<th align="center">user</th>
<th align="center">user</th>
<th align="center">group</th>
<th align="center">group</th>
<th align="center">group</th>
<th align="center">other</th>
<th align="center">other</th>
<th align="center">other</th>
</tr>
</thead>
<tbody><tr>
<td align="center">-</td>
<td align="center">r</td>
<td align="center">w</td>
<td align="center">x</td>
<td align="center">r</td>
<td align="center">w</td>
<td align="center">x</td>
<td align="center">r</td>
<td align="center">w</td>
<td align="center">x</td>
</tr>
<tr>
<td align="center">score</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">1</td>
<td align="center">4</td>
<td align="center">2</td>
<td align="center">1</td>
</tr>
</tbody></table>
<blockquote>
<ul>
<li>user：属主权限</li>
<li>group：属组权限</li>
<li>other：其他用户权限</li>
<li>r：对文件是指可读取内容 对目录是可以ls</li>
<li>w：对文件是指可修改文件内容，对目录是指可以在其中创建或删除子节点(目录或文件)</li>
<li>x：对文件是指是否可以运行这个文件，对目录是指是否可以cd进入这个目录</li>
<li>chmod 变更文件或目录的权限：<code>chmod 755 a.txt</code>  <code>chmod u=rwx,g=rx,o=rx a.txt</code></li>
</ul>
</blockquote>
<h5 id="Linux三种文件类型"><a href="#Linux三种文件类型" class="headerlink" title="Linux三种文件类型"></a>Linux三种文件类型</h5><blockquote>
<ul>
<li><p>普通文件： 包括文本文件、数据文件、可执行的二进制程序文件等。 </p>
</li>
<li><p>目录文件： Linux系统把目录看成是一种特殊的文件，利用它构成文件系统的树型结构。  </p>
</li>
<li><p>设备文件： Linux系统把每一个设备都看成是一个文件</p>
</li>
</ul>
</blockquote>
<h5 id="文件类型标识"><a href="#文件类型标识" class="headerlink" title="文件类型标识"></a>文件类型标识</h5><blockquote>
<p>进入etc可以查看：普通文件（-）、目录（d）、符号链接（l）、字符设备文件（c）、块设备文件（s）、套接字（s）命名管道（p）</p>
</blockquote>
<h4 id="Linux网络操作"><a href="#Linux网络操作" class="headerlink" title="Linux网络操作"></a>Linux网络操作</h4><blockquote>
<ul>
<li><p><code>hostname</code> 查看主机名</p>
</li>
<li><p><code>hostname xxx</code> 修改主机名 重启后无效（如果想要永久生效，可以修改/etc/sysconfig/network文件）</p>
</li>
<li><p><code>vim /etc/sysconfig/network-scripts/ifcfg-eth0</code> 持久化修改ip地址</p>
</li>
<li><p><code>service iptables stop</code> 关闭防火墙</p>
</li>
<li><p><code>service network status</code> 查看指定服务的状态</p>
</li>
<li><p><code>service network stop</code> 停止指定服务</p>
</li>
<li><p><code>service network start</code> 启动指定服务</p>
</li>
<li><p><code>service network restart</code> 重启指定服务</p>
</li>
</ul>
</blockquote>
<h4 id="软件安装"><a href="#软件安装" class="headerlink" title="软件安装"></a>软件安装</h4><blockquote>
<ul>
<li><p>安装方式：</p>
<ol>
<li><p><strong>二进制发布包</strong>：</p>
<p>软件已经针对具体平台编译打包发布，只要解压，修改配置即可。</p>
</li>
<li><p><strong>RPM包</strong>：</p>
<p>软件已经按照redhat的包管理工具规范RPM进行打包发布，需要获取到相应的软件RPM发布包，然后用RPM命令进行安装。</p>
</li>
<li><p><strong>Yum在线安装</strong>：</p>
<p>软件已经以RPM规范打包，但发布在了网络上的一些服务器上，可用yum在线安装服务器上的rpm软件，并且会自动解决软件安装过程中的库依赖问题。</p>
</li>
<li><p><strong>源码编译安装</strong>：</p>
<p>软件以源码工程的形式发布，需要获取到源码工程后用相应开发工具进行编译打包部署。</p>
</li>
</ol>
</li>
<li><p>上传与下载：</p>
<ol>
<li><strong>FileZilla</strong>：文件交互图形化软件，解压后可直接使用，通过拖动文件完成本地与虚拟机的文件交互</li>
<li><strong>lrzsz</strong>：使用yum方式安装：<code>yum install lrzsz</code>，可以在crt中设置上传与下载目录：选项→会话选项→X/Y/Zmodem，设置上传和下载目录。在CRT界面输入<code>rz</code>获取上传目录，输入<code>sz</code>获取下载目录</li>
<li><strong>sftp</strong>：使用alt + p 组合键打开sftp窗口，使用put 命令上传，使用get命令下载，默认下载位置在当前计算的的文档位置</li>
</ol>
</li>
</ul>
</blockquote>
<h5 id="在Linux上安装JDK"><a href="#在Linux上安装JDK" class="headerlink" title="在Linux上安装JDK"></a>在Linux上安装JDK</h5><blockquote>
<ol>
<li><p>卸载系统自带jdk：</p>
<p><code>rpm -e --nodeps java-1.6.0-openjdk-1.6.0.35-1.13.7.1.el6_6.i686</code></p>
<p><code>rpm -e --nodeps java-1.7.0-openjdk-1.7.0.79-2.5.5.4.el6.i686</code></p>
</li>
<li><p>在Linux服务器上安装JDK：</p>
<p>直接解压就可以：<code>tar –zxvf  jdk.tar.gz  -C 目标路径</code></p>
</li>
<li><p>配置JDK的环境变量：</p>
<ol>
<li><p><code>vi /etc/profile</code></p>
</li>
<li><p>在末尾行添加下列文本后，保存退出</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&gt;       #set java environment</span><br><span class="line">&gt;       JAVA_HOME=/usr/local/jdk/jdk1.7.0_71</span><br><span class="line">&gt;       CLASSPATH=.:$JAVA_HOME/lib.tools.jar</span><br><span class="line">&gt;       PATH=$JAVA_HOME/bin:$PATH</span><br><span class="line">&gt;       export JAVA_HOME CLASSPATH PATH</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</li>
</ol>
</li>
</ol>
</blockquote>
<blockquote>
<ol start="3">
<li><code>source /etc/profile</code>  使更改的配置立即生效</li>
</ol>
</blockquote>
<h5 id="在Linux上安装Mysql"><a href="#在Linux上安装Mysql" class="headerlink" title="在Linux上安装Mysql"></a>在Linux上安装Mysql</h5><blockquote>
<ol>
<li><p>卸载系统自带mysql：</p>
<p><code>rpm -e --nodeps mysql-libs-5.1.73-5.el6_6.i686</code></p>
</li>
<li><p>安装MYSQL服务端：</p>
<p><code>rpm -ivh MySQL-server-5.6.22-1.el6.i686.rpm</code></p>
</li>
<li><p>查看系统随机生成的root初始密码：</p>
<p><code>cat /root/.mysql_secret</code></p>
</li>
<li><p>开启mysql服务：</p>
<p><code>service mysql start</code></p>
</li>
<li><p>登录mysql：</p>
<p><code>mysql -u root -p随机初始密码</code></p>
</li>
<li><p>第一次操作mysql前修改root用户密码：</p>
<p><code>set password=password(&#39;root&#39;)</code></p>
</li>
<li><p>设置mysql远程访问：</p>
<p><code>grant all privileges on *.* to &#39;root&#39; @&#39;%&#39; identified by &#39;root&#39;;</code></p>
<p><code>flush privileges;</code></p>
</li>
<li><p>关闭防火墙：</p>
<p><code>service iptables stop;</code></p>
</li>
</ol>
</blockquote>
<h5 id="在Linux上安装tomcat"><a href="#在Linux上安装tomcat" class="headerlink" title="在Linux上安装tomcat"></a>在Linux上安装tomcat</h5><blockquote>
<ol>
<li><p>在Linux服务器上安装tomcat：</p>
<p>直接解压就可以：<code>tar –zxvf  apache-tomcat-7.0.57  -C 目标路径</code></p>
</li>
<li><p>启动tomcat：</p>
<p>在tomcat/bin目录下执行 startup.sh（注意防火墙）</p>
</li>
<li><p>查看目标：</p>
<p>tomcat/logs/catalina.out</p>
</li>
</ol>
</blockquote>
<h5 id="在Linux上安装redis"><a href="#在Linux上安装redis" class="headerlink" title="在Linux上安装redis"></a>在Linux上安装redis</h5><blockquote>
<ol>
<li>安装gcc-c++：<code>yum install gcc-c++</code></li>
<li>下载redis：<code>wget http://download.redis.io/releases/redis-3.0.4.tar.gz</code></li>
<li>解压：<code>tar -xzvf redis-3.0.4.tar.gz</code></li>
<li>切换至程序目录，执行make命令进行编译：<code>make</code></li>
<li>执行安装命令：<code>make PREFIX=/usr/local/redis install</code></li>
<li>复制配置文件到redis/bin目录下：<code>cd redis-3.0.4</code> <code>cp redis.conf/usr/local/redis/bin</code></li>
<li>bin目录下启动redis服务端：<code>./redis-server redis.conf</code></li>
<li>克隆新窗口，启动redis客户端：<code>./redis-cli</code></li>
</ol>
</blockquote>
<h3 id="28-Nginx"><a href="#28-Nginx" class="headerlink" title="28. Nginx"></a>28. Nginx</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Nginx 是一款高性能的 http 服务器/反向代理服务器及电子邮件（IMAP/POP3）代理服务器，由俄罗斯的程序设计师伊戈尔·西索夫（Igor Sysoev）所开发，官方测试 nginx 能够支支撑5万并发链接，cpu、内存等资源消耗却非常低，运行非常稳定。</span><br></pre></td></tr></table></figure>

<p><strong>Nginx 应用场景</strong></p>
<blockquote>
<ul>
<li>Nginx 可以做网页静态服务器，独立提供 http 服务。</li>
<li>可以实现在一台服务器虚拟出多个网站。</li>
<li>反向代理，负载均衡。高并发需要用多台服务器集群时可以使用 nginx 做反向代理，并且可以设定每台服务器分担负载的概率，不会出现某台服务器负载高宕机而某台服务器闲置的情况。</li>
</ul>
</blockquote>
<p><strong>Nginx启动与访问</strong></p>
<blockquote>
<ol>
<li>创建临时目录：<code>mkdir /var/temp/nginx/client -p</code></li>
<li>进入到Nginx目录下的sbin目录：<code>cd /usr/local/ngiux/sbin</code></li>
<li>输入命令启动Nginx：<code>./nginx</code></li>
<li>启动后查看进程：<code>ps aux|grep nginx</code></li>
<li>关闭 nginx：<code>./nginx -s stop</code>   <code>./nginx -s quit</code></li>
<li>重启 nginx：<code>./nginx -s reload</code></li>
</ol>
</blockquote>
<h4 id="反向代理"><a href="#反向代理" class="headerlink" title="反向代理"></a>反向代理</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">以代理服务器来接受internet上的连接请求，然后将请求转发给内部网络上的服务器，并将从服务器上得到的结果返回给internet上请求连接的客户端，此时代理服务器对外就表现为一个反向代理服务器。</span><br></pre></td></tr></table></figure>

<blockquote>
<p>IP绑定域名：本地可以通过修改 hosts 文件（C:\Windows\System32\drivers\etc），配置域名和 ip 的映射关系，如果 hosts 文件中配置了域名和 ip 的对应关系，不需要走dns 服务器。</p>
<p>例如：192.168.177.129    <a href="http://www.hmtravel.com" target="_blank" rel="noopener">www.hmtravel.com</a></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">&gt; 配置反向代理：</span><br><span class="line">&gt; upstream tomcat-travel&#123;</span><br><span class="line">&gt; 	server 192.168.177.129:8080;</span><br><span class="line">&gt; &#125;</span><br><span class="line">&gt; server &#123;</span><br><span class="line">&gt; 	listen 80; # 监听的端口</span><br><span class="line">&gt; 	server_name  www.hmtravel.com; # 域名或ip</span><br><span class="line">&gt; 	location / &#123;	# 访问路径配置</span><br><span class="line">&gt; 	# root index;# 根目录</span><br><span class="line">&gt; 	proxy_pass http://tomcat-travel; # 通过此步设置代理的目录</span><br><span class="line">&gt; 	index  index.html index.htm; # 默认首页</span><br><span class="line">&gt; &#125;&#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>
</blockquote>
<h4 id="负载均衡"><a href="#负载均衡" class="headerlink" title="负载均衡"></a>负载均衡</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">英文名称为Load Balance，其意思就是分摊到多个操作单元上进行执行，提供了一种廉价有效透明的方法扩展网络设备和服务器的带宽、增加吞吐量、加强网络数据处理能力、提高网络的灵活性和可用性。</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">配置负载均衡:修改 Nginx配置文件</span><br><span class="line">	upstream tomcat-travel &#123;</span><br><span class="line">	   server 192.168.177.129:8080;</span><br><span class="line">	    server 192.168.177.129:8081 weight=2;</span><br><span class="line">	   server 192.168.177.129:8082;</span><br><span class="line">    &#125;</span><br><span class="line">    server &#123;</span><br><span class="line">        listen       80; # 监听的端口</span><br><span class="line">        server_name  www.hmtravel.com; # 域名或ip</span><br><span class="line">        location / &#123;	# 访问路径配置</span><br><span class="line">            # root   index;# 根目录</span><br><span class="line">	    proxy_pass http://tomcat-travel;</span><br><span class="line">            index  index.html index.htm; # 默认首页</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>


      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      
      
      

      
        <div class="post-nav">
          <div class="post-nav-next post-nav-item">
            
              <a href="/2019/06/16/Java核心知识点总结/" rel="next" title="java核心">
                <i class="fa fa-chevron-left"></i> java核心
              </a>
            
          </div>

          <span class="post-nav-divider"></span>

          <div class="post-nav-prev post-nav-item">
            
              <a href="/2019/06/16/Web前端知识点总结/" rel="prev" title="web前端">
                web前端 <i class="fa fa-chevron-right"></i>
              </a>
            
          </div>
        </div>
      

      
      
    </footer>
  </div>
  
  
  
  </article>


  </div>


          </div>
          

  



        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      
        <ul class="sidebar-nav motion-element">
          <li class="sidebar-nav-toc sidebar-nav-active" data-target="post-toc-wrap">
            Tabla de contenidos
          </li>
          <li class="sidebar-nav-overview" data-target="site-overview-wrap">
            Inicio
          </li>
        </ul>
      

      <div class="site-overview-wrap sidebar-panel">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <p class="site-author-name" itemprop="name">Eric</p>
              <div class="site-description motion-element" itemprop="description">Eric's Knowledge Base</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives">
                
                    <span class="site-state-item-count">5</span>
                    <span class="site-state-item-name">entradas</span>
                  </a>
                </div>
              

              

              
            </nav>
          

          

          

          

          

          
          

          
            
          
          

        </div>
      </div>

      
      <!--noindex-->
        <div class="post-toc-wrap motion-element sidebar-panel sidebar-panel-active">
          <div class="post-toc">

            
            
            
            

            
              <div class="post-toc-content"><ol class="nav"><li class="nav-item nav-level-1"><a class="nav-link" href="#Web核心知识点总结"><span class="nav-text">Web核心知识点总结</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#1-XML概述"><span class="nav-text">1. XML概述</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#2-XML约束"><span class="nav-text">2. XML约束</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-XML解析"><span class="nav-text">3. XML解析</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Jsoup解析器"><span class="nav-text">Jsoup解析器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Xpath路径语言"><span class="nav-text">Xpath路径语言</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-web服务器软件"><span class="nav-text">4. web服务器软件</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Tomcat介绍"><span class="nav-text">Tomcat介绍</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-Servlet接口"><span class="nav-text">5. Servlet接口</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#访问原理"><span class="nav-text">访问原理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#使用步骤"><span class="nav-text">使用步骤</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#内部方法"><span class="nav-text">内部方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#体系结构"><span class="nav-text">体系结构</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-HTTP协议"><span class="nav-text">6. HTTP协议</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-请求消息数据格式"><span class="nav-text">7. 请求消息数据格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-Request对象"><span class="nav-text">8. Request对象</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#获取请求消息数据的方法"><span class="nav-text">获取请求消息数据的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取请求头数据的方法"><span class="nav-text">获取请求头数据的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取请求体数据的方法"><span class="nav-text">获取请求体数据的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#获取请求参数通用方式"><span class="nav-text">获取请求参数通用方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#请求转发的方法"><span class="nav-text">请求转发的方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#共享数据的方法"><span class="nav-text">共享数据的方法</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-BeanUtils工具类"><span class="nav-text">9. BeanUtils工具类</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#10-响应消息数据格式"><span class="nav-text">10. 响应消息数据格式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#11-Response对象"><span class="nav-text">11. Response对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#12-重定向"><span class="nav-text">12. 重定向</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#13-ServletContext对象"><span class="nav-text">13. ServletContext对象</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#14-案例：文件下载"><span class="nav-text">14. 案例：文件下载</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#15-Cookie"><span class="nav-text">15. Cookie</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#16-Session"><span class="nav-text">16. Session</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#17-JSP"><span class="nav-text">17. JSP</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#18-MVC开发模式"><span class="nav-text">18. MVC开发模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#19-EL表达式"><span class="nav-text">19. EL表达式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#20-JSTL"><span class="nav-text">20. JSTL</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#21-三层架构"><span class="nav-text">21. 三层架构</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#22-Filter-过滤器"><span class="nav-text">22. Filter 过滤器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#23-代理模式"><span class="nav-text">23. 代理模式</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#24-Listener-监听器"><span class="nav-text">24. Listener 监听器</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#25-Maven"><span class="nav-text">25. Maven</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#26-综合案例"><span class="nav-text">26. 综合案例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#BaseServlet"><span class="nav-text">BaseServlet</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Jquery的serialize方法"><span class="nav-text">Jquery的serialize方法</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Redis与数据库交互"><span class="nav-text">Redis与数据库交互</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#根据参数name获取对应的值"><span class="nav-text">根据参数name获取对应的值</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#SQL语句的拼接"><span class="nav-text">SQL语句的拼接</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#解决中文乱码的两种方式"><span class="nav-text">解决中文乱码的两种方式</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#三种前端往后端传参的方式"><span class="nav-text">三种前端往后端传参的方式</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#27-Linux"><span class="nav-text">27. Linux</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux常用命令"><span class="nav-text">Linux常用命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Vim编辑器"><span class="nav-text">Vim编辑器</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#重定向输出"><span class="nav-text">重定向输出</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#系统管理命令"><span class="nav-text">系统管理命令</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#管道"><span class="nav-text">管道 |</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux权限命令"><span class="nav-text">Linux权限命令</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#文件权限"><span class="nav-text">文件权限</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#Linux三种文件类型"><span class="nav-text">Linux三种文件类型</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#文件类型标识"><span class="nav-text">文件类型标识</span></a></li></ol></li><li class="nav-item nav-level-4"><a class="nav-link" href="#Linux网络操作"><span class="nav-text">Linux网络操作</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#软件安装"><span class="nav-text">软件安装</span></a><ol class="nav-child"><li class="nav-item nav-level-5"><a class="nav-link" href="#在Linux上安装JDK"><span class="nav-text">在Linux上安装JDK</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#在Linux上安装Mysql"><span class="nav-text">在Linux上安装Mysql</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#在Linux上安装tomcat"><span class="nav-text">在Linux上安装tomcat</span></a></li><li class="nav-item nav-level-5"><a class="nav-link" href="#在Linux上安装redis"><span class="nav-text">在Linux上安装redis</span></a></li></ol></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#28-Nginx"><span class="nav-text">28. Nginx</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#反向代理"><span class="nav-text">反向代理</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#负载均衡"><span class="nav-text">负载均衡</span></a></li></ol></li></ol></li></ol></div>
            

          </div>
        </div>
      <!--/noindex-->
      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Eric</span>

  

  
</div>


  <div class="powered-by">Creado mediante <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v3.8.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Tema – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Gemini</a> v7.1.2</div>




        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=3.4.1"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.2"></script>

  <script src="/js/motion.js?v=7.1.2"></script>



  
  


  <script src="/js/affix.js?v=7.1.2"></script>

  <script src="/js/schemes/pisces.js?v=7.1.2"></script>




  
  <script src="/js/scrollspy.js?v=7.1.2"></script>
<script src="/js/post-details.js?v=7.1.2"></script>



  


  <script src="/js/next-boot.js?v=7.1.2"></script>


  

  

  

  


  


  
  <script>
    // Popup Window;
    var isfetched = false;
    var isXml = true;
    // Search DB path;
    var search_path = "search.xml";
    if (search_path.length === 0) {
      search_path = "search.xml";
    } else if (/json$/i.test(search_path)) {
      isXml = false;
    }
    var path = "/" + search_path;
    // monitor main search box;

    var onPopupClose = function (e) {
      $('.popup').hide();
      $('#local-search-input').val('');
      $('.search-result-list').remove();
      $('#no-result').remove();
      $(".local-search-pop-overlay").remove();
      $('body').css('overflow', '');
    }

    function proceedsearch() {
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay"></div>')
        .css('overflow', 'hidden');
      $('.search-popup-overlay').click(onPopupClose);
      $('.popup').toggle();
      var $localSearchInput = $('#local-search-input');
      $localSearchInput.attr("autocapitalize", "none");
      $localSearchInput.attr("autocorrect", "off");
      $localSearchInput.focus();
    }

    // search function;
    var searchFunc = function(path, search_id, content_id) {
      'use strict';

      // start loading animation
      $("body")
        .append('<div class="search-popup-overlay local-search-pop-overlay">' +
          '<div id="search-loading-icon">' +
          '<i class="fa fa-spinner fa-pulse fa-5x fa-fw"></i>' +
          '</div>' +
          '</div>')
        .css('overflow', 'hidden');
      $("#search-loading-icon").css('margin', '20% auto 0 auto').css('text-align', 'center');

      

      $.ajax({
        url: path,
        dataType: isXml ? "xml" : "json",
        async: true,
        success: function(res) {
          // get the contents from search data
          isfetched = true;
          $('.popup').detach().appendTo('.header-inner');
          var datas = isXml ? $("entry", res).map(function() {
            return {
              title: $("title", this).text(),
              content: $("content",this).text(),
              url: $("url" , this).text()
            };
          }).get() : res;
          var input = document.getElementById(search_id);
          var resultContent = document.getElementById(content_id);
          var inputEventFunction = function() {
            var searchText = input.value.trim().toLowerCase();
            var keywords = searchText.split(/[\s\-]+/);
            if (keywords.length > 1) {
              keywords.push(searchText);
            }
            var resultItems = [];
            if (searchText.length > 0) {
              // perform local searching
              datas.forEach(function(data) {
                var isMatch = false;
                var hitCount = 0;
                var searchTextCount = 0;
                var title = data.title.trim();
                var titleInLowerCase = title.toLowerCase();
                var content = data.content.trim().replace(/<[^>]+>/g,"");
                
                var contentInLowerCase = content.toLowerCase();
                var articleUrl = decodeURIComponent(data.url).replace(/\/{2,}/g, '/');
                var indexOfTitle = [];
                var indexOfContent = [];
                // only match articles with not empty titles
                if(title != '') {
                  keywords.forEach(function(keyword) {
                    function getIndexByWord(word, text, caseSensitive) {
                      var wordLen = word.length;
                      if (wordLen === 0) {
                        return [];
                      }
                      var startPosition = 0, position = [], index = [];
                      if (!caseSensitive) {
                        text = text.toLowerCase();
                        word = word.toLowerCase();
                      }
                      while ((position = text.indexOf(word, startPosition)) > -1) {
                        index.push({position: position, word: word});
                        startPosition = position + wordLen;
                      }
                      return index;
                    }

                    indexOfTitle = indexOfTitle.concat(getIndexByWord(keyword, titleInLowerCase, false));
                    indexOfContent = indexOfContent.concat(getIndexByWord(keyword, contentInLowerCase, false));
                  });
                  if (indexOfTitle.length > 0 || indexOfContent.length > 0) {
                    isMatch = true;
                    hitCount = indexOfTitle.length + indexOfContent.length;
                  }
                }

                // show search results

                if (isMatch) {
                  // sort index by position of keyword

                  [indexOfTitle, indexOfContent].forEach(function (index) {
                    index.sort(function (itemLeft, itemRight) {
                      if (itemRight.position !== itemLeft.position) {
                        return itemRight.position - itemLeft.position;
                      } else {
                        return itemLeft.word.length - itemRight.word.length;
                      }
                    });
                  });

                  // merge hits into slices

                  function mergeIntoSlice(text, start, end, index) {
                    var item = index[index.length - 1];
                    var position = item.position;
                    var word = item.word;
                    var hits = [];
                    var searchTextCountInSlice = 0;
                    while (position + word.length <= end && index.length != 0) {
                      if (word === searchText) {
                        searchTextCountInSlice++;
                      }
                      hits.push({position: position, length: word.length});
                      var wordEnd = position + word.length;

                      // move to next position of hit

                      index.pop();
                      while (index.length != 0) {
                        item = index[index.length - 1];
                        position = item.position;
                        word = item.word;
                        if (wordEnd > position) {
                          index.pop();
                        } else {
                          break;
                        }
                      }
                    }
                    searchTextCount += searchTextCountInSlice;
                    return {
                      hits: hits,
                      start: start,
                      end: end,
                      searchTextCount: searchTextCountInSlice
                    };
                  }

                  var slicesOfTitle = [];
                  if (indexOfTitle.length != 0) {
                    slicesOfTitle.push(mergeIntoSlice(title, 0, title.length, indexOfTitle));
                  }

                  var slicesOfContent = [];
                  while (indexOfContent.length != 0) {
                    var item = indexOfContent[indexOfContent.length - 1];
                    var position = item.position;
                    var word = item.word;
                    // cut out 100 characters
                    var start = position - 20;
                    var end = position + 80;
                    if(start < 0){
                      start = 0;
                    }
                    if (end < position + word.length) {
                      end = position + word.length;
                    }
                    if(end > content.length){
                      end = content.length;
                    }
                    slicesOfContent.push(mergeIntoSlice(content, start, end, indexOfContent));
                  }

                  // sort slices in content by search text's count and hits' count

                  slicesOfContent.sort(function (sliceLeft, sliceRight) {
                    if (sliceLeft.searchTextCount !== sliceRight.searchTextCount) {
                      return sliceRight.searchTextCount - sliceLeft.searchTextCount;
                    } else if (sliceLeft.hits.length !== sliceRight.hits.length) {
                      return sliceRight.hits.length - sliceLeft.hits.length;
                    } else {
                      return sliceLeft.start - sliceRight.start;
                    }
                  });

                  // select top N slices in content

                  var upperBound = parseInt('1');
                  if (upperBound >= 0) {
                    slicesOfContent = slicesOfContent.slice(0, upperBound);
                  }

                  // highlight title and content

                  function highlightKeyword(text, slice) {
                    var result = '';
                    var prevEnd = slice.start;
                    slice.hits.forEach(function (hit) {
                      result += text.substring(prevEnd, hit.position);
                      var end = hit.position + hit.length;
                      result += '<b class="search-keyword">' + text.substring(hit.position, end) + '</b>';
                      prevEnd = end;
                    });
                    result += text.substring(prevEnd, slice.end);
                    return result;
                  }

                  var resultItem = '';

                  if (slicesOfTitle.length != 0) {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + highlightKeyword(title, slicesOfTitle[0]) + "</a>";
                  } else {
                    resultItem += "<li><a href='" + articleUrl + "' class='search-result-title'>" + title + "</a>";
                  }

                  slicesOfContent.forEach(function (slice) {
                    resultItem += "<a href='" + articleUrl + "'>" +
                      "<p class=\"search-result\">" + highlightKeyword(content, slice) +
                      "...</p>" + "</a>";
                  });

                  resultItem += "</li>";
                  resultItems.push({
                    item: resultItem,
                    searchTextCount: searchTextCount,
                    hitCount: hitCount,
                    id: resultItems.length
                  });
                }
              })
            };
            if (keywords.length === 1 && keywords[0] === "") {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-search fa-5x"></i></div>'
            } else if (resultItems.length === 0) {
              resultContent.innerHTML = '<div id="no-result"><i class="fa fa-frown-o fa-5x"></i></div>'
            } else {
              resultItems.sort(function (resultLeft, resultRight) {
                if (resultLeft.searchTextCount !== resultRight.searchTextCount) {
                  return resultRight.searchTextCount - resultLeft.searchTextCount;
                } else if (resultLeft.hitCount !== resultRight.hitCount) {
                  return resultRight.hitCount - resultLeft.hitCount;
                } else {
                  return resultRight.id - resultLeft.id;
                }
              });
              var searchResultList = '<ul class=\"search-result-list\">';
              resultItems.forEach(function (result) {
                searchResultList += result.item;
              })
              searchResultList += "</ul>";
              resultContent.innerHTML = searchResultList;
            }
          }

          if ('auto' === 'auto') {
            input.addEventListener('input', inputEventFunction);
          } else {
            $('.search-icon').click(inputEventFunction);
            input.addEventListener('keypress', function (event) {
              if (event.keyCode === 13) {
                inputEventFunction();
              }
            });
          }

          // remove loading animation
          $(".local-search-pop-overlay").remove();
          $('body').css('overflow', '');

          proceedsearch();
        }
      });
    }

    // handle and trigger popup window;
    $('.popup-trigger').click(function(e) {
      e.stopPropagation();
      if (isfetched === false) {
        searchFunc(path, 'local-search-input', 'local-search-result');
      } else {
        proceedsearch();
      };
    });

    $('.popup-btn-close').click(onPopupClose);
    $('.popup').click(function(e){
      e.stopPropagation();
    });
    $(document).on('keyup', function (event) {
      var shouldDismissSearchPopup = event.which === 27 &&
        $('.search-popup').is(':visible');
      if (shouldDismissSearchPopup) {
        onPopupClose();
      }
    });
  </script>





  

  

  

  

  

  

  

  

  

  

  

  

  

  

</body>
</html>
